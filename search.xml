<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CSS</title>
    <url>/2021/02/07/CSS/</url>
    <content><![CDATA[<h3 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h3><p>æœ€è¿‘çœ‹äº†ä¸¤æœ¬ä¹¦ã€ŠCSSæ­ç§˜ã€‹å’Œã€ŠCSSæƒå¨æŒ‡å—ã€‹æ¶è¡¥ä¸€ä¸‹CSSï¼ˆè‡ªå·±çœŸæ˜¯èœåˆ°å¤©é™…ï¼‰ï¼Œè®°å½•ä¸€äº›æœ‰æ„æ€çš„é—®é¢˜</p>
<span id="more"></span>

<h3 id="1-CSSé«˜åº¦ç”±ä»€ä¹ˆå†³å®šï¼Ÿ"><a href="#1-CSSé«˜åº¦ç”±ä»€ä¹ˆå†³å®šï¼Ÿ" class="headerlink" title="1. CSSé«˜åº¦ç”±ä»€ä¹ˆå†³å®šï¼Ÿ"></a>1. CSSé«˜åº¦ç”±ä»€ä¹ˆå†³å®šï¼Ÿ</h3><h4 id="å—çº§å…ƒç´ "><a href="#å—çº§å…ƒç´ " class="headerlink" title="å—çº§å…ƒç´ "></a>å—çº§å…ƒç´ </h4><p>ä¸€ä¸ªå—çº§å…ƒç´ divçš„é«˜åº¦ä¸€èˆ¬æ˜¯ä¸è‡ªèº«çš„<strong>CSSæ ·å¼</strong>å’Œ<strong>å†…éƒ¨å…ƒç´ çš„é«˜åº¦æ€»å’Œ</strong>æœ‰å…³</p>
<ul>
<li><code>div</code>è®¾ç½®äº†heightåï¼Œæ•´ä¸ªç›’æ¨¡å‹çš„é«˜åº¦åŸºæœ¬ç¡®å®šï¼Œå…¶å†…éƒ¨å…ƒç´ å†é«˜ä¹Ÿæ— æ³•æ”¹å˜<code>div</code>çš„é«˜åº¦</li>
<li>å½“<code>div</code>ä¸è®¾ç½®heightæ—¶ï¼Œå…¶é«˜åº¦å’Œå†…éƒ¨æ–‡æ¡£æµå…ƒç´ é«˜åº¦çš„æ€»å’Œæœ‰å…³</li>
</ul>
<h5 id="å—çº§å…ƒç´ ä¸è®¾ç½®é«˜åº¦ï¼Œå†…æœ‰å—çº§å…ƒç´ æ—¶"><a href="#å—çº§å…ƒç´ ä¸è®¾ç½®é«˜åº¦ï¼Œå†…æœ‰å—çº§å…ƒç´ æ—¶" class="headerlink" title="å—çº§å…ƒç´ ä¸è®¾ç½®é«˜åº¦ï¼Œå†…æœ‰å—çº§å…ƒç´ æ—¶"></a>å—çº§å…ƒç´ ä¸è®¾ç½®é«˜åº¦ï¼Œå†…æœ‰å—çº§å…ƒç´ æ—¶</h5><p>ä¼šè¢«å­å…ƒç´ çš„heightã€paddingã€borderæ’‘èµ·æ¥</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    *&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.parent</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">outline</span>: <span class="number">5px</span> solid red;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.child</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>:<span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">5px</span> solid green;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚å›¾ï¼Œçˆ¶çº§å…ƒç´ ä¸è®¾é«˜åº¦ï¼Œé«˜åº¦ä¸ºå­å…ƒç´ height+border</p>
<div style="display: flex; justify-content: center; align-items: center;">
    <img src="C:\Users\H\AppData\Roaming\Typora\typora-user-images\image-20211120195130235.png"
        alt="image-20211120195130235" style="zoom:50%;" />
    <img src="C:\Users\H\AppData\Roaming\Typora\typora-user-images\image-20211120195056819.png"
        alt="image-20211120195056819" style="zoom:50%;" />
</div>



<h5 id="å­å…ƒç´ è®¾ç½®marginæ—¶"><a href="#å­å…ƒç´ è®¾ç½®marginæ—¶" class="headerlink" title="å­å…ƒç´ è®¾ç½®marginæ—¶"></a>å­å…ƒç´ è®¾ç½®marginæ—¶</h5><p>çˆ¶å…ƒç´ é«˜åº¦æ— æ³•è¢«å­å…ƒç´ å‚ç›´æ–¹å‘ä¸Šmarginæ’‘å¼€</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    * &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.parent</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">outline</span>: <span class="number">5px</span> solid red;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.child</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">5px</span> solid green;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<div style="display: flex; justify-content: center; align-items: center;">
Â  Â  <img src="C:\Users\H\AppData\Roaming\Typora\typora-user-images\image-20211120202203417.png"
Â  Â  Â  Â  alt="image-20211120202203417" style="zoom:50%;" />
Â  Â  <img src="C:\Users\H\AppData\Roaming\Typora\typora-user-images\image-20211120202344779.png"
Â  Â  Â  Â  alt="image-20211120202344779" style="zoom:50%;" />
</div>

<p><strong>è§£å†³æ–¹æ¡ˆï¼šçˆ¶å…ƒç´ è®¾ç½®border&#x2F;padding&#x2F;overflowï¼šhidden</strong></p>
<p><strong>æ€»ç»“ï¼šçˆ¶å…ƒç´ é«˜åº¦èƒ½è¢«å­å…ƒç´ çš„heightã€borderã€paddingæ’‘å¼€ï¼Œå¦‚æœçˆ¶å…ƒå…ƒç´ åœ¨å‚ç›´æ–¹å‘ä¸Šæœ‰<code>border</code>,<code>padding</code>ï¼ˆåªè¦åœ¨é€»è¾‘ä¸Šå­˜åœ¨ï¼Œä¸è®ºå¤§å°ï¼‰ä»¥åŠ<code>overflow:hidden</code>ï¼Œéƒ½èƒ½è¢«å­å…ƒç´ çš„<code>margin</code>æ’‘å¼€ï¼Œå¦åˆ™åªèƒ½æ’‘å¼€çˆ¶å…ƒç´ çš„å®½åº¦</strong></p>
<h3 id="2-CSSå®½åº¦ç”±ä»€ä¹ˆå†³å®šï¼Ÿ"><a href="#2-CSSå®½åº¦ç”±ä»€ä¹ˆå†³å®šï¼Ÿ" class="headerlink" title="2. CSSå®½åº¦ç”±ä»€ä¹ˆå†³å®šï¼Ÿ"></a>2. CSSå®½åº¦ç”±ä»€ä¹ˆå†³å®šï¼Ÿ</h3><h4 id="è¡Œå†…-è¡Œå†…å—å…ƒç´ "><a href="#è¡Œå†…-è¡Œå†…å—å…ƒç´ " class="headerlink" title="è¡Œå†…&#x2F;è¡Œå†…å—å…ƒç´ "></a>è¡Œå†…&#x2F;è¡Œå†…å—å…ƒç´ </h4><p>è¡Œå†…å…ƒç´ &#x2F;è¡Œå†…å—çš„å®½åº¦æ˜¯ç”±å®ƒçš„å†…å®¹å†³å®šçš„ï¼Œè¡Œå†…å…ƒç´ ä¸èƒ½è®¾ç½®å®½é«˜</p>
<h4 id="å—çº§å…ƒç´ -1"><a href="#å—çº§å…ƒç´ -1" class="headerlink" title="å—çº§å…ƒç´ "></a>å—çº§å…ƒç´ </h4><p>ä¸€ä¸ªå—çº§å…ƒç´ å®½åº¦å½“ä¸è®¾ç½®æ ·å¼æ—¶é»˜è®¤ä¸ºçˆ¶çº§å…ƒç´ çš„100%<strong>ï¼ˆè¿™ä¸ª100%æ˜¯è‡ªé€‚åº”çš„ï¼Œå¹¶ä¸ç›¸å½“äºwidthï¼š100%ï¼‰</strong></p>
<h3 id="3-ä¸ºä»€ä¹ˆmargin-top-padding-topè®¾ç½®ç™¾åˆ†æ¯”åŸºäºçˆ¶å…ƒç´ çš„å®½åº¦è®¡ç®—çš„ï¼Ÿ"><a href="#3-ä¸ºä»€ä¹ˆmargin-top-padding-topè®¾ç½®ç™¾åˆ†æ¯”åŸºäºçˆ¶å…ƒç´ çš„å®½åº¦è®¡ç®—çš„ï¼Ÿ" class="headerlink" title="3. ä¸ºä»€ä¹ˆmargin-top&#x2F;padding-topè®¾ç½®ç™¾åˆ†æ¯”åŸºäºçˆ¶å…ƒç´ çš„å®½åº¦è®¡ç®—çš„ï¼Ÿ"></a>3. ä¸ºä»€ä¹ˆmargin-top&#x2F;padding-topè®¾ç½®ç™¾åˆ†æ¯”åŸºäºçˆ¶å…ƒç´ çš„å®½åº¦è®¡ç®—çš„ï¼Ÿ</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.parent</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">5px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.child</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: green;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="C:\Users\H\AppData\Roaming\Typora\typora-user-images\image-20211120194334386.png" alt="image-20211120194334386" style="zoom:50%;" />

<p>è¿™é‡Œåˆ©ç”¨margin-topï¼š50%å°†å­å…ƒç´ æŒ¤åˆ°æœ€ä¸‹æ–¹è´´åº•ï¼Œç„¶è€Œè¿™é‡Œçš„ç™¾åˆ†æ¯”æ˜¯ç›¸å¯¹äºçˆ¶çº§å®½åº¦è®¡ç®—çš„ã€‚</p>
<p>CSSæƒå¨æŒ‡å—ä¸­çš„è§£é‡Šï¼šè‹¥æ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ çš„é«˜åº¦è®¡ç®—ä¼šå½¢æˆæ­»å¾ªç¯ã€‚<br><em><strong>â€œæˆ‘ä»¬è®¤ä¸ºï¼Œæ­£å¸¸æµä¸­çš„å¤§å¤šæ•°å…ƒç´ éƒ½ä¼šè¶³å¤Ÿé«˜ä»¥åŒ…å«å…¶åä»£å…ƒç´ ï¼ˆåŒ…æ‹¬å¤–è¾¹è·ï¼‰ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ çš„ä¸Šä¸‹å¤–è¾¹è·æ˜¯çˆ¶å…ƒç´ çš„heightçš„ç™¾åˆ†æ•°ï¼Œå°±å¯èƒ½å¯¼è‡´ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œçˆ¶å…ƒç´ çš„heightä¼šå¢åŠ ï¼Œä»¥é€‚åº”åä»£å…ƒç´ ä¸Šä¸‹å¤–è¾¹è·çš„å¢åŠ ï¼Œè€Œç›¸åº”çš„ï¼Œä¸Šä¸‹å¤–è¾¹è·å› ä¸ºçˆ¶å…ƒç´ heightçš„å¢åŠ ä¹Ÿä¼šå¢åŠ ï¼Œå½¢æˆæ— é™å¾ªç¯ã€‚â€</strong></em></p>
<p><strong>æœ¬è´¨ä¸Šæ˜¯å› ä¸ºcssä¸­é«˜åº¦æ˜¯å¯ä»¥è‡ªé€‚åº”çš„ï¼ŒåŸºäºçˆ¶çº§é«˜åº¦çš„ç™¾åˆ†æ¯”è®¡ç®—ä¼šå¯¼è‡´æ— é™å¾ªç¯çš„é—®é¢˜</strong>ã€‚</p>
<h3 id="4-flexï¼š1"><a href="#4-flexï¼š1" class="headerlink" title="4. flexï¼š1"></a>4. flexï¼š1</h3><p><code>flexï¼šx</code> ç›¸å½“äº <code>flex-grow: xï¼Œflex-shrinkï¼š1ï¼Œflex-basisï¼š0%ï¼›</code></p>
<p><code> flex-grow: å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹,0ä¸ºä¸æ”¾å¤§</code></p>
<p><code>flex-shrink: å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚ </code></p>
<p><code>flex-basis: å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚   </code></p>
<figure class="highlight plaintext"><figcaption><span>``` çš„å«ä¹‰æ˜¯åˆ†é…**ä¸»è½´**æ–¹å‘ä¸Šçš„å‰©ä½™ç©ºé—´ï¼</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">æ‰€ä»¥å¯¹äºç«–ç›´çš„ä¸¤æ å¸ƒå±€ï¼Œåªéœ€è¦æ”¹å˜ä¸€ä¸‹ä¸»è½´æ–¹å‘å³å¯</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">        height: 100%;</span><br><span class="line">        width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line">    .f-box &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-direction: column;</span><br><span class="line">        border: 5px solid gray;</span><br><span class="line">        height: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .top &#123;</span><br><span class="line">        height: 100px;</span><br><span class="line">        background-color: red;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .bot &#123;</span><br><span class="line">        flex: 1;</span><br><span class="line">        background-color:blue;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;f-box&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;top&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;bot&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>



<h3 id="5-displayï¼šnoneï¼Œvisibilityï¼šhiddenï¼Œopacityï¼š0-çš„åŒºåˆ«"><a href="#5-displayï¼šnoneï¼Œvisibilityï¼šhiddenï¼Œopacityï¼š0-çš„åŒºåˆ«" class="headerlink" title="5. displayï¼šnoneï¼Œvisibilityï¼šhiddenï¼Œopacityï¼š0  çš„åŒºåˆ«"></a>5. <code>displayï¼šnoneï¼Œvisibilityï¼šhiddenï¼Œopacityï¼š0</code>  çš„åŒºåˆ«</h3><h4 id="display-none"><a href="#display-none" class="headerlink" title="display: none;"></a>display: none;</h4><ol>
<li>DOM ç»“æ„ï¼šæµè§ˆå™¨ä¸ä¼šæ¸²æŸ“ display å±æ€§ä¸º none çš„å…ƒç´ ï¼Œä¸å æ®ç©ºé—´ï¼›</li>
<li><strong>äº‹ä»¶ç›‘å¬ï¼šæ— æ³•è¿›è¡Œ DOM äº‹ä»¶ç›‘å¬ï¼›</strong></li>
<li>æ€§èƒ½ï¼šåŠ¨æ€æ”¹å˜æ­¤å±æ€§æ—¶ä¼šå¼•èµ·é‡æ’ï¼Œæ€§èƒ½è¾ƒå·®ï¼›</li>
<li>ç»§æ‰¿ï¼šä¸ä¼šè¢«å­å…ƒç´ ç»§æ‰¿ï¼Œæ¯•ç«Ÿå­ç±»ä¹Ÿä¸ä¼šè¢«æ¸²æŸ“ï¼›</li>
<li>transitionï¼štransition ä¸æ”¯æŒ displayã€‚</li>
</ol>
<h4 id="visibility-hidden"><a href="#visibility-hidden" class="headerlink" title="visibility: hidden;"></a>visibility: hidden;</h4><ol>
<li>DOM ç»“æ„ï¼šå…ƒç´ è¢«éšè—ï¼Œä½†æ˜¯ä¼šè¢«æ¸²æŸ“ä¸ä¼šæ¶ˆå¤±ï¼Œå æ®ç©ºé—´ï¼›</li>
<li><strong>äº‹ä»¶ç›‘å¬ï¼šæ— æ³•è¿›è¡Œ DOM äº‹ä»¶ç›‘å¬ï¼›</strong></li>
<li>æ€§ èƒ½ï¼šåŠ¨æ€æ”¹å˜æ­¤å±æ€§æ—¶ä¼šå¼•èµ·é‡ç»˜ï¼Œæ€§èƒ½è¾ƒé«˜ï¼›</li>
<li>ç»§ æ‰¿ï¼šä¼šè¢«å­å…ƒç´ ç»§æ‰¿ï¼Œå­å…ƒç´ å¯ä»¥é€šè¿‡è®¾ç½® visibility: visible; æ¥å–æ¶ˆéšè—ï¼›</li>
<li>transitionï¼švisibility ä¼šç«‹å³æ˜¾ç¤ºï¼Œéšè—æ—¶ä¼šå»¶æ—¶</li>
</ol>
<h4 id="opacity-0"><a href="#opacity-0" class="headerlink" title="opacity: 0;"></a>opacity: 0;</h4><ol>
<li>DOM ç»“æ„ï¼šé€æ˜åº¦ä¸º 100%ï¼Œå…ƒç´ éšè—ï¼Œå æ®ç©ºé—´ï¼›</li>
<li><strong>äº‹ä»¶ç›‘å¬ï¼šå¯ä»¥è¿›è¡Œ DOM äº‹ä»¶ç›‘å¬ï¼›</strong></li>
<li>æ€§ èƒ½ï¼šæå‡ä¸ºåˆæˆå±‚ï¼Œä¸ä¼šè§¦å‘é‡ç»˜ï¼Œæ€§èƒ½è¾ƒé«˜ï¼›</li>
<li>ç»§ æ‰¿ï¼šä¼šè¢«å­å…ƒç´ ç»§æ‰¿,ä¸”ï¼Œå­å…ƒç´ å¹¶ä¸èƒ½é€šè¿‡ opacity: 1 æ¥å–æ¶ˆéšè—ï¼›</li>
<li>transitionï¼šopacity å¯ä»¥å»¶æ—¶æ˜¾ç¤ºå’Œéšè—</li>
</ol>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo + Next + GitHub Pageæ­å»ºä¸ªäººåšå®¢</title>
    <url>/2024/09/21/Hexo%20+%20Next%20+%20GitHub%20Page%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<h3 id="Hexoä»‹ç»"><a href="#Hexoä»‹ç»" class="headerlink" title="Hexoä»‹ç»"></a>Hexoä»‹ç»</h3><p>Hexoæ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„å¼€æºé™æ€åšå®¢æ¡†æ¶ï¼Œç”¨äºå¿«é€Ÿã€ç®€å•ä¸”é«˜æ•ˆåœ°æ­å»ºé™æ€åšå®¢ç½‘ç«™ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œæ–°å¢æ–‡ç« åªéœ€è¦ç¼–è¾‘mdæ–‡ä»¶ï¼Œé€šè¿‡è¿è¡Œå‘½ä»¤å†ç”Ÿæˆåƒhtmlçš„é™æ€æ–‡ä»¶ã€‚</p>
<h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…¨å±€å®‰è£…hexoè„šæ‰‹æ¶</span></span><br><span class="line">npm install -g hexo-cli</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºä¸€blogé¡¹ç›®</span></span><br><span class="line">hexo init blog</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥é¡¹ç›®</span></span><br><span class="line">cd blog</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…ä¾èµ–åŒ…</span></span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<h3 id="å…¶ä»–æ“ä½œ"><a href="#å…¶ä»–æ“ä½œ" class="headerlink" title="å…¶ä»–æ“ä½œ"></a>å…¶ä»–æ“ä½œ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å³é”® Git Bushï¼Œç”¨æˆ·é¡¹ç›®è‡ªåŠ¨åŒ–éƒ¨ç½²</span></span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<h3 id="é¡¹ç›®é¢„è§ˆ"><a href="#é¡¹ç›®é¢„è§ˆ" class="headerlink" title="é¡¹ç›®é¢„è§ˆ"></a>é¡¹ç›®é¢„è§ˆ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…ç†æ—§çš„é™æ€æ–‡ä»¶</span></span><br><span class="line">hexo clean</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”Ÿæˆé™æ€æ–‡ä»¶</span></span><br><span class="line">hexo g</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿è¡Œé¢„è§ˆé¡¹ç›®</span></span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<span id="more"></span>


<h3 id="Hexoé…ç½®æ–‡ä»¶è¯¦è§£ï¼ˆ-config-ymlï¼‰"><a href="#Hexoé…ç½®æ–‡ä»¶è¯¦è§£ï¼ˆ-config-ymlï¼‰" class="headerlink" title="Hexoé…ç½®æ–‡ä»¶è¯¦è§£ï¼ˆ_config.ymlï¼‰"></a>Hexoé…ç½®æ–‡ä»¶è¯¦è§£ï¼ˆ_config.ymlï¼‰</h3><h3 id="Nextä¸»é¢˜æ ·å¼"><a href="#Nextä¸»é¢˜æ ·å¼" class="headerlink" title="Nextä¸»é¢˜æ ·å¼"></a>Nextä¸»é¢˜æ ·å¼</h3><blockquote>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://theme-next.js.org/docs/getting-started/configuration.html">https://theme-next.js.org/docs/getting-started/configuration.html</a></p>
</blockquote>
<h5 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/next-theme/theme-next-docs</span><br><span class="line">cd theme-next-docs</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<h5 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h5><ol>
<li>Hexoç‰ˆæœ¬&gt;&#x3D;5.0</li>
<li>åœ¨Hexoé¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºNexté…ç½®æ–‡ä»¶ï¼Œå‘½åä¸º_config.next.yml</li>
<li>é¦–æ¬¡åˆ›å»ºNexté…ç½®æ–‡ä»¶æ—¶ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶theme-next-docsç›®å½•ä¸‹çš„nexté»˜è®¤é…ç½®æ–‡åŒ–<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Installed through npm</span></span><br><span class="line">cp node_modules/hexo-theme-next/_config.yml _config.next.yml</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Installed through Git</span></span><br><span class="line">cp themes/next/_config.yml _config.next.yml</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>Chore</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Hexo</tag>
        <tag>Github</tag>
      </tags>
  </entry>
  <entry>
    <title>Hooks</title>
    <url>/2021/10/12/Hooks/</url>
    <content><![CDATA[<h3 id="hooksçš„ä½œç”¨"><a href="#hooksçš„ä½œç”¨" class="headerlink" title="hooksçš„ä½œç”¨"></a>hooksçš„ä½œç”¨</h3><p><strong>é’©å­ï¼ˆhookï¼‰å°±æ˜¯ React å‡½æ•°ç»„ä»¶çš„å‰¯æ•ˆåº”è§£å†³æ–¹æ¡ˆï¼Œç”¨æ¥ä¸ºå‡½æ•°ç»„ä»¶å¼•å…¥å‰¯æ•ˆåº”ã€‚</strong> å‡½æ•°ç»„ä»¶çš„ä¸»ä½“åªåº”è¯¥ç”¨æ¥è¿”å›ç»„ä»¶çš„ HTML ä»£ç ï¼Œæ‰€æœ‰çš„å…¶ä»–æ“ä½œï¼ˆå‰¯æ•ˆåº”ï¼‰éƒ½å¿…é¡»é€šè¿‡é’©å­å¼•å…¥ã€‚</p>
<p>ç”±äºå‰¯æ•ˆåº”éå¸¸å¤šï¼Œæ‰€ä»¥é’©å­æœ‰è®¸å¤šç§ã€‚React ä¸ºè®¸å¤šå¸¸è§çš„æ“ä½œï¼ˆå‰¯æ•ˆåº”ï¼‰ï¼Œéƒ½æä¾›äº†ä¸“ç”¨çš„é’©å­ã€‚</p>
<ul>
<li><code>useState()</code>ï¼šä¿å­˜çŠ¶æ€</li>
<li><code>useContext()</code>ï¼šä¿å­˜ä¸Šä¸‹æ–‡</li>
<li><code>useRef()</code>ï¼šä¿å­˜å¼•ç”¨</li>
<li>â€¦â€¦</li>
</ul>
<p>ä¸Šé¢è¿™äº›é’©å­ï¼Œéƒ½æ˜¯å¼•å…¥æŸç§ç‰¹å®šçš„å‰¯æ•ˆåº”ï¼Œè€Œ <strong><code>useEffect()</code>æ˜¯é€šç”¨çš„å‰¯æ•ˆåº”é’©å­</strong> ã€‚æ‰¾ä¸åˆ°å¯¹åº”çš„é’©å­æ—¶ï¼Œå°±å¯ä»¥ç”¨å®ƒã€‚å…¶å®ï¼Œä»åå­—ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œå®ƒè·Ÿå‰¯æ•ˆåº”ï¼ˆside effectï¼‰ç›´æ¥ç›¸å…³ã€‚</p>
<span id="more"></span>

<h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><p><code>useEffect()</code>æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”± React æ¡†æ¶æä¾›ï¼Œåœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨è°ƒç”¨å³å¯ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;åŠ è½½å®Œæˆ&#x27;</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œ<code>useEffect()</code>çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°±æ˜¯æ‰€è¦å®Œæˆçš„å‰¯æ•ˆåº”ï¼ˆæ”¹å˜ç½‘é¡µæ ‡é¢˜ï¼‰ã€‚ç»„ä»¶åŠ è½½ä»¥åï¼ŒReact å°±ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚</p>
<p><code>useEffect()</code>çš„ä½œç”¨å°±æ˜¯æŒ‡å®šä¸€ä¸ªå‰¯æ•ˆåº”å‡½æ•°ï¼Œç»„ä»¶æ¯æ¸²æŸ“ä¸€æ¬¡ï¼Œè¯¥å‡½æ•°å°±æ‰§è¡Œä¸€æ¬¡ã€‚<strong>ç»„ä»¶é¦–æ¬¡åœ¨ç½‘é¡µ DOM åŠ è½½åï¼Œå‰¯æ•ˆåº”å‡½æ•°ä¹Ÿä¼šæ‰§è¡Œã€‚</strong></p>
<h5 id="useEffectæŒ‡å®šä¾èµ–é¡¹"><a href="#useEffectæŒ‡å®šä¾èµ–é¡¹" class="headerlink" title="useEffectæŒ‡å®šä¾èµ–é¡¹"></a>useEffectæŒ‡å®šä¾èµ–é¡¹</h5><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›<code>useEffect()</code>æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨å®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½¿ç”¨ä¸€ä¸ªæ•°ç»„æŒ‡å®šå‰¯æ•ˆåº”å‡½æ•°çš„ä¾èµ–é¡¹ï¼Œåªæœ‰ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šæ‰§è¡Œã€‚</p>
<p>å¦‚æœä¸Šä¾‹æ”¹ä¸º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;åŠ è½½å®Œæˆ&#x27;</span>;</span><br><span class="line">  &#125;, []);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¾¿åªä¼šåœ¨ç»„ä»¶é¦–æ¬¡æŒ‚è½½æ—¶æ‰§è¡Œå‡½æ•°ï¼Œç›¸å½“äºclass componentä¸­çš„componentDidMount</p>
<h5 id="useEffect-çš„ç”¨é€”"><a href="#useEffect-çš„ç”¨é€”" class="headerlink" title="useEffect() çš„ç”¨é€”"></a>useEffect() çš„ç”¨é€”</h5><p>åªè¦æ˜¯å‰¯æ•ˆåº”ï¼Œéƒ½å¯ä»¥ä½¿ç”¨<code>useEffect()</code>å¼•å…¥ã€‚å®ƒçš„å¸¸è§ç”¨é€”æœ‰ä¸‹é¢å‡ ç§ã€‚</p>
<ul>
<li>è·å–æ•°æ®ï¼ˆdata fetchingï¼‰</li>
<li>äº‹ä»¶ç›‘å¬æˆ–è®¢é˜…ï¼ˆsetting up a subscriptionï¼‰</li>
<li>æ”¹å˜ DOMï¼ˆchanging the DOMï¼‰</li>
<li>è¾“å‡ºæ—¥å¿—ï¼ˆloggingï¼‰</li>
</ul>
<h5 id="useEffectè¿”å›å€¼"><a href="#useEffectè¿”å›å€¼" class="headerlink" title="useEffectè¿”å›å€¼"></a>useEffectè¿”å›å€¼</h5><p>å‰¯æ•ˆåº”æ˜¯éšç€ç»„ä»¶åŠ è½½è€Œå‘ç”Ÿçš„ï¼Œé‚£ä¹ˆç»„ä»¶å¸è½½æ—¶ï¼Œå¯èƒ½éœ€è¦æ¸…ç†è¿™äº›å‰¯æ•ˆåº”ã€‚</p>
<p><code>useEffect()</code>å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ï¼Œæ‰§è¡Œè¯¥å‡½æ•°ï¼Œæ¸…ç†å‰¯æ•ˆåº”ã€‚å¦‚æœä¸éœ€è¦æ¸…ç†å‰¯æ•ˆåº”ï¼Œ<code>useEffect()</code>å°±ä¸ç”¨è¿”å›ä»»ä½•å€¼ã€‚</p>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> subscription = props.<span class="property">source</span>.<span class="title function_">subscribe</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    subscription.<span class="title function_">unsubscribe</span>();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [props.<span class="property">source</span>]);</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œ<code>useEffect()</code>åœ¨ç»„ä»¶åŠ è½½æ—¶è®¢é˜…äº†ä¸€ä¸ªäº‹ä»¶ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè®¢é˜…ã€‚</p>
<p><strong>å®é™…ä½¿ç”¨ä¸­ï¼Œç”±äºå‰¯æ•ˆåº”å‡½æ•°é»˜è®¤æ˜¯æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥æ¸…ç†å‡½æ•°ä¸ä»…ä¼šåœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œæ¯æ¬¡å‰¯æ•ˆåº”å‡½æ•°é‡æ–°æ‰§è¡Œä¹‹å‰ï¼Œä¹Ÿä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œç”¨æ¥æ¸…ç†ä¸Šä¸€æ¬¡æ¸²æŸ“çš„å‰¯æ•ˆåº”ã€‚</strong></p>
<h5 id="useEffectå¸¸è§é—®é¢˜"><a href="#useEffectå¸¸è§é—®é¢˜" class="headerlink" title="useEffectå¸¸è§é—®é¢˜"></a>useEffectå¸¸è§é—®é¢˜</h5><h6 id="ä½¿ç”¨useEffectåº”è¯¥åœ¨ä¾èµ–çš„å˜é‡ä¸­æŒ‡æ˜å®šä¹‰çš„å‡½æ•°ä¼šç”¨åˆ°å“ªäº›stateæˆ–è€…props"><a href="#ä½¿ç”¨useEffectåº”è¯¥åœ¨ä¾èµ–çš„å˜é‡ä¸­æŒ‡æ˜å®šä¹‰çš„å‡½æ•°ä¼šç”¨åˆ°å“ªäº›stateæˆ–è€…props" class="headerlink" title="ä½¿ç”¨useEffectåº”è¯¥åœ¨ä¾èµ–çš„å˜é‡ä¸­æŒ‡æ˜å®šä¹‰çš„å‡½æ•°ä¼šç”¨åˆ°å“ªäº›stateæˆ–è€…props"></a><strong>ä½¿ç”¨useEffectåº”è¯¥åœ¨ä¾èµ–çš„å˜é‡ä¸­æŒ‡æ˜å®šä¹‰çš„å‡½æ•°ä¼šç”¨åˆ°å“ªäº›stateæˆ–è€…props</strong></h6><p>effect å¯èƒ½ä¼šä½¿ç”¨ä¸€äº›é¢‘ç¹å˜åŒ–çš„å€¼ã€‚å¯èƒ½ä¼šå¿½ç•¥ä¾èµ–åˆ—è¡¨ä¸­ stateï¼Œä½†è¿™é€šå¸¸ä¼šå¼•èµ· Bugï¼š<span name = "233"> </span></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">      <span class="title function_">setCount</span>(count + <span class="number">1</span>); <span class="comment">// è¿™ä¸ª effect ä¾èµ–äº `count` state    </span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(id);</span><br><span class="line">  &#125;, []); <span class="comment">// ğŸ”´ Bug: `count` æ²¡æœ‰è¢«æŒ‡å®šä¸ºä¾èµ–</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¼ å…¥ç©ºçš„ä¾èµ–æ•°ç»„ <code>[]</code>ï¼Œæ„å‘³ç€è¯¥ hook åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œå¹¶éé‡æ–°æ¸²æŸ“æ—¶ã€‚ä½†å¦‚æ­¤ä¼šæœ‰é—®é¢˜ï¼Œåœ¨ <code>setInterval</code> çš„å›è°ƒä¸­ï¼Œ<code>count</code> çš„å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚å› ä¸ºå½“ effect æ‰§è¡Œæ—¶ï¼Œ<strong>reactä¼šåˆ›å»ºä¸€ä¸ªé—­åŒ…ï¼Œå¹¶å°† <code>count</code> çš„å€¼è¢«ä¿å­˜åœ¨è¯¥é—­åŒ…å½“ä¸­ï¼Œä¸”åˆå€¼ä¸º <code>0</code>ã€‚æ¯éš”ä¸€ç§’ï¼Œå›è°ƒå°±ä¼šæ‰§è¡Œ <code>setCount(0 + 1)</code>ï¼Œå› æ­¤ï¼Œ<code>count</code> æ°¸è¿œä¸ä¼šè¶…è¿‡ 1ã€‚</strong></p>
<p>æŒ‡å®š <code>[count]</code> ä½œä¸ºä¾èµ–åˆ—è¡¨å°±èƒ½ä¿®å¤è¿™ä¸ª Bugï¼Œä½†ä¼šå¯¼è‡´æ¯æ¬¡æ”¹å˜å‘ç”Ÿæ—¶å®šæ—¶å™¨éƒ½è¢«é‡ç½®ã€‚äº‹å®ä¸Šï¼Œæ¯ä¸ª <code>setInterval</code> åœ¨è¢«æ¸…é™¤å‰éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ï¼ˆç­‰äºè¯´ç›´æ¥ä½¿ç”¨ <code>setTimeout</code>å°±è¡Œäº†ï¼‰ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼setStateå‡½æ•°å¼æ›´æ–°çš„æ“ä½œï¼Œä¸ä¾èµ–å¤–éƒ¨countå˜é‡ï¼Œå®ƒå…è®¸æˆ‘ä»¬æŒ‡å®š state è¯¥å¦‚ä½•æ”¹å˜è€Œä¸ç”¨å¼•ç”¨stateæˆ–è€…props</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setCount</span>(<span class="function"><span class="params">c</span> =&gt;</span> c + <span class="number">1</span>); <span class="comment">// âœ… åœ¨è¿™ä¸ä¾èµ–äºå¤–éƒ¨çš„ `count` å˜é‡    &#125;, 1000);</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(id);</span><br><span class="line">  &#125;, []); <span class="comment">// âœ… æˆ‘ä»¬çš„ effect ä¸ä½¿ç”¨ç»„ä»¶ä½œç”¨åŸŸä¸­çš„ä»»ä½•å˜é‡</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="useLayoutEffect-vs-useEffect"><a href="#useLayoutEffect-vs-useEffect" class="headerlink" title="useLayoutEffect vs. useEffect"></a>useLayoutEffect vs. useEffect</h5><p>useLayoutEffect å’Œ useEffect çš„ä¼ å‚ä¸€è‡´ï¼Œä½†æœ‰ä»¥ä¸‹åŒºåˆ«</p>
<ol>
<li>æ‰§è¡Œæ—¶æœºä¸åŒã€‚useLayoutEffect çš„å…¥å‚å‡½æ•°ä¼šåœ¨ react æ›´æ–° DOM æ ‘ååŒæ­¥è°ƒç”¨ï¼ˆ<strong>å…¶å®å°±æ˜¯domæ ‘æ›´æ–°ï¼Œæµè§ˆå™¨é‡ç»˜å‰ä¼šæ‰§è¡ŒuseLayoutEffecté‡Œçš„å‡½æ•°ï¼Œæ­¤æ—¶æ¯”å¦‚å»æ‹¿ style æˆ–è€… dom å°ºå¯¸ï¼Œéƒ½æ˜¯æ¸¸è§ˆå™¨å³å°†æ¸²æŸ“çš„é‚£ä¸€æ¬¡çš„å°ºå¯¸ï¼Œè€Œä¸æ˜¯ç°åœ¨é¡µé¢ä¸Šå±•ç¤ºçš„å°ºå¯¸</strong>ï¼‰ï¼ŒuseEffect ä¸ºå¼‚æ­¥è°ƒç”¨ï¼ˆuseEffect åˆ™è‚¯å®šæ˜¯åœ¨æ¸¸è§ˆå™¨æ¸²æŸ“å®Œåæ‰æ‰§è¡Œï¼‰ï¼Œæ‰€ä»¥åº”è¯¥å°½å¯èƒ½ä½¿ç”¨æ ‡å‡†çš„ <code>useEffect</code> ä»¥é¿å…é˜»å¡è§†è§‰æ›´æ–°</li>
<li>useLayoutEffect åœ¨ development æ¨¡å¼ä¸‹ SSR ä¼šæœ‰è­¦å‘Šâš ï¸</li>
</ol>
<p>é€šå¸¸æƒ…å†µä¸‹ useLayoutEffect ä¼šç”¨åœ¨åšåŠ¨æ•ˆå’Œè®°å½• layout çš„ä¸€äº›ç‰¹æ®Šåœºæ™¯ï¼ˆæ¯”å¦‚é˜²æ­¢æ¸²æŸ“é—ªçƒï¼Œåœ¨æ¸²æŸ“å‰å†ç»™ä½ ä¸ªæœºä¼šå»æ”¹ DOMï¼‰ã€‚ä¸€èˆ¬ä¸éœ€è¦ä½¿ç”¨ useLayoutEffectã€‚</p>
<h3 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h3><p>å½“éœ€è¦å­˜æ”¾ä¸€ä¸ªæ•°æ®ï¼Œéœ€è¦æ— è®ºåœ¨å“ªé‡Œéƒ½å–åˆ°æœ€æ–°çŠ¶æ€æ—¶ï¼Œéœ€è¦ä½¿ç”¨ useRefï¼Œ<strong>ref æ˜¯ä¸€ç§å¯å˜æ•°æ®ã€‚</strong></p>
<p><a href="#233">å¦‚ä¸Šæ–‡æåˆ°çš„ä»£ç æ®µ</a> ä¸­ï¼Œå› ä¸ºå­˜åœ¨é—­åŒ…é—®é¢˜ï¼Œcountæ°¸è¿œä¼šä¸º1ï¼Œlogæ°¸è¿œä¸º0ï¼›</p>
<p>å¯ä»¥å¼•å…¥<code>useRef</code>è§£å†³è¿™ä¸ªé—®é¢˜</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> currentCount = <span class="title function_">useRef</span>(count);</span><br><span class="line">  <span class="comment">// è¿™é‡Œåœ¨æ¯ä¸€æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“åæ›´æ–°refçš„å€¼</span></span><br><span class="line">  currentCount.<span class="property">current</span> = count;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(currentCount.<span class="property">current</span>)</span><br><span class="line">      <span class="title function_">setCount</span>(currentCount.<span class="property">current</span> + <span class="number">1</span>); <span class="comment">// è¿™ä¸ª effect ä¾èµ–äº `count` state    </span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(id);</span><br><span class="line">  &#125;, []); <span class="comment">// ğŸ”´ Bug: `count` æ²¡æœ‰è¢«æŒ‡å®šä¸ºä¾èµ–</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="useStateã€useRef-å¦‚ä½•å†³ç­–ç”¨å“ªç§æ¥ç»´æŠ¤çŠ¶æ€"><a href="#useStateã€useRef-å¦‚ä½•å†³ç­–ç”¨å“ªç§æ¥ç»´æŠ¤çŠ¶æ€" class="headerlink" title="useStateã€useRef å¦‚ä½•å†³ç­–ç”¨å“ªç§æ¥ç»´æŠ¤çŠ¶æ€"></a>useStateã€useRef å¦‚ä½•å†³ç­–ç”¨å“ªç§æ¥ç»´æŠ¤çŠ¶æ€</h3><p>useRef ç”Ÿæˆçš„å¯å˜å¯¹è±¡ï¼Œå› ä¸ºä½¿ç”¨èµ·æ¥å°±è·Ÿæ™®é€šå¯¹è±¡ä¸€æ ·ï¼Œèµ‹å€¼æ—¶å€™ React æ˜¯æ— æ³•æ„ŸçŸ¥åˆ°å€¼å˜æ›´çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šè§¦å‘ç»„ä»¶é‡ç»˜ã€‚åˆ©ç”¨å…¶ä¸ useState çš„åŒºåˆ«ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¿™æ ·åŒºåˆ†ä½¿ç”¨ï¼š</p>
<ul>
<li>ç»´æŠ¤ä¸ UI ç›¸å…³çš„çŠ¶æ€ï¼Œä½¿ç”¨ useState</li>
</ul>
<blockquote>
<p>ç¡®ä¿æ›´æ”¹æ—¶åˆ·æ–° UI</p>
</blockquote>
<ul>
<li>å€¼æ›´æ–°ä¸éœ€è¦è§¦å‘é‡ç»˜æ—¶ï¼Œä½¿ç”¨ useRef</li>
<li>ä¸éœ€è¦å˜æ›´çš„æ•°æ®ã€å‡½æ•°ï¼Œä½¿ç”¨ useState</li>
</ul>
<blockquote>
<p>æ¯”å¦‚ï¼Œéœ€è¦å£°æ˜ä¸€ä¸ªä¸å¯å˜çš„å€¼æ—¶ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>
</blockquote>
<blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> [immutable] = <span class="title function_">useState</span>(someState);</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>ä¸è¿”å›å˜æ›´å…¥å£å‡½æ•°ã€‚useRef è™½ç„¶å¯ä»¥å€ŸåŠ© TypeScript è¾¾åˆ°è¯­æ³•æ£€æµ‹ä¸Šçš„ immutableï¼Œä½†å®é™…è¿˜æ˜¯ mutable çš„ã€‚</p>
</blockquote>
<h3 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h3><h5 id="contextç®€ä»‹ï¼š"><a href="#contextç®€ä»‹ï¼š" class="headerlink" title="contextç®€ä»‹ï¼š"></a>contextç®€ä»‹ï¼š</h5><p><code>React.createContext</code> æ–°å»ºcontext</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MyContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>(defaultValue);</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºä¸€ä¸ª Context å¯¹è±¡ã€‚å½“ React æ¸²æŸ“ä¸€ä¸ªè®¢é˜…äº†è¿™ä¸ª Context å¯¹è±¡çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä¼šä»ç»„ä»¶æ ‘ä¸­ç¦»è‡ªèº«æœ€è¿‘çš„é‚£ä¸ªåŒ¹é…çš„ <code>Provider</code> ä¸­è¯»å–åˆ°å½“å‰çš„ context å€¼ã€‚</p>
<p><strong>åªæœ‰</strong>å½“ç»„ä»¶æ‰€å¤„çš„æ ‘ä¸­æ²¡æœ‰åŒ¹é…åˆ° Provider æ—¶ï¼Œå…¶ <code>defaultValue</code> å‚æ•°æ‰ä¼šç”Ÿæ•ˆã€‚æ­¤é»˜è®¤å€¼æœ‰åŠ©äºåœ¨ä¸ä½¿ç”¨ Provider åŒ…è£…ç»„ä»¶çš„æƒ…å†µä¸‹å¯¹ç»„ä»¶è¿›è¡Œæµ‹è¯•ã€‚<strong>æ³¨æ„ï¼šå°† <code>undefined</code> ä¼ é€’ç»™ Provider çš„ value æ—¶ï¼Œæ¶ˆè´¹ç»„ä»¶çš„ <code>defaultValue</code> ä¸ä¼šç”Ÿæ•ˆã€‚</strong></p>
<p><code>Context.Provider</code></p>
<p>æ¯ä¸ª Context å¯¹è±¡éƒ½ä¼šè¿”å›ä¸€ä¸ª Provider React ç»„ä»¶ï¼Œå®ƒå…è®¸æ¶ˆè´¹ç»„ä»¶è®¢é˜… context çš„å˜åŒ–ã€‚</p>
<h5 id="useContextä½¿ç”¨"><a href="#useContextä½¿ç”¨" class="headerlink" title="useContextä½¿ç”¨"></a>useContextä½¿ç”¨</h5><p>æ¥æ”¶ä¸€ä¸ª context å¯¹è±¡ï¼ˆ<code>React.createContext</code> çš„è¿”å›å€¼ï¼‰å¹¶è¿”å›è¯¥ context çš„å½“å‰å€¼ã€‚å½“å‰çš„ context å€¼ç”±ä¸Šå±‚ç»„ä»¶ä¸­è·ç¦»å½“å‰ç»„ä»¶æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> çš„ <code>value</code> prop å†³å®šã€‚</p>
<p>å½“ç»„ä»¶ä¸Šå±‚æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> æ›´æ–°æ—¶ï¼Œè¯¥ Hook ä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œå¹¶ä½¿ç”¨æœ€æ–°ä¼ é€’ç»™ <code>MyContext</code> provider çš„ context <code>value</code> å€¼ã€‚å³ä½¿ç¥–å…ˆä½¿ç”¨ <a href="https://zh-hans.reactjs.org/docs/react-api.html#reactmemo"><code>React.memo</code></a> æˆ– <a href="https://zh-hans.reactjs.org/docs/react-component.html#shouldcomponentupdate"><code>shouldComponentUpdate</code></a>ï¼Œä¹Ÿä¼šåœ¨ç»„ä»¶æœ¬èº«ä½¿ç”¨ <code>useContext</code> æ—¶é‡æ–°æ¸²æŸ“ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useContext, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ThemeContext</span>, themes &#125; <span class="keyword">from</span> <span class="string">&quot;./utils/index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [theme, setTheme] = <span class="title function_">useState</span>(themes.<span class="property">light</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">value</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">theme</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">toggle:</span> () =&gt;</span></span></span><br><span class="line"><span class="language-xml">                    setTheme(</span></span><br><span class="line"><span class="language-xml">                        theme === themes.light ? themes.dark : themes.light</span></span><br><span class="line"><span class="language-xml">                    ),</span></span><br><span class="line"><span class="language-xml">            &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        &gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Toolbar</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Toolbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">ThemedButton</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ThemedButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> context = <span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">background:</span> <span class="attr">context.theme.background</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">color:</span> <span class="attr">context.theme.foreground</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onClick</span>=<span class="string">&#123;context.toggle&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">            I am styled by theme context!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo"></a>useMemo</h3><p>useMemo ä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼š</p>
<ol>
<li>ç¼“å­˜ä¸€äº›è€—æ—¶è®¡ç®—ï¼Œé€šè¿‡å£°æ˜è®¡ç®—ç»“æœçš„ä¾èµ–æ˜¯å¦å˜æ›´ï¼Œæ¥é‡ç”¨ä¸Šæ¬¡è®¡ç®—ç»“æœ</li>
<li>ä¿è¯å¼•ç”¨ä¸å˜ï¼Œé’ˆå¯¹ä¸‹æ¸¸ä½¿ç”¨ React.memo çš„ç»„ä»¶è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼ˆuseCallback ä¹Ÿæœ‰ä¸€æ ·çš„ä½œç”¨ï¼‰</li>
</ol>
<p>æ¯”å¦‚ï¼Œè®¡ç®—è€—æ—¶çš„ fibonacci æ•°åˆ—ï¼Œå°±å¯ä»¥ç”¨ useMemo æ¥ä¼˜åŒ–åœ¨ n ä¸å˜çš„æƒ…å†µä¸‹ï¼ŒäºŒæ¬¡æ¸²æŸ“çš„æ€§èƒ½</p>
<p><code>useMemo(() =&gt; &#123;  return fibonacci(props.n) &#125;, [props.n]); </code></p>
<h3 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback"></a>useCallback</h3><p>useCallback æ˜¯ç®€åŒ–ç‰ˆçš„ useMemoï¼Œæ–¹ä¾¿ç¼“å­˜å‡½æ•°å¼•ç”¨ã€‚ä¸‹é¢çš„ä»£ç æ˜¯ç­‰ä»·çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> memoCallback = <span class="title function_">useCallback</span>(<span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// DO SOMETHING</span></span><br><span class="line">&#125;, [...deps]);</span><br></pre></td></tr></table></figure>

<blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> memoCallback = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// DO SOMETHING</span></span><br><span class="line">&#125;, [...deps]);</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¹ˆæœ‰é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶ï¼Œä¸è¦ä½¿ç”¨ useCallback å’Œ useMemoï¼Œæ€§èƒ½ä¼˜åŒ–å…ˆäº¤ç»™æ¡†æ¶å¤„ç†è§£å†³ã€‚æ‰‹å·¥çš„å¾®ä¼˜åŒ–åœ¨æ²¡æœ‰å¯¹æ¡†æ¶å’Œä¸šåŠ¡åœºæ™¯æœ‰æ·±å…¥äº†è§£æ—¶ï¼Œå¯èƒ½å‡ºç°æ€§èƒ½åŠ£åŒ–ã€‚</p>
</blockquote>
<blockquote>
<p><a href="https://bytedance.feishu.cn/docs/doccnKcSsW0lazRObCmw3GlGkmd">è‡´å‘½çš„ useCallback&#x2F;useMemoï¼ˆç¿»è¯‘ï¼‰</a> </p>
</blockquote>
<blockquote>
<p><a href="https://bytedance.feishu.cn/docs/doccn9SDGhQJ6mM58BxjfRJFs3d">useCallback hellé—®é¢˜æ€»ç»“</a> </p>
</blockquote>
<blockquote>
<p>å…³äºå¦‚ä½•å‡å°‘ useCallback çœ‹ <strong><a href="https://bytedance.feishu.cn/docs/doccnmgIb5KcV3F0zeE47o6PvCh#KQKJ2M">ç¬¬äºŒå¤©</a></strong></p>
</blockquote>
<h3 id="ç»„ä»¶é€šä¿¡"><a href="#ç»„ä»¶é€šä¿¡" class="headerlink" title="ç»„ä»¶é€šä¿¡"></a>ç»„ä»¶é€šä¿¡</h3><h5 id="çˆ·å­™ç»„ä»¶é€šä¿¡"><a href="#çˆ·å­™ç»„ä»¶é€šä¿¡" class="headerlink" title="çˆ·å­™ç»„ä»¶é€šä¿¡"></a>çˆ·å­™ç»„ä»¶é€šä¿¡</h5><p>çˆ·å­™ç»„ä»¶é€šä¿¡ä¸»è¦æœ‰ 3 ç§æ–¹å¼ï¼š</p>
<ol>
<li>å°†å­™å­ç»„ä»¶çš„ props å°è£…åœ¨ä¸€ä¸ªå›ºå®šå­—æ®µä¸­</li>
<li>é€šè¿‡ children é€ä¼ </li>
<li>é€šè¿‡ context ä¼ é€’</li>
</ol>
<p>å‡è®¾æœ‰ä¸ªä¸‰å±‚ç»„ä»¶ï¼Œçˆ·çˆ·åˆ†åˆ«ç»™å„¿å­å’Œå­™å­å‘çº¢åŒ…</p>
<p>å…ˆçœ‹é’é“œè§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Grandpa</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [someMoneyForMe] = <span class="title function_">useState</span>(<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">const</span> [someMoneyForDaddy] = <span class="title function_">useState</span>(<span class="number">101</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Daddy</span> <span class="attr">money</span>=<span class="string">&#123;someMoneyForDaddy&#125;</span> <span class="attr">moneyForSon</span>=<span class="string">&#123;someMoneyForMe&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Daddy</span>(<span class="params">props: &#123; money: number; moneyForSon: number &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; money, moneyForSon &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;daddy&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>This is Daddy, received $&#123;money&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Me</span> <span class="attr">money</span>=<span class="string">&#123;moneyForSon&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Me</span>(<span class="params">props: &#123; money: number &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; money &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;son&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>This is Me, received $&#123;money&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Daddy ç»„ä»¶ä¼šé€ä¼ çˆ·çˆ·ç»™å­™å­çš„ç»„ä»¶ç»™ Meã€‚è¿™ç§æ–¹æ¡ˆçš„ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œä»¥åçˆ·çˆ·è¦ç»™ Daddy å’Œ Me å‘ç³–æœçš„æ—¶å€™ï¼ŒDaddy è¿˜å¾—åŠ å­—æ®µã€‚</p>
<p><strong>å°†å­™å­ç»„ä»¶çš„ props å°è£…åœ¨ä¸€ä¸ªå›ºå®šå­—æ®µä¸­</strong></p>
<p>æŒ‰ç…§ 1 çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥å›ºå®šç»™ Daddy æ·»åŠ ä¸€ä¸ª sonProps çš„å­—æ®µï¼Œç„¶åå°† Grandpa éœ€è¦ä¼ ç»™å­™å­çš„çŠ¶æ€å…¨éƒ¨é€šè¿‡ sonProps ä¼ é€’</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Grandpa</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [someMoneyForMe] = <span class="title function_">useState</span>(<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">const</span> [someMoneyForDaddy] = <span class="title function_">useState</span>(<span class="number">101</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Daddy</span> <span class="attr">money</span>=<span class="string">&#123;someMoneyForDaddy&#125;</span> <span class="attr">sonProps</span>=<span class="string">&#123;&#123;money:</span> <span class="attr">someMoneyForMe</span>&#125;&#125; /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Daddy</span>(<span class="params">props: &#123; money: number; sonProps: Parameters&lt;<span class="keyword">typeof</span> Me&gt;[<span class="number">0</span>]; &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; money, sonProps &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;daddy&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>This is Daddy, received $&#123;money&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Me</span> &#123;<span class="attr">...sonProps</span>&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Me</span>(<span class="params">props: &#123; money: number &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; money &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;son&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>This is Me, received $&#123;money&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä»¥åè¦ç»™ Me åŠ å­—æ®µï¼Œå°±ä¸ç”¨æ”¹ Daddy äº†ã€‚<strong>ä½†è¦æµ‹è¯• Daddy æ—¶è¿˜å¾— mock Me ç»„ä»¶çš„æ•°æ®ï¼ŒDaddy å’Œ Son è€¦åˆã€‚</strong></p>
<p><strong>é€šè¿‡ children é€ä¼ </strong></p>
<p>children ç±»ä¼¼äº vue ä¸­çš„ slotï¼Œå¯ä»¥å®Œæˆä¸€äº›åµŒå¥—ç»„ä»¶é€šä¿¡çš„åŠŸèƒ½</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Grandpa</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [someMoneyForMe] = <span class="title function_">useState</span>(<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">const</span> [someMoneyForDaddy] = <span class="title function_">useState</span>(<span class="number">101</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Daddy</span> <span class="attr">money</span>=<span class="string">&#123;someMoneyForDaddy&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Me</span> <span class="attr">money</span>=<span class="string">&#123;someMoneyForMe&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Daddy</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Daddy</span>(<span class="params">props: &#123; money: number; children?: React.ChildNode &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; money, children &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;daddy&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>This is Daddy, received $&#123;money&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Me</span>(<span class="params">props: &#123; money: number &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; money &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;son&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>This is Me, received $&#123;money&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°† Daddy çš„åµŒå¥—éƒ¨åˆ†ç”¨ children æ›¿ä»£åï¼Œè§£è€¦äº†å­ç»„ä»¶å’Œå­™å­ç»„ä»¶çš„ä¾èµ–å…³ç³»ï¼ŒDaddy ç»„ä»¶æ›´åŠ ç‹¬ç«‹ã€‚</p>
<p>ä½œä¸ºæ›¿ä»£ï¼Œä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªç»„ä»¶å®ä¾‹ï¼š</p>
<p><code><Daddy money=&#123;someMoneyForDaddy&#125; me=&#123;<Me money=&#123;someMoneyForMe&#125; /> </code></p>
<p><strong>ä¸‰ç§æ–¹æ¡ˆçš„å†³ç­–</strong></p>
<ol>
<li>ç¬¬ä¸€ç§æ–¹æ¡ˆä¸€èˆ¬ç”¨äºå›ºå®šç»“æ„å’Œè·¨ç»„ä»¶æœ‰äº’ç›¸ä¾èµ–çš„åœºæ™¯ï¼Œå¤šè§äº UI æ¡†æ¶ä¸­çš„å¤åˆç»„ä»¶ä¸åŸå­ç»„ä»¶çš„è®¾è®¡ä¸­</li>
<li>ç¬¬äºŒç§å¸¸ç”¨åœ¨åµŒå¥—å±‚çº§ä¸æ·±çš„ä¸šåŠ¡ä»£ç ä¸­ï¼Œæ¯”å¦‚è¡¨å•åœºæ™¯ã€‚<strong>ä¼˜ç‚¹æ˜¯é¡¶å±‚ Grandpa çš„ä¸šåŠ¡æ”¶æ•›åº¦å¾ˆé«˜ï¼Œä¸€çœ¼èƒ½çœ‹æ¸… UI ç»“æ„åŠçŠ¶æ€ç»‘å®šå…³ç³»ï¼Œç›¸å½“äºæ‹å¹³äº† React ç»„ä»¶æ ‘</strong></li>
<li>ç¬¬ä¸‰ç§æ¯”è¾ƒé€šç”¨ï¼Œé€‚åˆå¤æ‚åµŒå¥—é€ä¼ åœºæ™¯ã€‚ç¼ºç‚¹æ˜¯èŒƒå¼ä»£ç è¾ƒå¤šï¼Œä¸”ä¼šé€ æˆ react dev tools å±‚çº§è¿‡å¤šï¼›Context æ— æ³•åœ¨çˆ¶ç»„ä»¶çœ‹å‡ºä¾èµ–å…³ç³»ï¼Œå¿…é¡»åˆ°å­ç»„ä»¶æ–‡ä»¶ä¸­æ‰èƒ½çŸ¥é“æ•°æ®æ¥æº</li>
</ol>
<h3 id="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>React å‡½æ•°ç»„ä»¶çš„æ‰§è¡Œé˜¶æ®µåˆ†ä¸ºï¼š</p>
<ol>
<li>Render é˜¶æ®µ</li>
</ol>
<p>æ­¤é˜¶æ®µå°±æ˜¯å‡½æ•°æœ¬ä½“çš„æ‰§è¡Œé˜¶æ®µ</p>
<ol>
<li>Commit é˜¶æ®µ</li>
</ol>
<p>Commit é˜¶æ®µæ˜¯æ‹¿ç€ render è¿”å›çš„ç»“æœï¼Œå»åŒæ­¥ DOM æ›´æ–°çš„é˜¶æ®µã€‚render å’Œ commit åˆ†å¼€ä»¥è¾¾åˆ°æ‰¹é‡æ›´æ–° DOM çš„ç›®çš„ï¼Œä¹Ÿæ˜¯ react ä¹‹åæ¨å‡ºå¹¶è¡Œæ¨¡å¼çš„è®¾è®¡åŸºç¡€ã€‚å¯¹äºæˆ‘ä»¬ä»£ç èƒ½æ„ŸçŸ¥åˆ°çš„éƒ¨åˆ†å°±æ˜¯ useLayoutEffect</p>
<ol>
<li>DOM æ›´æ–°ç»“æŸ</li>
</ol>
<p>æ­¤æ—¶ DOM å·²ç»æ›´æ–°å®Œæˆï¼Œä»£ç èƒ½æ„ŸçŸ¥åˆ°çš„éƒ¨åˆ† ä»£ç ä¸Šçš„ä½“ç°å°±æ˜¯æ‰§è¡Œ useEffect</p>
<h3 id="React-æ€§èƒ½ä¼˜åŒ–æ€è·¯"><a href="#React-æ€§èƒ½ä¼˜åŒ–æ€è·¯" class="headerlink" title="React æ€§èƒ½ä¼˜åŒ–æ€è·¯"></a>React æ€§èƒ½ä¼˜åŒ–æ€è·¯</h3><p>æˆ‘è§‰å¾—React æ€§èƒ½ä¼˜åŒ–çš„ç†å¿µçš„ä¸»è¦æ–¹å‘å°±æ˜¯è¿™ä¸¤ä¸ªï¼š</p>
<ol>
<li><strong>å‡å°‘é‡æ–° render çš„æ¬¡æ•°ã€‚å› ä¸ºåœ¨ React é‡Œæœ€é‡(èŠ±æ—¶é—´æœ€é•¿)çš„ä¸€å—å°±æ˜¯ reconciliation(ç®€å•çš„å¯ä»¥ç†è§£ä¸º diff)ï¼Œå¦‚æœä¸ renderï¼Œå°±ä¸ä¼š reconciliationã€‚</strong></li>
<li><strong>å‡å°‘è®¡ç®—çš„é‡ã€‚ä¸»è¦æ˜¯å‡å°‘é‡å¤è®¡ç®—ï¼Œå¯¹äºå‡½æ•°å¼ç»„ä»¶æ¥è¯´ï¼Œæ¯æ¬¡ render éƒ½ä¼šé‡æ–°ä»å¤´å¼€å§‹æ‰§è¡Œå‡½æ•°è°ƒç”¨ã€‚</strong></li>
</ol>
<p>åœ¨ä½¿ç”¨ç±»ç»„ä»¶çš„æ—¶å€™ï¼Œä½¿ç”¨çš„ React ä¼˜åŒ– API ä¸»è¦æ˜¯ï¼š<code>shouldComponentUpdate</code>å’Œ  <code>PureComponent</code>ï¼Œè¿™ä¸¤ä¸ª API æ‰€æä¾›çš„è§£å†³æ€è·¯éƒ½æ˜¯ä¸ºäº†<strong>å‡å°‘é‡æ–° render çš„æ¬¡æ•°</strong>ï¼Œä¸»è¦æ˜¯å‡å°‘çˆ¶ç»„ä»¶æ›´æ–°è€Œå­ç»„ä»¶ä¹Ÿæ›´æ–°çš„æƒ…å†µã€‚</p>
<p>ä½†æ˜¯åœ¨å‡½æ•°å¼ç»„ä»¶é‡Œé¢æ²¡æœ‰å£°æ˜å‘¨æœŸä¹Ÿæ²¡æœ‰ç±»ï¼Œé‚£å¦‚ä½•æ¥åšæ€§èƒ½ä¼˜åŒ–å‘¢ï¼Ÿ</p>
<p><strong>å…ˆåˆ†ä¸ªç±»ï¼Œç»„ä»¶ä»€ä¹ˆæ—¶å€™ä¼šé‡æ–°æ‰§è¡Œï¼Ÿ</strong></p>
<ol>
<li><strong>ç»„ä»¶è‡ªå·±çš„çŠ¶æ€æ”¹å˜</strong></li>
<li><strong>çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯çˆ¶ç»„ä»¶çš„ props æ²¡æœ‰æ”¹å˜</strong></li>
<li><strong>çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯çˆ¶ç»„ä»¶ä¼ é€’çš„ props æ”¹å˜</strong></li>
</ol>
<p>é’ˆå¯¹ç¬¬äºŒç‚¹ï¼Œåœ¨FCä¸­ï¼Œå¯ä»¥é€šè¿‡memoå‡å°‘rerender</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params">props</span>) &#123;</span><br><span class="line">   <span class="comment">/* ä½¿ç”¨ props æ¸²æŸ“ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyComponent</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Component</span>);</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ <code>React.memo</code> åŒ…è£¹çš„ç»„ä»¶åœ¨ props ä¸å˜çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¢«åŒ…è£¹çš„ç»„ä»¶æ˜¯ä¸ä¼šé‡æ–°æ¸²æŸ“çš„(ç›¸å½“äºPureComonent)</p>
<p>é»˜è®¤æƒ…å†µä¸‹å…¶åªä¼šå¯¹ props çš„å¤æ‚å¯¹è±¡åšæµ…å±‚å¯¹æ¯”(æµ…å±‚å¯¹æ¯”å°±æ˜¯åªä¼šå¯¹æ¯”å‰åä¸¤æ¬¡ props å¯¹è±¡å¼•ç”¨æ˜¯å¦ç›¸åŒï¼Œä¸ä¼šå¯¹æ¯”å¯¹è±¡é‡Œé¢çš„å†…å®¹æ˜¯å¦ç›¸åŒ)ï¼Œå¦‚æœä½ æƒ³è¦æ§åˆ¶å¯¹æ¯”è¿‡ç¨‹ï¼Œé‚£ä¹ˆè¯·å°†è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥æ¥å®ç°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="comment">/* ä½¿ç”¨ props æ¸²æŸ“ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">areEqual</span>(<span class="params">prevProps, nextProps</span>) &#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  å¦‚æœæŠŠ nextProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸</span></span><br><span class="line"><span class="comment">  å°† prevProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸€è‡´åˆ™è¿”å› trueï¼Œ</span></span><br><span class="line"><span class="comment">  å¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">MyComponent</span>, areEqual);</span><br></pre></td></tr></table></figure>

<h3 id="ç»„ä»¶æ€§èƒ½ä¼˜åŒ–"><a href="#ç»„ä»¶æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="ç»„ä»¶æ€§èƒ½ä¼˜åŒ–"></a>ç»„ä»¶æ€§èƒ½ä¼˜åŒ–</h3><p>React ç»„ä»¶æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯æ‡’è®¡ç®—çš„ï¼ˆç±»ä¼¼äº Thunk çš„æ¦‚å¿µï¼‰ã€‚å½“ä¸€ä¸ªèŠ‚ç‚¹ä¸éœ€è¦é‡æ–°è®¡ç®—ï¼ˆé‡ç»˜ï¼‰æ—¶ï¼Œä»–çš„å­æ ‘éƒ½ä¸ä¼šè®¡ç®—ï¼ˆé‡ç»˜ï¼‰ã€‚<strong>æ‰€ä»¥æˆ‘ä»¬åšæ€§èƒ½ä¼˜åŒ–çš„ç›®æ ‡ï¼Œå°±æ˜¯åœ¨å°½é‡ç¦»æ ¹èŠ‚ç‚¹è¿‘çš„ä½ç½®ï¼Œæ‹¦æˆªä¸å¿…è¦çš„èŠ‚ç‚¹é‡ç®—ï¼Œä»è€Œå‡å°‘é‡ç»˜çš„è®¡ç®—é‡ã€‚</strong></p>
<h5 id="React-memo"><a href="#React-memo" class="headerlink" title="React.memo"></a>React.memo</h5><p>é˜»æ­¢èŠ‚ç‚¹é‡ç»˜ä¸»è¦é€šè¿‡ React.memo æ–¹æ³•ç”Ÿæˆç‰¹æ®Šçš„ç»„ä»¶èŠ‚ç‚¹ã€‚å®ƒæ¥å—ä¸¤ä¸ªä¼ å‚ï¼š</p>
<ol>
<li><pre><code class="CSS">React.memo(Component, areEqual);
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">   </span><br><span class="line">   Component</span><br><span class="line"></span><br><span class="line">ç»„ä»¶</span><br><span class="line"></span><br><span class="line">1. areEqual</span><br><span class="line"></span><br><span class="line">æ¯”è¾ƒå‡½æ•°ï¼Œæ¯”è¾ƒå‡½æ•°çš„å…¥å‚æœ‰ä¸¤ä¸ªï¼Œarg0 ä¸º å‰ä¸€æ¬¡æ¸²æŸ“çš„ props, arg1 ä¸ºæœ¬æ¬¡æ¸²æŸ“çš„ propsã€‚å¦‚æœè¿”å› trueï¼Œåˆ™è¯¥èŠ‚ç‚¹æœ¬æ¬¡æ¸²æŸ“å°†è¢«æ ‡è®°ä¸ºæ— éœ€é‡æ–°è®¡ç®—ï¼Œä»è€Œä½¿å…¶æ‰€æœ‰å­èŠ‚ç‚¹ã€å­™å­èŠ‚ç‚¹éƒ½æ— éœ€è®¡ç®—ã€‚</span><br><span class="line"></span><br><span class="line">areEqual å¦‚æœä¸ä¼ ï¼Œé»˜è®¤ä½¿ç”¨ </span><br><span class="line"></span><br><span class="line">```Lisp</span><br><span class="line">(prevProps, nextProps) =&gt; shallowEqual(prevProps, nextProps)</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ol>
<p>åšä¸ºæ¯”è¾ƒå‡½æ•°ã€‚</p>
<h5 id="å¦‚ä½•å®šä½ä¼˜åŒ–ç‚¹"><a href="#å¦‚ä½•å®šä½ä¼˜åŒ–ç‚¹" class="headerlink" title="å¦‚ä½•å®šä½ä¼˜åŒ–ç‚¹"></a>å¦‚ä½•å®šä½ä¼˜åŒ–ç‚¹</h5><p>ä½¿ç”¨å‰ä¸€ç« èŠ‚æåˆ° React DevTools ä¸­çš„ Profiling åŠŸèƒ½ï¼Œrecord å‘ç”Ÿå¡é¡¿çš„æ“ä½œï¼Œä»è€—æ—¶é•¿çš„ç»„ä»¶é€ä¸ªæŸ¥çœ‹ï¼Œæ‰¾åˆ°é‚£äº›è·Ÿæ­¤æ¬¡æ“ä½œæ— å…³çš„ä¸Šå±‚æ¸²æŸ“èŠ‚ç‚¹ï¼Œå°è¯•ä½¿ç”¨ React.memo åŒ…è£¹è¿™äº›ç»„ä»¶ã€‚</p>
<h5 id="ä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–"><a href="#ä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–" class="headerlink" title="ä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–"></a>ä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–</h5><p>åœ¨æ²¡æœ‰æ€§èƒ½é—®é¢˜å‰ï¼Œä¸ç”¨å»çº ç»“æ˜¯å¦è¦ç”¨ Profilingã€React.memoã€useMemoã€useCallback å»ä¼˜åŒ–æ€§èƒ½ï¼Œè¿™äº›ä¸ä¸€å®šèƒ½å¸¦æ¥æ€§èƒ½æå‡ï¼Œåè€Œè‚¯å®šä¼šå¸¦æ¥é¦–å±çš„æ€§èƒ½ä¸‹é™ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒReact ç°æœ‰ç®—æ³•ä»¥èƒ½æ»¡è¶³æ€§èƒ½éœ€æ±‚ã€‚</p>
<h5 id="å¯¹äºä¸€ä¸ªç»„ä»¶ï¼Œæœ‰ä¸‰æ ·ä¸œè¥¿ä¼šè®©å¥¹é‡ç»˜"><a href="#å¯¹äºä¸€ä¸ªç»„ä»¶ï¼Œæœ‰ä¸‰æ ·ä¸œè¥¿ä¼šè®©å¥¹é‡ç»˜" class="headerlink" title="å¯¹äºä¸€ä¸ªç»„ä»¶ï¼Œæœ‰ä¸‰æ ·ä¸œè¥¿ä¼šè®©å¥¹é‡ç»˜"></a>å¯¹äºä¸€ä¸ªç»„ä»¶ï¼Œæœ‰ä¸‰æ ·ä¸œè¥¿ä¼šè®©å¥¹é‡ç»˜</h5><ol>
<li>State å˜æ›´</li>
<li>ä¾èµ–çš„ context å˜æ›´</li>
<li>çˆ¶ç»„ä»¶é‡ç»˜</li>
</ol>
<p>æ‰€ä»¥ç”¨ React.memo åŒ…è£¹ä¹‹åï¼Œå¹¶ä¸æ˜¯è¯´æ€§èƒ½å°±ä¼šæœ‰å¤šå¤§çš„æé«˜ã€‚å¦‚æœç»„ä»¶ä¸­ä¾èµ–çš„ context ä¸­ï¼Œæœ‰ä¸€éƒ¨åˆ†å¹¶ä¸æ˜¯æ­¤ç»„ä»¶éœ€è¦çš„æ•°æ®ï¼Œä½†ä¼šç»å¸¸å˜æ›´ï¼Œä¹Ÿä¼šå¯¼è‡´ç»„ä»¶ç»å¸¸é‡ç»˜ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å¢åŠ ä¸€å±‚ç»„ä»¶ï¼ŒæŠŠä¾èµ– context ä¸­çš„æ•°æ®ï¼Œé€šè¿‡å¢åŠ çš„ä¸€å±‚çˆ¶ç»„ä»¶å–å‡ºæ¥ï¼Œç„¶åé€šè¿‡ props ä¼ ç»™çœŸæ­£æ¸²æŸ“çš„ç»„ä»¶ï¼ŒæŠŠ React.memo åŠ åœ¨çœŸæ­£æ¸²æŸ“çš„ç»„ä»¶ä¸Šï¼Œæ¥è¾¾åˆ°å±è”½ context å˜æ›´å¼•èµ·çš„é‡ç»˜é—®é¢˜ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useMemo, useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">SomeContext</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./SomeContext&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">PickContextData</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> ctx = <span class="title function_">useContext</span>(<span class="title class_">SomeContext</span>);</span><br><span class="line">  <span class="keyword">const</span> someDataFromContext = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ctx.<span class="property">data</span>;</span><br><span class="line">  &#125;, [ctx.<span class="property">data</span>]);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">RenderComponent</span> <span class="attr">data</span>=<span class="string">&#123;someDataFromContext&#125;</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">RenderComponent</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ç•¥</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>æ›´é€šç”¨ç‚¹ï¼Œå¯ä»¥å°è£…å‡º react-redux çš„ connect å‡½æ•°ï¼Œä¼ å…¥ selector æ¥å–æ‰€éœ€çš„ Context æ•°æ®ã€‚</p>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Hooks</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>Http2/Http3</title>
    <url>/2021/09/18/Http2Http3/</url>
    <content><![CDATA[<h4 id="ä¸ºä»€ä¹ˆHttp-1-1æ— æ³•å¹¶å‘çš„å‘é€å¤šä¸ªè¯·æ±‚ï¼ˆåŒæ—¶å‘å¤šä¸ªè¯·æ±‚ï¼Œå†åŒæ—¶æ¥æ”¶ï¼‰"><a href="#ä¸ºä»€ä¹ˆHttp-1-1æ— æ³•å¹¶å‘çš„å‘é€å¤šä¸ªè¯·æ±‚ï¼ˆåŒæ—¶å‘å¤šä¸ªè¯·æ±‚ï¼Œå†åŒæ—¶æ¥æ”¶ï¼‰" class="headerlink" title="ä¸ºä»€ä¹ˆHttp 1.1æ— æ³•å¹¶å‘çš„å‘é€å¤šä¸ªè¯·æ±‚ï¼ˆåŒæ—¶å‘å¤šä¸ªè¯·æ±‚ï¼Œå†åŒæ—¶æ¥æ”¶ï¼‰"></a>ä¸ºä»€ä¹ˆHttp 1.1æ— æ³•å¹¶å‘çš„å‘é€å¤šä¸ªè¯·æ±‚ï¼ˆåŒæ—¶å‘å¤šä¸ªè¯·æ±‚ï¼Œå†åŒæ—¶æ¥æ”¶ï¼‰</h4><p>å› ä¸ºhttp1.1æ˜¯åŸºäºæ–‡æœ¬çš„åè®®ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€äº†ä¸¤ä¸ªè¯·æ±‚ <code>GET /query?q=A</code> å’Œ <code>GET /query?q=B</code>ï¼ŒæœåŠ¡å™¨è¿”å›äº†ä¸¤ä¸ªç»“æœï¼Œå®¢æˆ·ç«¯æ˜¯æ²¡æœ‰åŠæ³•æ ¹æ®å“åº”ç»“æœæ¥åˆ¤æ–­å“åº”å¯¹åº”äºå“ªä¸€ä¸ªè¯·æ±‚çš„ï¼Œè€Œhttp2åŸºäºäºŒè¿›åˆ¶åˆ†å¸§å®ç°å¤šè·¯å¤ç”¨ï¼Œæ•°æ®æµä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œè€Œæ¶ˆæ¯åˆç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¸§ç»„æˆï¼Œå¤šä¸ªå¸§ä¹‹é—´å¯ä»¥ä¹±åºå‘é€ï¼Œ<strong>å› ä¸ºæ ¹æ®å¸§é¦–éƒ¨çš„æµæ ‡è¯†å¯ä»¥é‡æ–°ç»„è£…ã€‚</strong></p>
<span id="more"></span>





]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œåè®®</category>
      </categories>
      <tags>
        <tag>Network</tag>
        <tag>Http</tag>
        <tag>Https</tag>
      </tags>
  </entry>
  <entry>
    <title>Https</title>
    <url>/2021/09/13/Https/</url>
    <content><![CDATA[<h3 id="ä¸ºä»€ä¹ˆéœ€è¦åŠ å¯†ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦åŠ å¯†ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦åŠ å¯†ï¼Ÿ"></a><strong>ä¸ºä»€ä¹ˆéœ€è¦åŠ å¯†ï¼Ÿ</strong></h3><p>å› ä¸ºhttpçš„å†…å®¹æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œæ˜æ–‡æ•°æ®ä¼šç»è¿‡ä¸­é—´ä»£ç†æœåŠ¡å™¨ã€è·¯ç”±å™¨ã€wifiçƒ­ç‚¹ã€é€šä¿¡æœåŠ¡è¿è¥å•†ç­‰å¤šä¸ªç‰©ç†èŠ‚ç‚¹ï¼Œå¦‚æœä¿¡æ¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«åŠ«æŒï¼Œä¼ è¾“çš„å†…å®¹å°±å®Œå…¨æš´éœ²äº†ã€‚åŠ«æŒè€…è¿˜å¯ä»¥ç¯¡æ”¹ä¼ è¾“çš„ä¿¡æ¯ä¸”ä¸è¢«åŒæ–¹å¯Ÿè§‰ï¼Œè¿™å°±æ˜¯â€œä¸­é—´äººæ”»å‡»â€ã€‚</p>
<h3 id="ç”¨å¯¹ç§°åŠ å¯†å¯è¡Œå—ï¼Ÿ"><a href="#ç”¨å¯¹ç§°åŠ å¯†å¯è¡Œå—ï¼Ÿ" class="headerlink" title="ç”¨å¯¹ç§°åŠ å¯†å¯è¡Œå—ï¼Ÿ"></a><strong>ç”¨å¯¹ç§°åŠ å¯†å¯è¡Œå—ï¼Ÿ</strong></h3><p>å¯¹ç§°åŠ å¯†æœ€å¤§çš„é—®é¢˜å°±æ˜¯å¯†é’¥çš„ä¼ è¾“ï¼Œè€Œå¯†é’¥çš„ä¼ è¾“åˆéœ€è¦åŠ å¯†ï¼ˆåå¤å¥—å¨ƒï¼‰ï¼Œæ•…è€Œå•çº¯çš„å¯¹ç§°åŠ å¯†æ˜¯æ— æ³•è§£å†³é—®é¢˜çš„ã€‚</p>
<span id="more"></span>


<h3 id="ç”¨éå¯¹ç§°åŠ å¯†å¯è¡Œå—ï¼Ÿ"><a href="#ç”¨éå¯¹ç§°åŠ å¯†å¯è¡Œå—ï¼Ÿ" class="headerlink" title="ç”¨éå¯¹ç§°åŠ å¯†å¯è¡Œå—ï¼Ÿ"></a>ç”¨éå¯¹ç§°åŠ å¯†å¯è¡Œå—ï¼Ÿ</h3><p>é‰´äºéå¯¹ç§°åŠ å¯†çš„æœºåˆ¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰è¿™ç§æ€è·¯ï¼šæœåŠ¡å™¨å…ˆæŠŠå…¬é’¥ä»¥æ˜æ–‡æ–¹å¼ä¼ è¾“ç»™æµè§ˆå™¨ï¼Œä¹‹åæµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ æ•°æ®å‰éƒ½å…ˆç”¨è¿™ä¸ªå…¬é’¥åŠ å¯†å¥½å†ä¼ ï¼Œè¿™æ¡æ•°æ®çš„å®‰å…¨ä¼¼ä¹å¯ä»¥ä¿éšœäº†ï¼<strong>å› ä¸ºåªæœ‰æœåŠ¡å™¨æœ‰ç›¸åº”çš„ç§é’¥èƒ½è§£å¼€å…¬é’¥åŠ å¯†çš„æ•°æ®</strong>ã€‚</p>
<p>ç„¶è€Œåè¿‡æ¥<strong>ç”±æœåŠ¡å™¨åˆ°æµè§ˆå™¨çš„è¿™æ¡è·¯æ€ä¹ˆä¿éšœå®‰å…¨ï¼Ÿ</strong>å¦‚æœæœåŠ¡å™¨ç”¨å®ƒçš„ç§é’¥åŠ å¯†æ•°æ®ä¼ ç»™æµè§ˆå™¨ï¼Œé‚£ä¹ˆæµè§ˆå™¨ç”¨å…¬é’¥å¯ä»¥è§£å¯†å®ƒï¼Œè€Œè¿™ä¸ªå…¬é’¥æ˜¯ä¸€å¼€å§‹é€šè¿‡æ˜æ–‡ä¼ è¾“ç»™æµè§ˆå™¨çš„ï¼Œè‹¥è¿™ä¸ªå…¬é’¥è¢«ä¸­é—´äººåŠ«æŒåˆ°äº†ï¼Œé‚£ä»–ä¹Ÿèƒ½ç”¨è¯¥å…¬é’¥è§£å¯†æœåŠ¡å™¨ä¼ æ¥çš„ä¿¡æ¯äº†ã€‚æ‰€ä»¥<strong>ç›®å‰ä¼¼ä¹åªèƒ½ä¿è¯ç”±æµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ è¾“æ•°æ®çš„å®‰å…¨æ€§</strong></p>
<h3 id="é‚£ç”¨ä¸¤ç»„å…¬é’¥ç§é’¥ï¼Œæ˜¯å¦å°±èƒ½ä¿è¯åŒå‘ä¼ è¾“éƒ½å®‰å…¨äº†ï¼Ÿ"><a href="#é‚£ç”¨ä¸¤ç»„å…¬é’¥ç§é’¥ï¼Œæ˜¯å¦å°±èƒ½ä¿è¯åŒå‘ä¼ è¾“éƒ½å®‰å…¨äº†ï¼Ÿ" class="headerlink" title="é‚£ç”¨ä¸¤ç»„å…¬é’¥ç§é’¥ï¼Œæ˜¯å¦å°±èƒ½ä¿è¯åŒå‘ä¼ è¾“éƒ½å®‰å…¨äº†ï¼Ÿ"></a>é‚£ç”¨ä¸¤ç»„å…¬é’¥ç§é’¥ï¼Œæ˜¯å¦å°±èƒ½ä¿è¯åŒå‘ä¼ è¾“éƒ½å®‰å…¨äº†ï¼Ÿ</h3><ol>
<li>æŸç½‘ç«™æœåŠ¡å™¨æ‹¥æœ‰å…¬é’¥Aä¸å¯¹åº”çš„ç§é’¥Aâ€™ï¼›æµè§ˆå™¨æ‹¥æœ‰å…¬é’¥Bä¸å¯¹åº”çš„ç§é’¥Bâ€™ã€‚</li>
<li>æµè§ˆå™¨æŠŠå…¬é’¥Bæ˜æ–‡ä¼ è¾“ç»™æœåŠ¡å™¨ã€‚</li>
<li>æœåŠ¡å™¨æŠŠå…¬é’¥Aæ˜æ–‡ç»™ä¼ è¾“æµè§ˆå™¨ã€‚</li>
<li>ä¹‹åæµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ è¾“çš„å†…å®¹éƒ½ç”¨å…¬é’¥AåŠ å¯†ï¼ŒæœåŠ¡å™¨æ”¶åˆ°åç”¨ç§é’¥Aâ€™è§£å¯†ã€‚ç”±äºåªæœ‰æœåŠ¡å™¨æ‹¥æœ‰ç§é’¥Aâ€™ï¼Œæ‰€ä»¥èƒ½ä¿è¯è¿™æ¡æ•°æ®çš„å®‰å…¨ã€‚</li>
<li>åŒç†ï¼ŒæœåŠ¡å™¨å‘æµè§ˆå™¨ä¼ è¾“çš„å†…å®¹éƒ½ç”¨å…¬é’¥BåŠ å¯†ï¼Œæµè§ˆå™¨æ”¶åˆ°åç”¨ç§é’¥Bâ€™è§£å¯†ã€‚åŒä¸Šä¹Ÿå¯ä»¥ä¿è¯è¿™æ¡æ•°æ®çš„å®‰å…¨ã€‚</li>
</ol>
<p>ç„¶è€Œè¿™åˆå¼•å‡ºäº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œéå¯¹ç§°åŠ å¯†éå¸¸è€—æ—¶ï¼Œå¦‚ä½•è§£å†³ï¼Ÿï¼ˆè§RSAç®—æ³•ï¼‰è€Œä¸”è¿™ç§æ–¹æ³•çœŸçš„å®‰å…¨äº†å—ï¼Ÿ</p>
<h3 id="éå¯¹ç§°åŠ å¯†-å¯¹ç§°åŠ å¯†"><a href="#éå¯¹ç§°åŠ å¯†-å¯¹ç§°åŠ å¯†" class="headerlink" title="éå¯¹ç§°åŠ å¯† + å¯¹ç§°åŠ å¯†"></a>éå¯¹ç§°åŠ å¯† + å¯¹ç§°åŠ å¯†</h3><ol>
<li>æŸç½‘ç«™æ‹¥æœ‰ç”¨äºéå¯¹ç§°åŠ å¯†çš„å…¬é’¥Aã€ç§é’¥Aâ€™ã€‚</li>
<li>æµè§ˆå™¨å‘ç½‘ç«™æœåŠ¡å™¨è¯·æ±‚ï¼ŒæœåŠ¡å™¨æŠŠå…¬é’¥Aæ˜æ–‡ç»™ä¼ è¾“æµè§ˆå™¨ã€‚</li>
<li>æµè§ˆå™¨éšæœºç”Ÿæˆä¸€ä¸ªç”¨äºå¯¹ç§°åŠ å¯†çš„å¯†é’¥Xï¼Œç”¨å…¬é’¥AåŠ å¯†åä¼ ç»™æœåŠ¡å™¨ã€‚</li>
<li>æœåŠ¡å™¨æ‹¿åˆ°åç”¨ç§é’¥Aâ€™è§£å¯†å¾—åˆ°å¯†é’¥Xã€‚</li>
<li>è¿™æ ·åŒæ–¹å°±éƒ½æ‹¥æœ‰å¯†é’¥Xäº†ï¼Œä¸”åˆ«äººæ— æ³•çŸ¥é“å®ƒã€‚ä¹‹ååŒæ–¹æ‰€æœ‰æ•°æ®éƒ½é€šè¿‡å¯†é’¥XåŠ å¯†è§£å¯†å³å¯ã€‚</li>
</ol>
<p>è¿™åŸºæœ¬ä¸Šå°±æ˜¯httpsé‡‡ç”¨çš„æ–¹æ¡ˆäº†ï¼Œä½†ä»ç„¶è¿˜æ˜¯æœ‰æ¼æ´ã€‚</p>
<h3 id="ä¸­é—´äººæ”»å‡»"><a href="#ä¸­é—´äººæ”»å‡»" class="headerlink" title="ä¸­é—´äººæ”»å‡»"></a>ä¸­é—´äººæ”»å‡»</h3><p>ä¸­é—´äººæ”»å‡»ï¼ˆMITMAï¼Œman in the middle attackï¼‰<br>ä¸­é—´äººæ”»å‡»æ˜¯ä¸€ç§ç½‘ç»œæ”»å‡»ç±»å‹ ï¼Œåº”ç”¨ä¸LANå±€åŸŸç½‘ä¸­ã€‚è¿™ç§æ”»å‡»çš„æ–¹å¼æ˜¯ hacker ç½®èº«äºä¸¤ä¸ªé€šä¿¡ paties ä¹‹é—´ï¼Œçªƒå–æ•°æ®ã€‚</p>
<p>ä¸­é—´äººæ”»å‡»å…è®¸é»‘å®¢æˆªè·åŒæ–¹ä¹‹é—´çš„æ•°æ®ï¼Œå®ƒå¯èƒ½æ˜¯æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æˆ–å®¢æˆ·ç«¯åˆ°å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨åˆ°æœåŠ¡å™¨ã€‚</p>
<p><img src="/../assets/image-20210513212400962.png" alt="image-20210513212400962"></p>
<p>å¦‚æœåœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä¸­é—´äººåŠ«æŒåˆ°äº†æ•°æ®ï¼Œæ­¤æ—¶ä»–çš„ç¡®æ— æ³•å¾—åˆ°æµè§ˆå™¨ç”Ÿæˆçš„å¯†é’¥Xï¼Œè¿™ä¸ªå¯†é’¥æœ¬èº«è¢«å…¬é’¥AåŠ å¯†äº†ï¼Œåªæœ‰æœåŠ¡å™¨æ‰æœ‰ç§é’¥Aâ€™è§£å¼€å®ƒï¼Œç„¶è€Œä¸­é—´äººå´å®Œå…¨ä¸éœ€è¦æ‹¿åˆ°ç§é’¥Aâ€™å°±èƒ½å¹²åäº‹äº†ã€‚è¯·çœ‹ï¼š</p>
<ol>
<li>æŸç½‘ç«™æœ‰ç”¨äºéå¯¹ç§°åŠ å¯†çš„å…¬é’¥Aã€ç§é’¥Aâ€™ã€‚</li>
<li>æµè§ˆå™¨å‘ç½‘ç«™æœåŠ¡å™¨è¯·æ±‚ï¼ŒæœåŠ¡å™¨æŠŠå…¬é’¥Aæ˜æ–‡ç»™ä¼ è¾“æµè§ˆå™¨ã€‚</li>
<li><strong>ä¸­é—´äººåŠ«æŒåˆ°å…¬é’¥Aï¼Œä¿å­˜ä¸‹æ¥ï¼ŒæŠŠæ•°æ®åŒ…ä¸­çš„å…¬é’¥Aæ›¿æ¢æˆè‡ªå·±ä¼ªé€ çš„å…¬é’¥Bï¼ˆå®ƒå½“ç„¶ä¹Ÿæ‹¥æœ‰å…¬é’¥Bå¯¹åº”çš„ç§é’¥Bâ€™ï¼‰</strong>ã€‚</li>
<li>æµè§ˆå™¨ç”Ÿæˆä¸€ä¸ªç”¨äºå¯¹ç§°åŠ å¯†çš„å¯†é’¥Xï¼Œç”¨<strong>å…¬é’¥B</strong>ï¼ˆæµè§ˆå™¨æ— æ³•å¾—çŸ¥å…¬é’¥è¢«æ›¿æ¢äº†ï¼‰åŠ å¯†åä¼ ç»™æœåŠ¡å™¨ã€‚</li>
<li><strong>ä¸­é—´äººåŠ«æŒåç”¨ç§é’¥Bâ€™è§£å¯†å¾—åˆ°å¯†é’¥Xï¼Œå†ç”¨å…¬é’¥AåŠ å¯†åä¼ ç»™æœåŠ¡å™¨</strong>ã€‚</li>
<li>æœåŠ¡å™¨æ‹¿åˆ°åç”¨ç§é’¥Aâ€™è§£å¯†å¾—åˆ°å¯†é’¥Xã€‚</li>
</ol>
<p>è¿™æ ·åœ¨åŒæ–¹éƒ½ä¸ä¼šå‘ç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œä¸­é—´äººæ‰åŒ…äº†æœåŠ¡å™¨ä¼ æ¥çš„å…¬é’¥ï¼Œè¿›è€Œå¾—åˆ°äº†å¯†é’¥Xã€‚<strong>æ ¹æœ¬åŸå› æ˜¯æµè§ˆå™¨æ— æ³•ç¡®è®¤æ”¶åˆ°çš„å…¬é’¥æ˜¯ä¸æ˜¯ç½‘ç«™è‡ªå·±çš„ï¼Œ</strong>å› ä¸ºå…¬é’¥æœ¬èº«æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œéš¾é“è¿˜å¾—å¯¹å…¬é’¥çš„ä¼ è¾“è¿›è¡ŒåŠ å¯†ï¼Ÿè¿™ä¼¼ä¹å˜æˆé¸¡ç”Ÿè›‹ã€è›‹ç”Ÿé¸¡çš„é—®é¢˜äº†ã€‚è§£æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 id="å¦‚ä½•è¯æ˜æµè§ˆå™¨æ”¶åˆ°çš„å…¬é’¥ä¸€å®šæ˜¯è¯¥ç½‘ç«™çš„å…¬é’¥ï¼Ÿ"><a href="#å¦‚ä½•è¯æ˜æµè§ˆå™¨æ”¶åˆ°çš„å…¬é’¥ä¸€å®šæ˜¯è¯¥ç½‘ç«™çš„å…¬é’¥ï¼Ÿ" class="headerlink" title="å¦‚ä½•è¯æ˜æµè§ˆå™¨æ”¶åˆ°çš„å…¬é’¥ä¸€å®šæ˜¯è¯¥ç½‘ç«™çš„å…¬é’¥ï¼Ÿ"></a><strong>å¦‚ä½•è¯æ˜æµè§ˆå™¨æ”¶åˆ°çš„å…¬é’¥ä¸€å®šæ˜¯è¯¥ç½‘ç«™çš„å…¬é’¥ï¼Ÿ</strong></h3><p>ç½‘ç«™æ˜¯å¦æœ‰ä¸ªâ€˜èº«ä»½è¯â€™æ¥è¯æ˜è‡ªå·±çš„å…¬é’¥åˆæ³•ï¼Ÿè¿™ä¸ªâ€˜èº«ä»½è¯â€™åˆç”±è°æ¥é¢å‘ï¼Ÿ</p>
<p><strong>CAæœºæ„</strong>ï¼Œå®ƒæ˜¯å¦‚ä»Šäº’è”ç½‘ä¸–ç•Œæ­£å¸¸è¿ä½œçš„å‰æï¼Œè€ŒCAæœºæ„é¢å‘çš„â€œèº«ä»½è¯â€å°±æ˜¯<strong>æ•°å­—è¯ä¹¦</strong>ã€‚</p>
<h4 id="æ•°å­—è¯ä¹¦"><a href="#æ•°å­—è¯ä¹¦" class="headerlink" title="æ•°å­—è¯ä¹¦"></a><strong>æ•°å­—è¯ä¹¦</strong></h4><p>ç½‘ç«™åœ¨ä½¿ç”¨HTTPSå‰ï¼Œéœ€è¦å‘<strong>CAæœºæ„</strong>ç”³é¢†ä¸€ä»½<strong>æ•°å­—è¯ä¹¦</strong>ï¼Œæ•°å­—è¯ä¹¦é‡Œå«æœ‰è¯ä¹¦æŒæœ‰è€…ä¿¡æ¯ã€å…¬é’¥ä¿¡æ¯ç­‰ã€‚æœåŠ¡å™¨æŠŠè¯ä¹¦ä¼ è¾“ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä»è¯ä¹¦é‡Œè·å–å…¬é’¥å°±è¡Œäº†ï¼Œè¯ä¹¦å°±å¦‚èº«ä»½è¯ï¼Œè¯æ˜â€œè¯¥å…¬é’¥å¯¹åº”è¯¥ç½‘ç«™â€ã€‚</p>
<p>è€Œè¿™é‡Œåˆæœ‰ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„é—®é¢˜ï¼Œâ€œ<strong>è¯ä¹¦æœ¬èº«çš„ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•é˜²æ­¢è¢«ç¯¡æ”¹â€</strong>ï¼Ÿå³å¦‚ä½•è¯æ˜è¯ä¹¦æœ¬èº«çš„çœŸå®æ€§ï¼Ÿèº«ä»½è¯è¿ç”¨äº†ä¸€äº›é˜²ä¼ªæŠ€æœ¯ï¼Œè€Œæ•°å­—è¯ä¹¦æ€ä¹ˆé˜²ä¼ªå‘¢ï¼Ÿ</p>
<h3 id="å¦‚ä½•æ”¾é˜²æ­¢æ•°å­—è¯ä¹¦è¢«ç¯¡æ”¹ï¼Ÿ"><a href="#å¦‚ä½•æ”¾é˜²æ­¢æ•°å­—è¯ä¹¦è¢«ç¯¡æ”¹ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ”¾é˜²æ­¢æ•°å­—è¯ä¹¦è¢«ç¯¡æ”¹ï¼Ÿ"></a><strong>å¦‚ä½•æ”¾é˜²æ­¢æ•°å­—è¯ä¹¦è¢«ç¯¡æ”¹ï¼Ÿ</strong></h3><p>æˆ‘ä»¬æŠŠè¯ä¹¦åŸæœ¬çš„å†…å®¹ç”Ÿæˆä¸€ä»½â€œç­¾åâ€ï¼Œæ¯”å¯¹è¯ä¹¦å†…å®¹å’Œç­¾åæ˜¯å¦ä¸€è‡´å°±èƒ½åˆ¤åˆ«æ˜¯å¦è¢«ç¯¡æ”¹ã€‚è¿™å°±æ˜¯æ•°å­—è¯ä¹¦çš„â€œé˜²ä¼ªæŠ€æœ¯â€ï¼Œè¿™é‡Œçš„â€œç­¾åâ€å°±å«<code>æ•°å­—ç­¾å</code>ï¼š</p>
<p>æ•°å­—ç­¾åçš„åˆ¶ä½œè¿‡ç¨‹ï¼š</p>
<ol>
<li>CAæœºæ„æ‹¥æœ‰éå¯¹ç§°åŠ å¯†çš„ç§é’¥å’Œå…¬é’¥ã€‚</li>
<li>CAæœºæ„å¯¹è¯ä¹¦æ˜æ–‡æ•°æ®Tè¿›è¡Œhashã€‚</li>
<li>å¯¹hashåçš„å€¼ç”¨ç§é’¥åŠ å¯†ï¼Œå¾—åˆ°æ•°å­—ç­¾åSã€‚</li>
</ol>
<p>æ˜æ–‡å’Œæ•°å­—ç­¾åå…±åŒç»„æˆäº†æ•°å­—è¯ä¹¦ï¼Œè¿™æ ·ä¸€ä»½æ•°å­—è¯ä¹¦å°±å¯ä»¥é¢å‘ç»™ç½‘ç«™äº†ã€‚<br>é‚£æµè§ˆå™¨æ‹¿åˆ°æœåŠ¡å™¨ä¼ æ¥çš„æ•°å­—è¯ä¹¦åï¼Œå¦‚ä½•éªŒè¯å®ƒæ˜¯ä¸æ˜¯çœŸçš„ï¼Ÿï¼ˆæœ‰æ²¡æœ‰è¢«ç¯¡æ”¹ã€æ‰åŒ…ï¼‰</p>
<p>æµè§ˆå™¨éªŒè¯è¿‡ç¨‹ï¼š</p>
<ol>
<li>æ‹¿åˆ°è¯ä¹¦ï¼Œå¾—åˆ°æ˜æ–‡Tï¼Œç­¾åSã€‚</li>
<li>ç”¨CAæœºæ„çš„å…¬é’¥å¯¹Sè§£å¯†ï¼ˆç”±äºæ˜¯æµè§ˆå™¨ä¿¡ä»»çš„æœºæ„ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¿æœ‰å®ƒçš„å…¬é’¥ã€‚è¯¦æƒ…è§ä¸‹æ–‡ï¼‰ï¼Œå¾—åˆ°Sâ€™ã€‚</li>
<li>ç”¨è¯ä¹¦é‡ŒæŒ‡æ˜çš„hashç®—æ³•å¯¹æ˜æ–‡Tè¿›è¡Œhashå¾—åˆ°Tâ€™ã€‚</li>
<li>æ˜¾ç„¶é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼ŒTâ€™åº”å½“ç­‰äºSâ€˜ï¼Œé™¤éæ˜æ–‡æˆ–ç­¾åè¢«ç¯¡æ”¹ã€‚æ‰€ä»¥æ­¤æ—¶æ¯”è¾ƒSâ€™æ˜¯å¦ç­‰äºTâ€™ï¼Œç­‰äºåˆ™è¡¨æ˜è¯ä¹¦å¯ä¿¡ã€‚</li>
</ol>
<p><img src="/../assets/image-20210513214044731.png" alt="image-20210513214044731"></p>
<h3 id="ä¸­é—´äººæœ‰å¯èƒ½ç¯¡æ”¹è¯¥è¯ä¹¦å—ï¼Ÿ"><a href="#ä¸­é—´äººæœ‰å¯èƒ½ç¯¡æ”¹è¯¥è¯ä¹¦å—ï¼Ÿ" class="headerlink" title="ä¸­é—´äººæœ‰å¯èƒ½ç¯¡æ”¹è¯¥è¯ä¹¦å—ï¼Ÿ"></a><strong>ä¸­é—´äººæœ‰å¯èƒ½ç¯¡æ”¹è¯¥è¯ä¹¦å—ï¼Ÿ</strong></h3><p>å‡è®¾ä¸­é—´äººç¯¡æ”¹äº†è¯ä¹¦çš„åŸæ–‡ï¼Œç”±äºä»–æ²¡æœ‰CAæœºæ„çš„ç§é’¥ï¼Œæ‰€ä»¥æ— æ³•å¾—åˆ°æ­¤æ—¶åŠ å¯†åç­¾åï¼Œæ— æ³•ç›¸åº”åœ°ç¯¡æ”¹ç­¾åã€‚æµè§ˆå™¨æ”¶åˆ°è¯¥è¯ä¹¦åä¼šå‘ç°åŸæ–‡å’Œç­¾åè§£å¯†åçš„å€¼ä¸ä¸€è‡´ï¼Œåˆ™è¯´æ˜è¯ä¹¦å·²è¢«ç¯¡æ”¹ï¼Œè¯ä¹¦ä¸å¯ä¿¡</p>
<h3 id="ä¸­é—´äººæœ‰å¯èƒ½æŠŠè¯ä¹¦æ‰åŒ…å—ï¼Ÿ"><a href="#ä¸­é—´äººæœ‰å¯èƒ½æŠŠè¯ä¹¦æ‰åŒ…å—ï¼Ÿ" class="headerlink" title="ä¸­é—´äººæœ‰å¯èƒ½æŠŠè¯ä¹¦æ‰åŒ…å—ï¼Ÿ"></a><strong>ä¸­é—´äººæœ‰å¯èƒ½æŠŠè¯ä¹¦æ‰åŒ…å—ï¼Ÿ</strong></h3><p>å‡è®¾æœ‰å¦ä¸€ä¸ªç½‘ç«™Bä¹Ÿæ‹¿åˆ°äº†CAæœºæ„è®¤è¯çš„è¯ä¹¦ï¼Œå®ƒæƒ³åŠ«æŒç½‘ç«™Açš„ä¿¡æ¯ã€‚äºæ˜¯å®ƒæˆä¸ºä¸­é—´äººæ‹¦æˆªåˆ°äº†Aä¼ ç»™æµè§ˆå™¨çš„è¯ä¹¦ï¼Œç„¶åæ›¿æ¢æˆè‡ªå·±çš„è¯ä¹¦ï¼Œä¼ ç»™æµè§ˆå™¨ï¼Œä¹‹åæµè§ˆå™¨å°±ä¼šé”™è¯¯åœ°æ‹¿åˆ°Bçš„è¯ä¹¦é‡Œçš„å…¬é’¥äº†ã€‚</p>
<p>å…¶å®è¿™å¹¶ä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºè¯ä¹¦ä¸€å®šæ˜¯æ— æ³•è¢«ç¯¡æ”¹çš„ï¼Œæ‰€ä»¥ç½‘ç«™Bæ‰åŒ…çš„ä¸€å®šä¹Ÿæ˜¯æ­£è§„çš„è¯ä¹¦ï¼Œè€Œè¯ä¹¦é»é‡ŒåŒ…å«äº†ç½‘ç«™çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸŸåï¼Œæµè§ˆå™¨æŠŠè¯ä¹¦é‡Œçš„åŸŸåä¸è‡ªå·±è¯·æ±‚çš„åŸŸåæ¯”å¯¹ä¸€ä¸‹å°±çŸ¥é“æœ‰æ²¡æœ‰è¢«æ‰åŒ…äº†ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆåˆ¶ä½œæ•°å­—ç­¾åæ—¶éœ€è¦hashä¸€æ¬¡ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆåˆ¶ä½œæ•°å­—ç­¾åæ—¶éœ€è¦hashä¸€æ¬¡ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆåˆ¶ä½œæ•°å­—ç­¾åæ—¶éœ€è¦hashä¸€æ¬¡ï¼Ÿ"></a><strong>ä¸ºä»€ä¹ˆåˆ¶ä½œæ•°å­—ç­¾åæ—¶éœ€è¦hashä¸€æ¬¡ï¼Ÿ</strong></h3><p>æœ€æ˜¾ç„¶çš„æ˜¯æ€§èƒ½é—®é¢˜ï¼Œéå¯¹ç§°åŠ å¯†æ•ˆç‡è¾ƒå·®ï¼Œè¯ä¹¦ä¿¡æ¯ä¸€èˆ¬è¾ƒé•¿ï¼Œæ¯”è¾ƒè€—æ—¶ã€‚è€Œhashåå¾—åˆ°çš„æ˜¯å›ºå®šé•¿åº¦çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚ç”¨md5ç®—æ³•hashåå¯ä»¥å¾—åˆ°å›ºå®šçš„128ä½çš„å€¼ï¼‰ï¼Œè¿™æ ·åŠ è§£å¯†å°±å¿«å¾ˆå¤šã€‚</p>
<h3 id="æ€ä¹ˆè¯æ˜CAæœºæ„çš„å…¬é’¥æ˜¯å¯ä¿¡çš„ï¼Ÿ"><a href="#æ€ä¹ˆè¯æ˜CAæœºæ„çš„å…¬é’¥æ˜¯å¯ä¿¡çš„ï¼Ÿ" class="headerlink" title="æ€ä¹ˆè¯æ˜CAæœºæ„çš„å…¬é’¥æ˜¯å¯ä¿¡çš„ï¼Ÿ"></a><strong>æ€ä¹ˆè¯æ˜CAæœºæ„çš„å…¬é’¥æ˜¯å¯ä¿¡çš„ï¼Ÿ</strong></h3><p>â€œæµè§ˆå™¨ä¿æœ‰å®ƒçš„å…¬é’¥â€ï¼Œè¿™æ˜¯ä¸ªä»€ä¹ˆä¿æœ‰æ³•ï¼Ÿæ€ä¹ˆè¯æ˜è¿™ä¸ªå…¬é’¥æ˜¯å¦å¯ä¿¡ï¼Ÿ</p>
<p>è®©æˆ‘ä»¬å›æƒ³ä¸€ä¸‹æ•°å­—è¯ä¹¦åˆ°åº•æ˜¯å¹²å•¥çš„ï¼Ÿæ²¡é”™ï¼Œä¸ºäº†è¯æ˜æŸå…¬é’¥æ˜¯å¯ä¿¡çš„ï¼Œå³â€œè¯¥å…¬é’¥æ˜¯å¦å¯¹åº”è¯¥ç½‘ç«™â€ï¼Œé‚£CAæœºæ„çš„å…¬é’¥æ˜¯å¦ä¹Ÿå¯ä»¥ç”¨æ•°å­—è¯ä¹¦æ¥è¯æ˜ï¼Ÿæ²¡é”™ï¼Œæ“ä½œç³»ç»Ÿã€æµè§ˆå™¨æœ¬èº«ä¼šé¢„è£…ä¸€äº›å®ƒä»¬ä¿¡ä»»çš„æ ¹è¯ä¹¦ï¼Œå¦‚æœå…¶ä¸­ä¼šæœ‰CAæœºæ„çš„æ ¹è¯ä¹¦ï¼Œè¿™æ ·å°±å¯ä»¥æ‹¿åˆ°å®ƒå¯¹åº”çš„å¯ä¿¡å…¬é’¥äº†ã€‚</p>
<p>å®é™…ä¸Šè¯ä¹¦ä¹‹é—´çš„è®¤è¯ä¹Ÿå¯ä»¥ä¸æ­¢ä¸€å±‚ï¼Œå¯ä»¥Aä¿¡ä»»Bï¼ŒBä¿¡ä»»Cï¼Œä»¥æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬æŠŠå®ƒå«åš<code>ä¿¡ä»»é“¾</code>æˆ–<code>æ•°å­—è¯ä¹¦é“¾</code>ã€‚ä¹Ÿå°±æ˜¯ä¸€è¿ä¸²çš„æ•°å­—è¯ä¹¦ï¼Œç”±æ ¹è¯ä¹¦ä¸ºèµ·ç‚¹ï¼Œé€è¿‡å±‚å±‚ä¿¡ä»»ï¼Œä½¿ç»ˆç«¯å®ä½“è¯ä¹¦çš„æŒæœ‰è€…å¯ä»¥è·å¾—è½¬æˆçš„ä¿¡ä»»ï¼Œä»¥è¯æ˜èº«ä»½ã€‚</p>
<p>å¦å¤–ï¼Œä¸çŸ¥ä½ ä»¬æ˜¯å¦é‡åˆ°è¿‡ç½‘ç«™è®¿é—®ä¸äº†ã€æç¤ºéœ€å®‰è£…è¯ä¹¦çš„æƒ…å†µï¼Ÿè¿™é‡Œå®‰è£…çš„å°±æ˜¯æ ¹è¯ä¹¦ã€‚è¯´æ˜æµè§ˆå™¨ä¸è®¤ç»™è¿™ä¸ªç½‘ç«™é¢å‘è¯ä¹¦çš„æœºæ„ï¼Œé‚£ä¹ˆä½ å°±å¾—æ‰‹åŠ¨ä¸‹è½½å®‰è£…è¯¥æœºæ„çš„æ ¹è¯ä¹¦ï¼ˆé£é™©è‡ªå·±æ‰¿æ‹…XDï¼‰ã€‚å®‰è£…åï¼Œä½ å°±æœ‰äº†å®ƒçš„å…¬é’¥ï¼Œå°±å¯ä»¥ç”¨å®ƒéªŒè¯æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦æ˜¯å¦å¯ä¿¡äº†ã€‚</p>
<h3 id="æ¯æ¬¡è¿›è¡ŒHTTPSè¯·æ±‚æ—¶éƒ½å¿…é¡»åœ¨SSL-TLSå±‚è¿›è¡Œæ¡æ‰‹ä¼ è¾“å¯†é’¥å—ï¼Ÿ"><a href="#æ¯æ¬¡è¿›è¡ŒHTTPSè¯·æ±‚æ—¶éƒ½å¿…é¡»åœ¨SSL-TLSå±‚è¿›è¡Œæ¡æ‰‹ä¼ è¾“å¯†é’¥å—ï¼Ÿ" class="headerlink" title="æ¯æ¬¡è¿›è¡ŒHTTPSè¯·æ±‚æ—¶éƒ½å¿…é¡»åœ¨SSL&#x2F;TLSå±‚è¿›è¡Œæ¡æ‰‹ä¼ è¾“å¯†é’¥å—ï¼Ÿ"></a><strong>æ¯æ¬¡è¿›è¡ŒHTTPSè¯·æ±‚æ—¶éƒ½</strong>å¿…é¡»<strong>åœ¨SSL&#x2F;TLSå±‚è¿›è¡Œæ¡æ‰‹ä¼ è¾“å¯†é’¥å—ï¼Ÿ</strong></h3><p>æ˜¾ç„¶æ¯æ¬¡è¯·æ±‚éƒ½ç»å†ä¸€æ¬¡å¯†é’¥ä¼ è¾“è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œé‚£æ€ä¹ˆè¾¾åˆ°åªä¼ è¾“ä¸€æ¬¡å‘¢ï¼Ÿ</p>
<p>æœåŠ¡å™¨ä¼šä¸ºæ¯ä¸ªæµè§ˆå™¨ï¼ˆæˆ–å®¢æˆ·ç«¯è½¯ä»¶ï¼‰ç»´æŠ¤ä¸€ä¸ªsession IDï¼Œåœ¨TLSæ¡æ‰‹é˜¶æ®µä¼ ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨ç”Ÿæˆå¥½å¯†é’¥ä¼ ç»™æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨ä¼šæŠŠè¯¥å¯†é’¥å­˜åˆ°ç›¸åº”çš„session IDä¸‹ï¼Œä¹‹åæµè§ˆå™¨æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦session IDï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®session IDæ‰¾åˆ°ç›¸åº”çš„å¯†é’¥å¹¶è¿›è¡Œè§£å¯†åŠ å¯†æ“ä½œï¼Œè¿™æ ·å°±ä¸å¿…è¦æ¯æ¬¡é‡æ–°åˆ¶ä½œã€ä¼ è¾“å¯†é’¥äº†ï¼</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><p>å¯ä»¥çœ‹ä¸‹è¿™å¼ å›¾ï¼Œæ¢³ç†ä¸€ä¸‹æ•´ä¸ªæµç¨‹ï¼ˆSSLã€TLSæ¡æ‰‹æœ‰ä¸€äº›åŒºåˆ«ï¼Œä¸åŒç‰ˆæœ¬é—´ä¹Ÿæœ‰åŒºåˆ«ï¼Œä¸è¿‡å¤§è‡´è¿‡ç¨‹å°±æ˜¯è¿™æ ·ï¼‰ï¼š</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œåè®®</category>
      </categories>
      <tags>
        <tag>Network</tag>
        <tag>Https</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaSrciptåŸå‹</title>
    <url>/2021/02/17/JavaScript%E5%8E%9F%E5%9E%8B/</url>
    <content><![CDATA[<p>é¦–å…ˆï¼Œè¦æ˜ç¡®å‡ ä¸ªç‚¹ï¼š</p>
<ol>
<li><p>åœ¨JSé‡Œï¼Œä¸‡ç‰©çš†å¯¹è±¡ã€‚æ–¹æ³•ï¼ˆFunctionï¼‰æ˜¯å¯¹è±¡ï¼Œæ–¹æ³•çš„åŸå‹(Function.prototype)æ˜¯å¯¹è±¡ã€‚å› æ­¤ï¼Œå®ƒä»¬éƒ½ä¼šå…·æœ‰å¯¹è±¡å…±æœ‰çš„ç‰¹ç‚¹ã€‚<br>å³ï¼šå¯¹è±¡å…·æœ‰å±æ€§__proto__ï¼Œå¯ç§°ä¸ºéšå¼åŸå‹ï¼Œä¸€ä¸ªå¯¹è±¡çš„éšå¼åŸå‹æŒ‡å‘æ„é€ è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹ï¼Œè¿™ä¹Ÿä¿è¯äº†å®ä¾‹èƒ½å¤Ÿè®¿é—®åœ¨æ„é€ å‡½æ•°åŸå‹ä¸­å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
</li>
<li><p>æ–¹æ³•(Function)<br>æ–¹æ³•è¿™ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œé™¤äº†å’Œå…¶ä»–å¯¹è±¡ä¸€æ ·æœ‰ä¸Šè¿°_proto_å±æ€§ä¹‹å¤–ï¼Œè¿˜æœ‰è‡ªå·±ç‰¹æœ‰çš„å±æ€§â€”â€”åŸå‹å±æ€§ï¼ˆprototypeï¼‰ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„ç”¨é€”å°±æ˜¯åŒ…å«æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ï¼ˆæˆ‘ä»¬æŠŠè¿™ä¸ªå¯¹è±¡å«åšåŸå‹å¯¹è±¡ï¼‰ã€‚åŸå‹å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªå±æ€§ï¼Œå«åšconstructorï¼Œè¿™ä¸ªå±æ€§åŒ…å«äº†ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å›åŸæ„é€ å‡½æ•°ã€‚</p>
</li>
</ol>
<p>å¥½å•¦ï¼ŒçŸ¥é“äº†è¿™ä¸¤ä¸ªåŸºæœ¬ç‚¹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸Šé¢è¿™å‰¯å›¾ã€‚</p>
<ol>
<li><p>æ„é€ å‡½æ•°Foo()<br>æ„é€ å‡½æ•°çš„åŸå‹å±æ€§Foo.prototypeæŒ‡å‘äº†åŸå‹å¯¹è±¡ï¼Œåœ¨åŸå‹å¯¹è±¡é‡Œæœ‰å…±æœ‰çš„æ–¹æ³•ï¼Œæ‰€æœ‰æ„é€ å‡½æ•°å£°æ˜çš„å®ä¾‹ï¼ˆè¿™é‡Œæ˜¯f1ï¼Œf2ï¼‰éƒ½å¯ä»¥å…±äº«è¿™ä¸ªæ–¹æ³•ã€‚</p>
</li>
<li><p>åŸå‹å¯¹è±¡Foo.prototype<br>Foo.prototypeä¿å­˜ç€å®ä¾‹å…±äº«çš„æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ªæŒ‡é’ˆconstructoræŒ‡å›æ„é€ å‡½æ•°ã€‚</p>
</li>
<li><p>å®ä¾‹<br>f1å’Œf2æ˜¯Fooè¿™ä¸ªå¯¹è±¡çš„ä¸¤ä¸ªå®ä¾‹ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡ä¹Ÿæœ‰å±æ€§__proto__ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œè¿™æ ·å­å°±å¯ä»¥åƒä¸Šé¢1æ‰€è¯´çš„è®¿é—®åŸå‹å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•å•¦ã€‚</p>
<p><img src="/../assets/Snipaste_2021-08-08_20-48-18.png" alt="image-20210808204737157"></p>
</li>
</ol>
<span id="more"></span>

<p>å¦å¤–ï¼š<br>æ„é€ å‡½æ•°Foo()é™¤äº†æ˜¯æ–¹æ³•ï¼Œä¹Ÿæ˜¯å¯¹è±¡å•Šï¼Œå®ƒä¹Ÿæœ‰__proto__å±æ€§ï¼ŒæŒ‡å‘è°å‘¢ï¼Ÿ<br>æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡å‘—ã€‚å‡½æ•°çš„æ„é€ å‡½æ•°ä¸å°±æ˜¯Functionå˜›ï¼Œå› æ­¤è¿™é‡Œçš„__proto__æŒ‡å‘äº†Function.prototypeã€‚<br>å…¶å®é™¤äº†Foo()ï¼ŒFunction(), Object()ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€‚</p>
<p>åŸå‹å¯¹è±¡ä¹Ÿæ˜¯å¯¹è±¡å•Šï¼Œå®ƒçš„__proto__å±æ€§ï¼ŒåˆæŒ‡å‘è°å‘¢ï¼Ÿ<br>åŒç†ï¼ŒæŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡å‘—ã€‚è¿™é‡Œæ˜¯Object.prototype.</p>
<p>æœ€åï¼ŒObject.prototypeçš„__proto__å±æ€§æŒ‡å‘nullï¼ˆåŸå‹é“¾çš„ç»ˆç‚¹ï¼‰</p>
<p>æ€»ç»“ï¼š</p>
<ol>
<li>å¯¹è±¡æœ‰å±æ€§__proto__,æŒ‡å‘è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚</li>
<li>æ–¹æ³•é™¤äº†æœ‰å±æ€§__proto__,è¿˜æœ‰å±æ€§prototypeï¼ŒprototypeæŒ‡å‘è¯¥æ–¹æ³•çš„åŸå‹å¯¹è±¡ã€‚</li>
<li>æ ‡å‡†åŒ–è·å–å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹ï¼šä¸è¦ç”¨obj.__proto__ï¼Œç”¨Object.getPrototypeof(obj)ã€‚</li>
</ol>
<h2 id="åŸå‹å¯¹è±¡ä¸­çš„constructor"><a href="#åŸå‹å¯¹è±¡ä¸­çš„constructor" class="headerlink" title="åŸå‹å¯¹è±¡ä¸­çš„constructor"></a>åŸå‹å¯¹è±¡ä¸­çš„constructor</h2><p>çœ‹ä¸€æ®µä»£ç :</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function </span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaScriptåŸç†</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScriptåƒåœ¾å›æ”¶</title>
    <url>/2021/02/18/JavaStript%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<h3 id="javascriptåƒåœ¾å›æ”¶ä¸»è¦åˆ†æˆä¸¤ç§æ–¹æ³•ï¼š"><a href="#javascriptåƒåœ¾å›æ”¶ä¸»è¦åˆ†æˆä¸¤ç§æ–¹æ³•ï¼š" class="headerlink" title="javascriptåƒåœ¾å›æ”¶ä¸»è¦åˆ†æˆä¸¤ç§æ–¹æ³•ï¼š"></a>javascriptåƒåœ¾å›æ”¶ä¸»è¦åˆ†æˆä¸¤ç§æ–¹æ³•ï¼š</h3><h3 id="1-å¼•ç”¨è®¡æ•°"><a href="#1-å¼•ç”¨è®¡æ•°" class="headerlink" title="1. å¼•ç”¨è®¡æ•°"></a>1. å¼•ç”¨è®¡æ•°</h3><h3 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h3><ul>
<li><p>åƒåœ¾å›æ”¶ç®—æ³•ä¸»è¦ä¾èµ–äºå¼•ç”¨çš„æ¦‚å¿µã€‚</p>
</li>
<li><p>åœ¨å†…å­˜ç®¡ç†çš„ç¯å¢ƒä¸­ï¼Œä¸€ä¸ªå¯¹è±¡å¦‚æœæœ‰è®¿é—®å¦ä¸€ä¸ªå¯¹è±¡çš„æƒé™ï¼ˆéšå¼æˆ–è€…æ˜¾å¼ï¼‰ï¼Œå«åšä¸€ä¸ªå¯¹è±¡å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ã€‚</p>
</li>
<li><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªJavascriptå¯¹è±¡å…·æœ‰å¯¹å®ƒåŸå‹çš„å¼•ç”¨ï¼ˆéšå¼å¼•ç”¨ï¼‰å’Œå¯¹å®ƒå±æ€§çš„å¼•ç”¨ï¼ˆæ˜¾å¼å¼•ç”¨ï¼‰ã€‚</p>
</li>
<li><p>åœ¨è¿™é‡Œï¼Œâ€œå¯¹è±¡â€çš„æ¦‚å¿µä¸ä»…ç‰¹æŒ‡ JavaScript å¯¹è±¡ï¼Œè¿˜åŒ…æ‹¬å‡½æ•°ä½œç”¨åŸŸã€‚</p>
</li>
</ul>
<h3 id="å¼•ç”¨è®¡æ•°åƒåœ¾æ”¶é›†"><a href="#å¼•ç”¨è®¡æ•°åƒåœ¾æ”¶é›†" class="headerlink" title="å¼•ç”¨è®¡æ•°åƒåœ¾æ”¶é›†"></a>å¼•ç”¨è®¡æ•°åƒåœ¾æ”¶é›†</h3><p>è¿™æ˜¯æœ€åˆçº§çš„åƒåœ¾æ”¶é›†ç®—æ³•ã€‚æ­¤ç®—æ³•æŠŠâ€œå¯¹è±¡æ˜¯å¦ä¸å†éœ€è¦â€ç®€åŒ–å®šä¹‰ä¸ºâ€œå¯¹è±¡æœ‰æ²¡æœ‰å…¶ä»–å¯¹è±¡å¼•ç”¨åˆ°å®ƒâ€ã€‚å¦‚æœæ²¡æœ‰å¼•ç”¨æŒ‡å‘è¯¥å¯¹è±¡ï¼ˆé›¶å¼•ç”¨ï¼‰ï¼Œå¯¹è±¡å°†è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚</p>
<span id="more"></span>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="attr">a</span>: &#123;</span><br><span class="line">    <span class="attr">b</span>:<span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ä¸¤ä¸ªå¯¹è±¡è¢«åˆ›å»ºï¼Œä¸€ä¸ªä½œä¸ºå¦ä¸€ä¸ªçš„å±æ€§è¢«å¼•ç”¨ï¼Œå¦ä¸€ä¸ªè¢«åˆ†é…ç»™å˜é‡o</span></span><br><span class="line"><span class="comment">// å¾ˆæ˜¾ç„¶ï¼Œæ²¡æœ‰ä¸€ä¸ªå¯ä»¥è¢«åƒåœ¾æ”¶é›†</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o2 = o; <span class="comment">// o2å˜é‡æ˜¯ç¬¬äºŒä¸ªå¯¹â€œè¿™ä¸ªå¯¹è±¡â€çš„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">o = <span class="number">1</span>;      <span class="comment">// ç°åœ¨ï¼Œâ€œè¿™ä¸ªå¯¹è±¡â€åªæœ‰ä¸€ä¸ªo2å˜é‡çš„å¼•ç”¨äº†ï¼Œâ€œè¿™ä¸ªå¯¹è±¡â€çš„åŸå§‹å¼•ç”¨oå·²ç»æ²¡æœ‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> oa = o2.<span class="property">a</span>; <span class="comment">// å¼•ç”¨â€œè¿™ä¸ªå¯¹è±¡â€çš„aå±æ€§</span></span><br><span class="line">               <span class="comment">// ç°åœ¨ï¼Œâ€œè¿™ä¸ªå¯¹è±¡â€æœ‰ä¸¤ä¸ªå¼•ç”¨äº†ï¼Œä¸€ä¸ªæ˜¯o2ï¼Œä¸€ä¸ªæ˜¯oa</span></span><br><span class="line"></span><br><span class="line">o2 = <span class="string">&quot;yo&quot;</span>; <span class="comment">// è™½ç„¶æœ€åˆçš„å¯¹è±¡ç°åœ¨å·²ç»æ˜¯é›¶å¼•ç”¨äº†ï¼Œå¯ä»¥è¢«åƒåœ¾å›æ”¶äº†</span></span><br><span class="line">           <span class="comment">// ä½†æ˜¯å®ƒçš„å±æ€§açš„å¯¹è±¡è¿˜åœ¨è¢«oaå¼•ç”¨ï¼Œæ‰€ä»¥è¿˜ä¸èƒ½å›æ”¶</span></span><br><span class="line"></span><br><span class="line">oa = <span class="literal">null</span>; <span class="comment">// aå±æ€§çš„é‚£ä¸ªå¯¹è±¡ç°åœ¨ä¹Ÿæ˜¯é›¶å¼•ç”¨äº†</span></span><br><span class="line">           <span class="comment">// å®ƒå¯ä»¥è¢«åƒåœ¾å›æ”¶äº†</span></span><br></pre></td></tr></table></figure>



<h3 id="2-æ ‡è®°æ¸…é™¤"><a href="#2-æ ‡è®°æ¸…é™¤" class="headerlink" title="2. æ ‡è®°æ¸…é™¤"></a>2. æ ‡è®°æ¸…é™¤</h3><p>JavaScript ä¸­æœ€å¸¸ç”¨çš„åƒåœ¾æ”¶é›†æ–¹å¼æ˜¯æ ‡è®°æ¸…é™¤ã€‚å®ƒçš„å…·ä½“å·¥ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡åŠ ä¸Šæ ‡è®°ï¼ˆå½“ç„¶å¯ä»¥ä½¿ç”¨ä»»ä½•æ ‡è®°æ–¹å¼ï¼‰</li>
<li>å»æ‰å½“å‰æ‰§è¡Œç¯å¢ƒä¸­çš„å˜é‡ï¼Œä»¥åŠè¢«æ‰§è¡Œç¯å¢ƒä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°</li>
<li>ç¬¬äºŒæ­¥ç»“æŸåä»è¢«æ ‡è®°çš„å˜é‡å°†è¢«è§†ä¸ºå‡†å¤‡åˆ é™¤çš„å˜é‡ï¼Œå› ä¸ºæ­¤æ—¶çš„æ‰§è¡Œç¯å¢ƒä¸­çš„å˜é‡å·²ç»æ— æ³•è®¿é—®åˆ°è¿™äº›å˜é‡äº†ã€‚</li>
<li>å®Œæˆå†…å­˜æ¸…é™¤å·¥ä½œï¼Œé”€æ¯é‚£äº›å¸¦æ ‡è®°çš„å€¼å¹¶å›æ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</li>
</ol>
<p>å¯¹äºå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>,</span><br><span class="line">    b = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test1</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test2</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> d = <span class="number">4</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a); </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test1</span>();</span><br><span class="line"></span><br><span class="line"><span class="title function_">test2</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å‡è®¾æ‰§è¡Œåˆ°test2()æ—¶ï¼Œåƒåœ¾å›æ”¶å¼€å§‹æ‰§è¡Œ</p>
<p>å¯¹äºæ­¤æ—¶ï¼Œå†…å­˜æƒ…å†µä¸º</p>
<p><img src="/../assets/image-20210412150846546.png" alt="image-20210412150846546"></p>
<p>å¼€å§‹ç¬¬ä¸€æ­¥ï¼Œå°†å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡åŠ ä¸Šæ ‡è®°</p>
<p><img src="/../assets/image-20210412151850990.png" alt="image-20210412151850990"></p>
<p>å»æ‰å½“å‰æ‰§è¡Œç¯å¢ƒä¸­çš„å˜é‡ï¼Œä»¥åŠè¢«æ‰§è¡Œç¯å¢ƒä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°ã€‚ç®€å•åˆ†æä¸€ä¸‹ï¼Œæ­¤æ—¶æ‰§è¡Œç¯å¢ƒä¸­å¯ä»¥è®¿é—®çš„å˜é‡æœ‰ d ,ç„¶åæˆ‘ä»¬é€šè¿‡ä½œç”¨åŸŸé“¾å¯ä»¥è®¿é—®åˆ°å…¨å±€å˜é‡å¯¹è±¡ï¼Œå› æ­¤ a å’Œ b æˆ‘ä»¬ä¹Ÿæ˜¯å¯ä»¥è®¿é—®åˆ°çš„</p>
<p><img src="/../assets/image-20210412152201055.png" alt="image-20210412152201055"></p>
<p>æ­¤æ—¶åªæœ‰ c å˜é‡è¿˜ä¿ç•™æœ‰æ ‡è®°ï¼Œè¯´æ˜ c å˜é‡é€šè¿‡æ­¤æ—¶çš„ç¯å¢ƒå·²ç»è®¿é—®ä¸åˆ°äº†ï¼Œæ‰€ä»¥ c å˜é‡éœ€è¦è¢«æ¸…é™¤æ‰æ¥é‡Šæ”¾å†…å­˜ã€‚</p>
<p>æœ€ååƒåœ¾æ”¶é›†å™¨å®Œæˆå†…å­˜æ¸…é™¤å·¥ä½œï¼Œé”€æ¯é‚£äº›å¸¦æ ‡è®°çš„å€¼å¹¶å›æ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p>
<p><img src="/../assets/image-20210412152245827.png" alt="image-20210412152245827"></p>
<h3 id="ç¼ºç‚¹ï¼š"><a href="#ç¼ºç‚¹ï¼š" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h3><ol>
<li>æ ‡è®°æ¸…é™¤æ³•çš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ•ˆç‡ä¸é«˜ï¼Œå› ä¸ºåœ¨æ ‡è®°æ¸…é™¤-é˜¶æ®µï¼Œæ•´ä¸ªç¨‹åºå°†ä¼šç­‰å¾…ï¼Œæ‰€æœ‰å¦‚æœç¨‹åºå‡ºç°å¡é¡¿çš„æƒ…å†µä½ ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½æ˜¯æ”¶é›†åƒåœ¾çš„æƒ…å†µã€‚</li>
<li>æ ‡è®°æ¸…é™¤æ³•çš„ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œåœ¨æ¸…é™¤ä¹‹åå†…å­˜ç©ºé—´ä¸æ˜¯è¿ç»­çš„ï¼Œå³å‡ºç°äº†å†…å­˜ç¢ç‰‡ã€‚å¦‚æœåé¢éœ€è¦ä¸€ä¸ªæ¯”è¾ƒå¤§çš„è¿ç»­çš„å†…å­˜ç©ºé—´æ—¶ï¼Œé‚£å°†ä¸èƒ½æ»¡è¶³è¦æ±‚ã€‚è€Œæ ‡è®°-æ•´ç†æ–¹æ³•å¯ä»¥æœ‰æ•ˆåœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸æ ‡è®°æ¸…é™¤æ³•ç›¸æ¯”ï¼Œæ ‡è®°é˜¶æ®µæ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œåªæ˜¯æ ‡è®°ç»“æŸåï¼Œæ ‡è®°-æ•´ç†æ–¹æ³•ä¼šå°†æ´»ç€çš„å¯¹è±¡å‘å†…å­˜çš„ä¸€è¾¹ç§»åŠ¨ï¼Œæœ€åæ¸…ç†æ‰è¾¹ç•Œçš„å†…å­˜ã€‚ä¸è¿‡å¯ä»¥æƒ³è±¡ï¼Œè¿™ç§åšæ³•çš„æ•ˆç‡æ²¡æœ‰æ ‡è®°-æ¸…é™¤é«˜ã€‚</li>
</ol>
<p>å¯¹æ¯”ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£çš„è§£é‡Š:</p>
<div><i>æ ‡è®°æ¸…é™¤è¿™ä¸ªç®—æ³•æŠŠâ€œå¯¹è±¡æ˜¯å¦ä¸å†éœ€è¦â€ç®€åŒ–å®šä¹‰ä¸ºâ€œå¯¹è±¡æ˜¯å¦å¯ä»¥è·å¾—â€ã€‚è¿™ä¸ªç®—æ³•å‡å®šè®¾ç½®ä¸€ä¸ªå«åšæ ¹ï¼ˆrootï¼‰çš„å¯¹è±¡ï¼ˆåœ¨Javascripté‡Œï¼Œæ ¹æ˜¯å…¨å±€å¯¹è±¡ï¼‰ã€‚åƒåœ¾å›æ”¶å™¨å°†å®šæœŸä»æ ¹å¼€å§‹ï¼Œæ‰¾æ‰€æœ‰ä»æ ¹å¼€å§‹å¼•ç”¨çš„å¯¹è±¡ï¼Œç„¶åæ‰¾è¿™äº›å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡â€¦â€¦ä»æ ¹å¼€å§‹ï¼Œåƒåœ¾å›æ”¶å™¨å°†æ‰¾åˆ°æ‰€æœ‰å¯ä»¥è·å¾—çš„å¯¹è±¡å’Œæ”¶é›†æ‰€æœ‰ä¸èƒ½è·å¾—çš„å¯¹è±¡

<h4 id="è¿™é‡Œçš„â€˜æ ¹â€™æŒ‡çš„åº”è¯¥æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡"><a href="#è¿™é‡Œçš„â€˜æ ¹â€™æŒ‡çš„åº”è¯¥æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡" class="headerlink" title="è¿™é‡Œçš„â€˜æ ¹â€™æŒ‡çš„åº”è¯¥æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡"></a>è¿™é‡Œçš„â€˜æ ¹â€™æŒ‡çš„åº”è¯¥æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡</h4><p>å› ä¸ºé€šè¿‡å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¯¹è±¡å¯ä»¥è®¿é—®åˆ°å½“å‰ç¯å¢ƒä¸­çš„å˜é‡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä½œç”¨åŸŸé“¾å»è®¿é—®åˆ°å…¶ä»–ä¸Šä¸‹æ–‡ä¸­çš„æ´»åŠ¨å¯¹è±¡ï¼Œä»è€Œå¯ä»¥åˆ¤æ–­å¾—åˆ°æ‰€æœ‰å¯ä»¥è·å¾—çš„å¯¹è±¡å’Œæ‰€æœ‰ä¸èƒ½è·å¾—çš„å¯¹è±¡</p>
]]></content>
      <categories>
        <category>JavaScriptåŸç†</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScriptæ‰‹å†™é¢˜</title>
    <url>/2021/03/02/Javascript%E6%89%8B%E5%86%99%E9%A2%98/</url>
    <content><![CDATA[<h4 id="å®ç°ä¸€ä¸ªnew"><a href="#å®ç°ä¸€ä¸ªnew" class="headerlink" title="å®ç°ä¸€ä¸ªnew"></a>å®ç°ä¸€ä¸ªnew</h4><p><strong>newçš„å…·ä½“æ­¥éª¤</strong></p>
<ol>
<li>å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</li>
<li>æ–°å»ºå¯¹è±¡çš„ _ <em>proto</em> _æŒ‡å‘æ„é€ å‡½æ•°çš„prototype</li>
<li>è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå‡½æ•°çš„thisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼ˆç»™æ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰</li>
<li><strong>å¦‚æœæ„é€ å‡½æ•°è¿”å›éç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼Œå¦åˆ™ï¼Œè¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">age, name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHello</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myNew</span>(<span class="params">fn, ...args</span>) &#123;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹obj.__proto__ = fn.prototypeï¼Œå¦‚æœç›´æ¥obj = &#123;&#125;ä¼šå‡ºç°æ²¡æœ‰å¯¹è±¡æ ‡è¯†çš„é—®é¢˜ï¼ˆå¯¹è±¡æ ‡è¯†ä¸ºObjectï¼‰ï¼Œè¿˜ä¼šä½¿å¾—æ–¹æ³•æ²¡æœ‰è¢«åˆ›å»º</span></span><br><span class="line">    <span class="keyword">const</span> obj = <span class="title class_">Object</span>.<span class="title function_">create</span>(fn.<span class="property"><span class="keyword">prototype</span></span>)  <span class="comment">//fn.prototypeä»£è¡¨ ç”¨å½“å‰å¯¹è±¡çš„åŸå‹å»åˆ›å»º</span></span><br><span class="line">    <span class="comment">//ç°åœ¨objå°±ä»£è¡¨Dogäº†,ä½†æ˜¯å‚æ•°å’ŒthisæŒ‡å‘æ²¡æœ‰ä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">const</span> rel = fn.<span class="title function_">apply</span>(obj,args)</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">       æ­£å¸¸è§„å®š,å¦‚ä½•fnè¿”å›çš„æ˜¯nullæˆ–undefined(ä¹Ÿå°±æ˜¯ä¸è¿”å›å†…å®¹),æˆ‘ä»¬è¿”å›çš„æ˜¯obj,å¦åˆ™è¿”å›rel</span></span><br><span class="line"><span class="comment">       å› ä¸ºæ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">       function Person(name, age) &#123;</span></span><br><span class="line"><span class="comment">            this.name = name;</span></span><br><span class="line"><span class="comment">            this.age = age;</span></span><br><span class="line"><span class="comment">            return &#123;</span></span><br><span class="line"><span class="comment">                a: 1,</span></span><br><span class="line"><span class="comment">                b: 2,</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        const p = new Person(&#x27;h&#x27;, &#x27;y&#x27;);</span></span><br><span class="line"><span class="comment">        è¿™é‡Œnewä¼šä¼˜å…ˆä¸ºæ„é€ å‡½æ•°çš„è¿”å›å€¼</span></span><br><span class="line"><span class="comment">        æ‰€ä»¥pçš„å€¼ä¸º&#123;a: 1,b: 2&#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">return</span> rel <span class="keyword">instanceof</span> <span class="title class_">Object</span> ? rel : obj</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p1 = <span class="title function_">myNew</span>(<span class="title class_">Person</span>, <span class="number">19</span>, <span class="string">&#x27;hyz&#x27;</span>);</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h4 id="å®ç°ä¸€ä¸ªObject-create"><a href="#å®ç°ä¸€ä¸ªObject-create" class="headerlink" title="å®ç°ä¸€ä¸ªObject.create"></a>å®ç°ä¸€ä¸ªObject.create</h4><p>Object.create(proto)åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œprotoä¸ºç©ºå¯¹è±¡çš„â€<em><strong>proto</strong></em>â€œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">create</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="comment">// Object.create(null) è¿”å›ä¸€ä¸ª__proto__æŒ‡å‘ç©ºçš„å¹²å‡€å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">if</span> (obj === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">setPrototypeOf</span>(&#123;&#125;, <span class="literal">null</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// éå¯¹è±¡énullï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">  <span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> <span class="title class_">Object</span>)) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">setPrototypeOf</span>(&#123;&#125;, obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è™¾çš®ç¬”è¯•é¢˜"><a href="#è™¾çš®ç¬”è¯•é¢˜" class="headerlink" title="è™¾çš®ç¬”è¯•é¢˜"></a>è™¾çš®ç¬”è¯•é¢˜</h4><p>ååˆ†æœ‰æ°´å¹³çš„ä¸€é“é¢˜ï¼Œç»¼åˆäº†newåŸç†ï¼ŒåŸå‹é“¾+instanceofåŸç†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ee&#x27;</span>,</span><br><span class="line">    <span class="attr">sayName</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br><span class="line"><span class="comment">// Person çš„ prototype å·²ç»æ”¹å˜ï¼Œè€Œ person1.__proto__ æŒ‡å‘ä¸€å¼€å§‹çš„ Person.prototype</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person1 instanceof Person: &#x27;</span>, person1 <span class="keyword">instanceof</span> <span class="title class_">Person</span>) <span class="comment">// ä¸ºå•¥æ˜¯false</span></span><br><span class="line"><span class="comment">// æ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿è‡ª Objectï¼Œé™¤äº† null æˆ–è€…ä½ æŠŠæœ€é¡¶å±‚çš„ prototype ä¹Ÿç»™æ”¹äº†</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person1 instanceof Object: &#x27;</span>, person1 <span class="keyword">instanceof</span> <span class="title class_">Object</span>) <span class="comment">// ä¸ºå•¥æ˜¯true</span></span><br><span class="line"><span class="comment">// person1 æœ¬èº«æ²¡æœ‰ constructor, ä¼šæ²¿ç€åŸå‹é“¾æ‰¾ï¼Œ</span></span><br><span class="line"><span class="comment">// person1.constructor === person1.__proto__.constructor</span></span><br><span class="line"><span class="comment">// è€Œä¸Šé¢ä¹Ÿè¯´äº† person1.__proto__ å¹¶æ²¡æœ‰å› ä¸º Person.prototype æ”¹å˜è€Œæ”¹å˜</span></span><br><span class="line"><span class="comment">// è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š</span></span><br><span class="line"><span class="comment">// Person æœ¬èº«å°±æ˜¯ constructor</span></span><br><span class="line"><span class="comment">// åˆå§‹æƒ…å†µä¸‹</span></span><br><span class="line"><span class="comment">// Person.prototype =&gt; Person.prototype</span></span><br><span class="line"><span class="comment">// Person.prototype.constructor =&gt; Person</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person1.constructor == Person: &#x27;</span>, person1.<span class="property">constructor</span> == <span class="title class_">Person</span>) <span class="comment">// ä¸ºå•¥æ˜¯true</span></span><br><span class="line"><span class="comment">// ä¸Šé¢æ˜¯ true, ä¸‹é¢å°±å¥½è¯´äº†</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person1.constructor == Object: &#x27;</span>, person1.<span class="property">constructor</span> == <span class="title class_">Object</span>) <span class="comment">// ä¸ºå•¥æ˜¯false</span></span><br></pre></td></tr></table></figure>

<h4 id="å®ç°æ¶ˆæ¯è®¢é˜…"><a href="#å®ç°æ¶ˆæ¯è®¢é˜…" class="headerlink" title="å®ç°æ¶ˆæ¯è®¢é˜…"></a>å®ç°æ¶ˆæ¯è®¢é˜…</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">EventCenter</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">Map&lt;string, Array&lt;Function&gt;</span>&#125; <span class="variable">handlers</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">handlers=<span class="keyword">new</span> <span class="built_in">Map</span>()</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">handlers</span> = handlers;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; <span class="variable">handler</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">type</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="title function_">addEventListener</span>(<span class="params">type, newHandler</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> hanlder = <span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="title function_">has</span>(type);</span><br><span class="line">        <span class="keyword">if</span> (hanlder) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="title function_">set</span>(type, [...<span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="title function_">get</span>(type), newHandler]) </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="title function_">set</span>(type, [newHandler]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">type</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">Array</span>&#125; <span class="variable">params</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="title function_">dispatchEvent</span>(<span class="params">type, params=[]</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> handler = <span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="title function_">get</span>(type);</span><br><span class="line">        handler &amp;&amp; handler.<span class="title function_">forEach</span>(<span class="function">(<span class="params">callback</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">callback</span>(...params);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; type </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; delHandler </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">removeEventListener</span>(<span class="params">type, delHandler</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="title function_">has</span>(type)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Errow</span>(<span class="string">&quot;Unable to delete&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (delHanlder) &#123;</span><br><span class="line">            <span class="keyword">const</span> oldHandlers = <span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="title function_">get</span>(type);</span><br><span class="line">            <span class="keyword">const</span> ind = oldHandlers.<span class="title function_">indexOf</span>(delHandler);</span><br><span class="line">            <span class="keyword">if</span> (ind === -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Errow</span>(<span class="string">&quot;Unable to delete&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            oldHandlers.<span class="title function_">splice</span>(ind, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="title function_">delete</span>(type);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å®ç°ä¸€ä¸ªJSONP"><a href="#å®ç°ä¸€ä¸ªJSONP" class="headerlink" title="å®ç°ä¸€ä¸ªJSONP"></a>å®ç°ä¸€ä¸ªJSONP</h4><p>å‰ç«¯éƒ¨åˆ†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">jsonp</span>(<span class="params">url, options</span>) &#123;</span><br><span class="line">    <span class="comment">// è¶…æ—¶å¤„ç†</span></span><br><span class="line">    <span class="keyword">const</span> &#123; timeout &#125; = options;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// é˜²æ­¢å‡½æ•°åå†²çª</span></span><br><span class="line">        <span class="keyword">let</span> funcName = <span class="string">`jsonp<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>`</span>;</span><br><span class="line">        <span class="keyword">let</span> time = <span class="literal">null</span>, scriptNode;</span><br><span class="line">        <span class="comment">// å®šä¹‰callback</span></span><br><span class="line">        <span class="variable language_">window</span>[funcName] = <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (timeout) <span class="built_in">clearTimeout</span>(time);</span><br><span class="line">            <span class="title function_">resolve</span>(data);</span><br><span class="line">            <span class="comment">// å¾ˆé‡è¦çš„æ€§èƒ½ä¼˜åŒ–ç‚¹</span></span><br><span class="line">            <span class="comment">// æ¸…é™¤æœ¬æ¬¡è¯·æ±‚äº§ç”Ÿçš„å›è°ƒå‡½æ•°å’Œscriptæ ‡ç­¾</span></span><br><span class="line">            <span class="keyword">delete</span> <span class="variable language_">window</span>[funcName];</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(scriptNode);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ›å»ºscriptæ ‡ç­¾</span></span><br><span class="line">        scriptNode = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">        <span class="comment">// ç»™scriptæ ‡ç­¾æ·»åŠ srcå±æ€§</span></span><br><span class="line">        scriptNode.<span class="property">src</span> = <span class="string">`<span class="subst">$&#123;url&#125;</span>?callback=<span class="subst">$&#123;funcName&#125;</span>`</span>;</span><br><span class="line">        <span class="comment">// å‘å‡ºè¯·æ±‚</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(scriptNode);</span><br><span class="line">        time = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">reject</span>(<span class="string">&#x27;network err, timeout&#x27;</span>)</span><br><span class="line">        &#125;, timeout)</span><br><span class="line">        <span class="comment">// å¤±è´¥</span></span><br><span class="line">        scriptNode.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(err);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">jsonp</span>(<span class="string">&#x27;http://localhost:9090/api&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">callBack</span>: <span class="string">&#x27;res1&#x27;</span>,</span><br><span class="line">    <span class="comment">// è¶…æ—¶å¤„ç†</span></span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">3000</span></span><br><span class="line">&#125;)</span><br><span class="line">    <span class="comment">// è¯·æ±‚æˆåŠŸ</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;jsonp-&gt;&#x27;</span>, res);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// è¯·æ±‚å¤±è´¥</span></span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;network err!&quot;</span>)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>åç«¯éƒ¨åˆ†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åç«¯</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// /api?callback=onResponse</span></span><br><span class="line">  <span class="comment">// è§£æå‰ç«¯è¯·æ±‚urlä¸­çš„callbackå</span></span><br><span class="line">  <span class="keyword">if</span>(req.<span class="property">url</span>.<span class="title function_">includes</span>(<span class="string">&#x27;/api&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">let</span> myurl = url.<span class="title function_">parse</span>(req.<span class="property">url</span>);</span><br><span class="line">    <span class="keyword">let</span> params = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(myurl.<span class="property">query</span>)</span><br><span class="line">    <span class="keyword">let</span> posts = [<span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;php&#x27;</span>];</span><br><span class="line">    <span class="keyword">let</span> mathodName = params.<span class="title function_">get</span>(<span class="string">&#x27;callback&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">end</span>(<span class="string">`<span class="subst">$&#123;mathodName&#125;</span>(<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(posts)&#125;</span>)`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">listen</span>(<span class="number">9090</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">9090</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScriptæ‰§è¡Œä¸Šä¸‹æ–‡</title>
    <url>/2021/02/17/Javascript%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87/</url>
    <content><![CDATA[<h4 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h4><h4 id="åœ¨çœ‹jsåƒåœ¾å›æ”¶æ—¶é‡åˆ°ç›¸å…³é—®é¢˜ï¼Œæ„Ÿè§‰è‡ªå·±å¯¹ä¸Šä¸‹æ–‡å¯¹è±¡ç†è§£çš„è¿˜æ˜¯ä¸å¤Ÿé€å½»ï¼ˆå®åœ¨æ˜¯å¤ªèœäº†ï¼‰è¿™å°±å›æ¥æ¶è¡¥ã€‚"><a href="#åœ¨çœ‹jsåƒåœ¾å›æ”¶æ—¶é‡åˆ°ç›¸å…³é—®é¢˜ï¼Œæ„Ÿè§‰è‡ªå·±å¯¹ä¸Šä¸‹æ–‡å¯¹è±¡ç†è§£çš„è¿˜æ˜¯ä¸å¤Ÿé€å½»ï¼ˆå®åœ¨æ˜¯å¤ªèœäº†ï¼‰è¿™å°±å›æ¥æ¶è¡¥ã€‚" class="headerlink" title="åœ¨çœ‹jsåƒåœ¾å›æ”¶æ—¶é‡åˆ°ç›¸å…³é—®é¢˜ï¼Œæ„Ÿè§‰è‡ªå·±å¯¹ä¸Šä¸‹æ–‡å¯¹è±¡ç†è§£çš„è¿˜æ˜¯ä¸å¤Ÿé€å½»ï¼ˆå®åœ¨æ˜¯å¤ªèœäº†ï¼‰è¿™å°±å›æ¥æ¶è¡¥ã€‚"></a>åœ¨çœ‹jsåƒåœ¾å›æ”¶æ—¶é‡åˆ°ç›¸å…³é—®é¢˜ï¼Œæ„Ÿè§‰è‡ªå·±å¯¹ä¸Šä¸‹æ–‡å¯¹è±¡ç†è§£çš„è¿˜æ˜¯ä¸å¤Ÿé€å½»ï¼ˆå®åœ¨æ˜¯å¤ªèœäº†ï¼‰è¿™å°±å›æ¥æ¶è¡¥ã€‚</h4><h4 id="æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution-Contextï¼‰"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution-Contextï¼‰" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰"></a>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰</h4><ul>
<li><p><strong>æ‰§è¡Œä¸Šä¸‹æ–‡å¯ä»¥ç†è§£ä¸ºå½“å‰ä»£ç çš„è¿è¡Œç¯å¢ƒã€‚</strong>åœ¨ JavaScript ä¸­ï¼Œè¿è¡Œç¯å¢ƒä¸»è¦åŒ…å«äº†<strong>å…¨å±€ç¯å¢ƒ</strong>å’Œ<strong>å‡½æ•°ç¯å¢ƒ</strong>ã€‚</p>
</li>
<li><p>åœ¨ JavaScript ä»£ç è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ€å…ˆè¿›å…¥çš„æ˜¯å…¨å±€ç¯å¢ƒï¼Œè€Œåœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶åˆ™è¿›å…¥ç›¸åº”çš„å‡½æ•°ç¯å¢ƒã€‚å…¨å±€ç¯å¢ƒå’Œå‡½æ•°ç¯å¢ƒæ‰€å¯¹åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡æˆ‘ä»¬åˆ†åˆ«ç§°ä¸º<strong>å…¨å±€ä¸Šä¸‹æ–‡</strong>å’Œ<strong>å‡½æ•°ä¸Šä¸‹æ–‡</strong>ã€‚</p>
</li>
<li><p>åœ¨ä¸€ä¸ª JavaScript æ–‡ä»¶ä¸­ï¼Œç»å¸¸ä¼šæœ‰å¤šä¸ªå‡½æ•°è¢«è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ JavaScript ä»£ç è¿è¡Œè¿‡ç¨‹ä¸­å¾ˆå¯èƒ½ä¼šäº§ç”Ÿå¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œé‚£ä¹ˆå¦‚ä½•å»ç®¡ç†è¿™å¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡å‘¢ï¼Ÿ</p>
</li>
<li><p>æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯ä»¥æ ˆï¼ˆä¸€ç§ LIFO çš„æ•°æ®ç»“æ„ï¼‰çš„æ–¹å¼è¢«å­˜æ”¾èµ·æ¥çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆExecution Context Stackï¼‰</strong>ã€‚</p>
</li>
<li><p><strong>åœ¨ JavaScript ä»£ç å¼€å§‹æ‰§è¡Œæ—¶ï¼Œé¦–å…ˆè¿›å…¥å…¨å±€ç¯å¢ƒï¼Œæ­¤æ—¶å…¨å±€ä¸Šä¸‹æ–‡è¢«åˆ›å»ºå¹¶å…¥æ ˆï¼Œä¹‹åå½“è°ƒç”¨å‡½æ•°æ—¶åˆ™è¿›å…¥ç›¸åº”çš„å‡½æ•°ç¯å¢ƒï¼Œæ­¤æ—¶ç›¸åº”å‡½æ•°ä¸Šä¸‹æ–‡è¢«åˆ›å»ºå¹¶å…¥æ ˆï¼Œå½“å¤„äºæ ˆé¡¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œåˆ™ä¼šå°†å…¶å‡ºæ ˆã€‚</strong></p>
</li>
<li><p>æ‰€ä»¥åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­ï¼Œæ ˆåº•æ°¸è¿œæ˜¯å…¨å±€ä¸Šä¸‹æ–‡ï¼Œè€Œæ ˆé¡¶åˆ™æ˜¯å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ä¸Šä¸‹æ–‡ã€‚</p>
</li>
</ul>
<span id="more"></span>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn2&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn1&#x27;</span>)</span><br><span class="line">  <span class="title function_">fn2</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn1</span>();</span><br></pre></td></tr></table></figure>

<p>å¯¹äºå¦‚ä¸Šä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* ä¼ªä»£ç  ä»¥æ•°ç»„æ¥è¡¨ç¤ºæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ ECStack=[] */</span></span><br><span class="line"><span class="comment">// ä»£ç æ‰§è¡Œæ—¶æœ€å…ˆè¿›å…¥å…¨å±€ç¯å¢ƒï¼Œå…¨å±€ä¸Šä¸‹æ–‡è¢«åˆ›å»ºå¹¶å…¥æ ˆ</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">push</span>(global_EC);</span><br><span class="line"><span class="comment">// fn1 è¢«è°ƒç”¨ï¼Œfn1 å‡½æ•°ä¸Šä¸‹æ–‡è¢«åˆ›å»ºå¹¶å…¥æ ˆ</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">push</span>(fn1_EC);</span><br><span class="line"><span class="comment">// fn1 ä¸­è°ƒç”¨ fn2ï¼Œfn2 å‡½æ•°ä¸Šä¸‹æ–‡è¢«åˆ›å»ºå¹¶å…¥æ ˆ</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">push</span>(fn2_EC);</span><br><span class="line"><span class="comment">// fn2 æ‰§è¡Œå®Œæ¯•ï¼Œfn2 å‡½æ•°ä¸Šä¸‹æ–‡å‡ºæ ˆ</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">pop</span>();</span><br><span class="line"><span class="comment">// fn1 æ‰§è¡Œå®Œæ¯•ï¼Œfn1 å‡½æ•°ä¸Šä¸‹æ–‡å‡ºæ ˆ</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">pop</span>();</span><br><span class="line"><span class="comment">// ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå…¨å±€ä¸Šä¸‹æ–‡å‡ºæ ˆ</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">pop</span>();</span><br></pre></td></tr></table></figure>

<p><img src="/../assets%5Cimage-20210414214146564.png" alt="image-20210414214146564"></p>
<p>åœ¨ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œæœ€é‡è¦çš„ä¸‰ä¸ªå±æ€§åˆ†åˆ«æ˜¯<strong>å˜é‡å¯¹è±¡ï¼ˆVariable Objectï¼‰</strong>ã€<strong>ä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰</strong>å’Œ <strong>this æŒ‡å‘</strong>ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">EC</span> = &#123;</span><br><span class="line">  <span class="variable constant_">VO</span>,</span><br><span class="line">  <span class="variable constant_">SC</span>,</span><br><span class="line">  <span class="variable language_">this</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸º<strong>åˆ›å»º</strong>å’Œ<strong>æ‰§è¡Œ</strong>é˜¶æ®µã€‚åˆ›å»ºé˜¶æ®µä¸»è¦å·¥ä½œæ˜¯<strong>ç”Ÿæˆå˜é‡å¯¹è±¡</strong>ã€<strong>å»ºç«‹ä½œç”¨åŸŸé“¾</strong>å’Œ<strong>ç¡®å®š this æŒ‡å‘</strong>ã€‚è€Œæ‰§è¡Œé˜¶æ®µä¸»è¦å·¥ä½œæ˜¯å˜é‡èµ‹å€¼ä»¥åŠæ‰§è¡Œå…¶å®ƒä»£ç ç­‰ã€‚</p>
<h4 id="å˜é‡å¯¹è±¡ï¼ˆVariable-Objectï¼‰"><a href="#å˜é‡å¯¹è±¡ï¼ˆVariable-Objectï¼‰" class="headerlink" title="å˜é‡å¯¹è±¡ï¼ˆVariable Objectï¼‰"></a>å˜é‡å¯¹è±¡ï¼ˆVariable Objectï¼‰</h4><p>ç”Ÿæˆå˜é‡æœ‰ä¸‰ä¸ªè¿‡ç¨‹ï¼š</p>
<p><strong>1. æ£€ç´¢å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„å‡½æ•°å‚æ•°</strong>ã€‚è¯¥è¿‡ç¨‹ç”Ÿæˆ Arguments å¯¹è±¡ï¼ˆå‡½æ•°å‚æ•°ï¼‰ï¼Œå¹¶å»ºç«‹ä»¥å½¢å‚å˜é‡åä¸ºå±æ€§åï¼Œå½¢å‚å˜é‡å€¼ä¸ºå±æ€§å€¼çš„å±æ€§ï¼›</p>
<p><strong>2. æ£€ç´¢å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„å‡½æ•°å£°æ˜</strong>ã€‚è¯¥è¿‡ç¨‹å»ºç«‹ä»¥å‡½æ•°åä¸ºå±æ€§åï¼Œå‡½æ•°æ‰€åœ¨å†…å­˜åœ°å€å¼•ç”¨ä¸ºå±æ€§å€¼çš„å±æ€§ï¼›</p>
<p><strong>3. æ£€ç´¢å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å£°æ˜</strong>ã€‚è¯¥è¿‡ç¨‹å»ºç«‹ä»¥å˜é‡åä¸ºå±æ€§åï¼Œundefined ä¸ºå±æ€§å€¼çš„å±æ€§ï¼ˆå¦‚æœå˜é‡åè·Ÿå·²å£°æ˜çš„å½¢å‚å˜é‡åæˆ–å‡½æ•°åç›¸åŒï¼Œåˆ™<strong>è¯¥å˜é‡å£°æ˜</strong>ä¸ä¼šå¹²æ‰°å·²ç»å­˜åœ¨çš„è¿™ç±»å±æ€§ï¼‰ã€‚</p>
<p>ä¼ªä»£ç è¡¨ç¤ºå˜é‡å¯¹è±¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">VO</span> = &#123;</span><br><span class="line">  <span class="title class_">Arguments</span>: &#123;&#125;, </span><br><span class="line">  <span class="title class_">ParamVariable</span>: å…·ä½“å€¼,  <span class="comment">//å½¢å‚å˜é‡</span></span><br><span class="line">  <span class="title class_">Function</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">function</span> <span class="attr">reference</span>&gt;</span>,</span></span><br><span class="line"><span class="language-xml">  Variable:undefined</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure>

<p>å½“æ‰§è¡Œä¸Šä¸‹æ–‡è¿›å…¥æ‰§è¡Œé˜¶æ®µåï¼Œå˜é‡å¯¹è±¡ä¼šå˜ä¸º<strong>æ´»åŠ¨å¯¹è±¡ï¼ˆActive Objectï¼‰</strong>ã€‚æ­¤æ—¶åŸå…ˆå£°æ˜çš„å˜é‡ä¼šè¢«èµ‹å€¼ã€‚</p>
<p><strong>å˜é‡å¯¹è±¡å’Œæ´»åŠ¨å¯¹è±¡éƒ½æ˜¯æŒ‡åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å¤„äºæ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸åŒé˜¶æ®µ</strong>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¼ªä»£ç æ¥è¡¨ç¤ºæ´»åŠ¨å¯¹è±¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">AO</span> = &#123;</span><br><span class="line">  <span class="title class_">Arguments</span>: &#123;&#125;,</span><br><span class="line">  <span class="title class_">ParamVariable</span>: å…·ä½“å€¼,  <span class="comment">//å½¢å‚å˜é‡</span></span><br><span class="line">  <span class="title class_">Function</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">function</span> <span class="attr">reference</span>&gt;</span>,</span></span><br><span class="line"><span class="language-xml">  Variable:å…·ä½“å€¼</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure>

<p>å®é™…ä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params">a</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  <span class="keyword">var</span> c = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn1</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>å½“ fn1 å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œfn1 æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åˆ›å»ºï¼ˆåˆ›å»ºé˜¶æ®µï¼‰å¹¶å…¥æ ˆï¼Œå…¶å˜é‡å¯¹è±¡å¦‚ä¸‹æ‰€ç¤º</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fn1_EC = &#123;</span><br><span class="line">  <span class="variable constant_">VO</span> = &#123;</span><br><span class="line">    <span class="title class_">Arguments</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;0&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">length</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">a</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">fn2</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">function</span> <span class="attr">fn2</span> <span class="attr">reference</span>&gt;</span>,</span></span><br><span class="line"><span class="language-xml">    c:undefined</span></span><br><span class="line"><span class="language-xml">  &#125;</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œé˜¶æ®µï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fn1_EC = &#123;</span><br><span class="line">  <span class="variable constant_">AO</span> = &#123;</span><br><span class="line">    <span class="title class_">Arguments</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;0&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">length</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">a</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">fn2</span>: &lt;function fn2 reference&gt;,</span><br><span class="line">    c:&lt;function express c reference&gt;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºå…¨å±€ä¸Šä¸‹æ–‡æ¥è¯´ï¼Œç”±äºå…¶ä¸ä¼šæœ‰å‚æ•°ä¼ é€’ï¼Œæ‰€ä»¥åœ¨ç”Ÿæˆå˜é‡å¯¹è±¡çš„è¿‡ç¨‹ä¸­åªæœ‰æ£€ç´¢å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„å‡½æ•°å£°æ˜å’Œæ£€ç´¢å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å£°æ˜ä¸¤ä¸ªæ­¥éª¤ã€‚</p>
<p>åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå…¨å±€ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡ï¼ˆå…¨å±€å¯¹è±¡ï¼‰å³æˆ‘ä»¬ç†Ÿæ‚‰çš„ window å¯¹è±¡ï¼Œé€šè¿‡è¯¥å¯¹è±¡å¯ä»¥ä½¿ç”¨å…¶é¢„å®šä¹‰çš„å˜é‡å’Œå‡½æ•°ï¼Œåœ¨å…¨å±€ç¯å¢ƒä¸­æ‰€å£°æ˜çš„å˜é‡å’Œå‡½æ•°ï¼Œä¹Ÿä¼šæˆä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§ã€‚</p>
<h5 id="å‡½æ•°æå‡å’Œå˜é‡æå‡"><a href="#å‡½æ•°æå‡å’Œå˜é‡æå‡" class="headerlink" title="å‡½æ•°æå‡å’Œå˜é‡æå‡"></a>å‡½æ•°æå‡å’Œå˜é‡æå‡</h5><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// undefined</span></span><br><span class="line"><span class="title function_">fn</span>(<span class="number">0</span>); <span class="comment">// fn</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¨å±€ä¸Šä¸‹æ–‡çš„åˆ›å»ºé˜¶æ®µ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">VO</span> = &#123;</span><br><span class="line">  <span class="title class_">Arguments</span>: &#123;&#125;, </span><br><span class="line">  <span class="title class_">ParamVariable</span>: å…·ä½“å€¼,  <span class="comment">//å½¢å‚å˜é‡</span></span><br><span class="line">  <span class="title class_">Function</span>: <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn&#x27;</span>)&#125;</span><br><span class="line">  <span class="title class_">Variable</span>: a = <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ªäººç†è§£ï¼šæ¯æ‰§è¡Œä¸€è¡Œï¼ŒAOéƒ½ä¼šæ›´æ–°ä¸€æ¬¡ï¼ˆç»™å˜é‡èµ‹å€¼ï¼‰ï¼Œæ¯”å¦‚æ‰§è¡Œåˆ°<code>console.log(a) // undefined</code>æ­¤æ—¶ç”±äºAOä¸­çš„aè¿˜æœªæ›´æ–°ï¼Œæ‰€ä»¥è¾“å‡ºundefined</p>
<p>æ‰€ä»¥å®é™…æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="literal">undefined</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// undefined</span></span><br><span class="line"><span class="title function_">fn</span>(<span class="number">0</span>); <span class="comment">// fn</span></span><br><span class="line">a = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>



<h4 id="ä½œç”¨åŸŸé“¾ï¼ˆScope-Chainï¼‰"><a href="#ä½œç”¨åŸŸé“¾ï¼ˆScope-Chainï¼‰" class="headerlink" title="ä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰"></a>ä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰</h4><ul>
<li><p><strong>ä½œç”¨åŸŸé“¾æ˜¯æŒ‡ç”±å½“å‰ä¸Šä¸‹æ–‡å’Œä¸Šå±‚ä¸Šä¸‹æ–‡çš„ä¸€ç³»åˆ—å˜é‡å¯¹è±¡ç»„æˆçš„å±‚çº§é“¾</strong>ã€‚å®ƒä¿è¯äº†å½“å‰æ‰§è¡Œç¯å¢ƒå¯¹ç¬¦åˆè®¿é—®æƒé™çš„å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ã€‚</p>
</li>
<li><p>æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡åˆ†ä¸ºåˆ›å»ºå’Œæ‰§è¡Œä¸¤ä¸ªé˜¶æ®µï¼Œåœ¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ‰§è¡Œé˜¶æ®µï¼Œå½“éœ€è¦æŸ¥æ‰¾æŸä¸ªå˜é‡æˆ–å‡½æ•°æ—¶ï¼Œä¼šåœ¨å½“å‰ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼ˆæ´»åŠ¨å¯¹è±¡ï¼‰ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œè‹¥æ˜¯æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šæ²¿ç€ä¸Šå±‚ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡è¿›è¡ŒæŸ¥æ‰¾ï¼Œç›´åˆ°å…¨å±€ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡ï¼ˆå…¨å±€å¯¹è±¡ï¼‰ã€‚</p>
</li>
<li><p>é‚£ä¹ˆå½“å‰ä¸Šä¸‹æ–‡æ˜¯å¦‚ä½•æœ‰åºåœ°å»æŸ¥æ‰¾å®ƒæ‰€éœ€è¦çš„å˜é‡æˆ–å‡½æ•°çš„å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ä¾é å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„ä½œç”¨åŸŸé“¾ï¼Œå…¶åŒ…å«äº†å½“å‰ä¸Šä¸‹æ–‡å’Œä¸Šå±‚ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡ï¼Œä»¥ä¾¿å…¶ä¸€å±‚ä¸€å±‚åœ°å»æŸ¥æ‰¾å…¶æ‰€éœ€è¦çš„å˜é‡å’Œå‡½æ•°ã€‚</p>
</li>
<li><p>æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä½œç”¨åŸŸé“¾åˆæ˜¯æ€ä¹ˆå»ºç«‹çš„å‘¢ï¼Ÿæˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒJavaScript ä¸­ä¸»è¦åŒ…å«äº†å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œè€Œ<strong>å‡½æ•°ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°è¢«å£°æ˜çš„æ—¶å€™ç¡®å®šçš„</strong>ã€‚</p>
</li>
<li><p>æ¯ä¸€ä¸ªå‡½æ•°éƒ½ä¼šåŒ…å«ä¸€ä¸ª [[scope]] å†…éƒ¨å±æ€§ï¼Œåœ¨å‡½æ•°è¢«å£°æ˜çš„æ—¶å€™ï¼Œè¯¥å‡½æ•°çš„ [[scope]] å±æ€§ä¼šä¿å­˜å…¶ä¸Šå±‚ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼Œå½¢æˆåŒ…å«ä¸Šå±‚ä¸Šä¸‹æ–‡å˜é‡å¯¹è±¡çš„å±‚çº§é“¾ã€‚**[[scope]] å±æ€§çš„å€¼æ˜¯åœ¨å‡½æ•°è¢«å£°æ˜çš„æ—¶å€™ç¡®å®šçš„**ã€‚</p>
</li>
<li><p>å½“å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå…¶æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šè¢«åˆ›å»ºå¹¶å…¥æ ˆã€‚<strong>åœ¨åˆ›å»ºé˜¶æ®µç”Ÿæˆå…¶å˜é‡å¯¹è±¡åï¼Œä¼šå°†è¯¥å˜é‡å¯¹è±¡æ·»åŠ åˆ°ä½œç”¨åŸŸé“¾çš„é¡¶ç«¯å¹¶å°† [[scope]] æ·»åŠ è¿›è¯¥ä½œç”¨åŸŸé“¾ä¸­</strong>ã€‚è€Œåœ¨æ‰§è¡Œé˜¶æ®µï¼Œå˜é‡å¯¹è±¡ä¼šå˜ä¸ºæ´»åŠ¨å¯¹è±¡ï¼Œå…¶ç›¸åº”å±æ€§ä¼šè¢«èµ‹å€¼ã€‚</p>
</li>
<li><p>æ‰€ä»¥ï¼Œä½œç”¨åŸŸé“¾æ˜¯ç”±å½“å‰ä¸Šä¸‹æ–‡å˜é‡å¯¹è±¡åŠä¸Šå±‚ä¸Šä¸‹æ–‡å˜é‡å¯¹è±¡ç»„æˆçš„</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">SC</span> = <span class="variable constant_">AO</span> + [[scope]]</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">fn2</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn1</span>();</span><br></pre></td></tr></table></figure>

<p>åœ¨ fn1 å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼Œfn2 å‡½æ•°è¢«å£°æ˜ï¼Œæ‰€ä»¥</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fn2.[[scope]]=[fn1_EC.<span class="property">VO</span>, globalObj]</span><br></pre></td></tr></table></figure>

<p>å½“ fn2 è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå…¶æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åˆ›å»ºå¹¶å…¥æ ˆï¼Œæ­¤æ—¶ä¼šå°†ç”Ÿæˆçš„å˜é‡å¯¹è±¡æ·»åŠ è¿›ä½œç”¨åŸŸé“¾çš„é¡¶ç«¯ï¼Œå¹¶ä¸”å°† [[scope]] æ·»åŠ è¿›ä½œç”¨åŸŸé“¾</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fn2_EC.<span class="property">SC</span>=[fn2_EC.<span class="property">VO</span>].<span class="title function_">concat</span>(fn2.[[scope]])</span><br><span class="line">=&gt;</span><br><span class="line">fn2_EC.<span class="property">SC</span>=[fn2_EC.<span class="property">VO</span>, fn1_EC.<span class="property">VO</span>, globalObj]</span><br></pre></td></tr></table></figure>



<h4 id="this-æŒ‡å‘"><a href="#this-æŒ‡å‘" class="headerlink" title="this æŒ‡å‘"></a>this æŒ‡å‘</h4><p><strong>this çš„æŒ‡å‘ï¼Œæ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ç¡®å®šçš„ã€‚</strong>ä¹Ÿå°±æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åˆ›å»ºæ—¶ç¡®å®šçš„ã€‚</p>
<p>å…³äº this çš„æŒ‡å‘ï¼Œå…¶å®æœ€ä¸»è¦çš„æ˜¯ä¸‰ç§åœºæ™¯ï¼Œåˆ†åˆ«æ˜¯<strong>å…¨å±€ä¸Šä¸‹æ–‡ä¸­ this</strong>ã€<strong>å‡½æ•°ä¸­ this</strong> å’Œ<strong>æ„é€ å‡½æ•°ä¸­ this</strong>ã€‚</p>
<h6 id="å…¨å±€ä¸Šä¸‹æ–‡ä¸­-this"><a href="#å…¨å±€ä¸Šä¸‹æ–‡ä¸­-this" class="headerlink" title="å…¨å±€ä¸Šä¸‹æ–‡ä¸­ this"></a>å…¨å±€ä¸Šä¸‹æ–‡ä¸­ this</h6><p>åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼Œthis æŒ‡ä»£å…¨å±€å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå…¨å±€å¯¹è±¡æ˜¯ window å¯¹è±¡ï¼š</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span> === <span class="variable language_">window</span>); <span class="comment">// true</span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">b</span> = <span class="number">2</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">a</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">b</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h6 id="å‡½æ•°ä¸­-this"><a href="#å‡½æ•°ä¸­-this" class="headerlink" title="å‡½æ•°ä¸­ this"></a>å‡½æ•°ä¸­ this</h6><p>å‡½æ•°ä¸­çš„ this æŒ‡å‘æ˜¯æ€æ ·ä¸€ç§æƒ…å†µå‘¢ï¼Ÿ</p>
<p><strong>å¦‚æœè¢«è°ƒç”¨çš„å‡½æ•°ï¼Œè¢«æŸä¸€ä¸ªå¯¹è±¡æ‰€æ‹¥æœ‰ï¼Œé‚£ä¹ˆå…¶å†…éƒ¨çš„ this æŒ‡å‘è¯¥å¯¹è±¡ï¼›å¦‚æœè¯¥å‡½æ•°è¢«ç‹¬ç«‹è°ƒç”¨ï¼Œé‚£ä¹ˆå…¶å†…éƒ¨çš„ this æŒ‡å‘ undefinedï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹æŒ‡å‘ windowï¼‰ã€‚</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">fn</span>: fn</span><br><span class="line">&#125;</span><br><span class="line">obj.<span class="title function_">fn</span>(); <span class="comment">// 2</span></span><br><span class="line"><span class="title function_">fn</span>(); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h6 id="æ„é€ å‡½æ•°ä¸­-this"><a href="#æ„é€ å‡½æ•°ä¸­-this" class="headerlink" title="æ„é€ å‡½æ•°ä¸­ this"></a>æ„é€ å‡½æ•°ä¸­ this</h6><p>è¦æ¸…æ¥šæ„é€ å‡½æ•°ä¸­ this çš„æŒ‡å‘ï¼Œåˆ™å¿…é¡»å…ˆäº†è§£é€šè¿‡ new æ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°æ—¶æ‰€ç»å†çš„é˜¶æ®µã€‚</p>
<p>é€šè¿‡ new æ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°æ—¶æ‰€ç»å†çš„é˜¶æ®µå¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼›</li>
<li>å°†æ„é€ å‡½æ•°çš„ this æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ï¼›</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°å†…éƒ¨ä»£ç ï¼›</li>
<li>è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ã€‚</li>
</ol>
<p>æ‰€ä»¥ä»ä¸Šè¿°æµç¨‹å¯çŸ¥ï¼Œ<strong>å¯¹äºæ„é€ å‡½æ•°æ¥è¯´ï¼Œå…¶å†…éƒ¨ this æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡å®ä¾‹</strong>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ttsy = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;ttsy&#x27;</span>, <span class="number">24</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ttsy.<span class="property">name</span>);  <span class="comment">// ttsy</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ttsy.<span class="property">age</span>);  <span class="comment">// 24</span></span><br></pre></td></tr></table></figure>

<h5 id="éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨-ES6-ä¸­ç®­å¤´å‡½æ•°ä¸­ï¼Œthis-æ˜¯åœ¨å‡½æ•°å£°æ˜çš„æ—¶å€™ç¡®å®šçš„-ç®­å¤´å‡½æ•°ä¸ç»‘å®šthisï¼Œä¼šæ•è·ä¸Šä¸‹æ–‡çš„this"><a href="#éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨-ES6-ä¸­ç®­å¤´å‡½æ•°ä¸­ï¼Œthis-æ˜¯åœ¨å‡½æ•°å£°æ˜çš„æ—¶å€™ç¡®å®šçš„-ç®­å¤´å‡½æ•°ä¸ç»‘å®šthisï¼Œä¼šæ•è·ä¸Šä¸‹æ–‡çš„this" class="headerlink" title="éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ ES6 ä¸­ç®­å¤´å‡½æ•°ä¸­ï¼Œthis æ˜¯åœ¨å‡½æ•°å£°æ˜çš„æ—¶å€™ç¡®å®šçš„(ç®­å¤´å‡½æ•°ä¸ç»‘å®šthisï¼Œä¼šæ•è·ä¸Šä¸‹æ–‡çš„this)"></a>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ ES6 ä¸­ç®­å¤´å‡½æ•°ä¸­ï¼Œthis æ˜¯åœ¨å‡½æ•°å£°æ˜çš„æ—¶å€™ç¡®å®šçš„(ç®­å¤´å‡½æ•°ä¸ç»‘å®šthisï¼Œä¼šæ•è·ä¸Šä¸‹æ–‡çš„this)</h5>]]></content>
      <categories>
        <category>JavaScriptåŸç†</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaSrciptçŸ¥è¯†ç‚¹</title>
    <url>/2021/02/17/Javascript%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    <content><![CDATA[<h4 id="1-scriptæ ‡ç­¾ä¸­asyncå’Œdeferçš„åŒºåˆ«"><a href="#1-scriptæ ‡ç­¾ä¸­asyncå’Œdeferçš„åŒºåˆ«" class="headerlink" title="1. scriptæ ‡ç­¾ä¸­asyncå’Œdeferçš„åŒºåˆ«"></a>1. scriptæ ‡ç­¾ä¸­asyncå’Œdeferçš„åŒºåˆ«</h4><p><img src="/../assets/Snipaste_2021-12-13_03-23-58.png" alt="image-20211025190555184"></p>
<ul>
<li>æ™®é€šscriptæ ‡ç­¾ï¼šä¸‹è½½å’Œæ‰§è¡Œéƒ½ä¼šé˜»å¡Domæ¸²æŸ“</li>
<li>deferï¼šç«‹å³è¿›è¡Œå¼‚æ­¥ä¸‹è½½ï¼Œç­‰åˆ°HTMLå®Œå…¨è§£æå®Œåå¼€å§‹æ‰§è¡Œï¼Œæœ‰å¤šä¸ªdeferçš„æ ‡ç­¾æ—¶ï¼Œä¼šæŒ‰ç…§é¡ºåºä¸‹è½½æ‰§è¡Œ</li>
<li>asyncï¼šç«‹å³è¿›è¡Œå¼‚æ­¥ä¸‹è½½ï¼Œä¸‹è½½å®Œåä¼šç«‹å³æ‰§è¡ŒåŒæ—¶é˜»å¡Domæ¸²æŸ“ï¼Œå› ä¸ºæ˜¯ä¸‹è½½å®Œç«‹å³æ‰§è¡Œï¼Œä¸èƒ½ä¿è¯å¤šä¸ªåŠ è½½æ—¶çš„å…ˆåé¡ºåºã€‚</li>
</ul>
<span id="more"></span>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Jiraé¡¹ç›®</title>
    <url>/2022/03/02/Jira%E9%A1%B9%E7%9B%AE/</url>
    <content><![CDATA[<h4 id="ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·ï¼šprettier"><a href="#ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·ï¼šprettier" class="headerlink" title="ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·ï¼šprettier"></a>ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·ï¼šprettier</h4><p>é…ç½®è¿‡ç¨‹ï¼š<a href="https://prettier.io/docs/en/precommit.html">https://prettier.io/docs/en/precommit.html</a></p>
<p><code>yarn add --dev --exact prettier</code></p>
<p>æ–°å»º<code>.prettierrc.jsonï¼Œ.prettierignore</code>æ–‡ä»¶</p>
<p>è®¾ç½®git commité¢„æäº¤é’©å­</p>
<p><code>npx mrm@2 lint-staged </code></p>
<h4 id="è§„èŒƒgit-commitå·¥å…·ï¼šcommitlint"><a href="#è§„èŒƒgit-commitå·¥å…·ï¼šcommitlint" class="headerlink" title="è§„èŒƒgit commitå·¥å…·ï¼šcommitlint"></a>è§„èŒƒgit commitå·¥å…·ï¼šcommitlint</h4><p>é…ç½®è¿‡ç¨‹ï¼š<a href="https://github.com/conventional-changelog/commitlint">https://github.com/conventional-changelog/commitlint</a></p>
<p><code>yarn add --save-dev @commitlint/config-conventional @commitlint/cli</code></p>
<p>æ–°å»º commitlint.config.jsæ–‡ä»¶ï¼Œå¼•å…¥è§„åˆ™module.exports &#x3D; {extends: [â€˜@commitlint&#x2F;config-conventionalâ€™]}</p>
<span id="more"></span>

<h4 id="å¸¸è§MOCKæ–¹æ¡ˆ"><a href="#å¸¸è§MOCKæ–¹æ¡ˆ" class="headerlink" title="å¸¸è§MOCKæ–¹æ¡ˆ"></a>å¸¸è§MOCKæ–¹æ¡ˆ</h4><h5 id="1-ä»£ç ä¾µå…¥ï¼ˆç›´æ¥åœ¨ä»£ç ä¸­å†™æ­»Mockæ•°æ®ï¼Œæˆ–è¯·æ±‚æœ¬åœ°çš„JSONæ–‡ä»¶"><a href="#1-ä»£ç ä¾µå…¥ï¼ˆç›´æ¥åœ¨ä»£ç ä¸­å†™æ­»Mockæ•°æ®ï¼Œæˆ–è¯·æ±‚æœ¬åœ°çš„JSONæ–‡ä»¶" class="headerlink" title="1. ä»£ç ä¾µå…¥ï¼ˆç›´æ¥åœ¨ä»£ç ä¸­å†™æ­»Mockæ•°æ®ï¼Œæˆ–è¯·æ±‚æœ¬åœ°çš„JSONæ–‡ä»¶"></a>1. ä»£ç ä¾µå…¥ï¼ˆç›´æ¥åœ¨ä»£ç ä¸­å†™æ­»Mockæ•°æ®ï¼Œæˆ–è¯·æ±‚æœ¬åœ°çš„JSONæ–‡ä»¶</h5><p>â€‹	ä¼˜ç‚¹ï¼šæ— </p>
<p>â€‹	ç¼ºç‚¹ï¼šä¸çœŸå®serverç¯å¢ƒçš„åˆ‡æ¢æ¯”è¾ƒéº»çƒ¦ï¼ˆéœ€è¦ä¿®æ”¹è¯·æ±‚åœ°å€ï¼‰ï¼Œä¸€åˆ‡éœ€è¦ä¾µå…¥ä»£ç åˆ‡æ¢ç¯å¢ƒçš„è¡Œä¸ºéƒ½æ˜¯ä¸å¥½çš„</p>
<h5 id="2-è¯·æ±‚æ‹¦æˆª"><a href="#2-è¯·æ±‚æ‹¦æˆª" class="headerlink" title="2. è¯·æ±‚æ‹¦æˆª"></a>2. è¯·æ±‚æ‹¦æˆª</h5><p>â€‹	ä»£è¡¨ï¼š<a href="http://mockjs.com/">Mock.js</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Mock</span>.<span class="title function_">mock</span>(<span class="regexp">/\\\\/</span>api\\\\/visitor\\\\/list/, <span class="string">&#x27;get&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">code</span>: <span class="number">2000</span>,</span><br><span class="line">  <span class="attr">msg</span>: <span class="string">&#x27;ok&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;data|10&#x27;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&#x27;id|+1&#x27;</span>: <span class="number">6</span>,</span><br><span class="line">      <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;@csentence(5)&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;tag&#x27;</span>: <span class="string">&#x27;@integer(6, 9)-@integer(10, 14)å² @cword(&quot;é›¶æœ‰&quot;, 1)åŸºç¡€&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;lesson_image&#x27;</span>: <span class="string">&quot;&lt;https://images.pexels.com/3737094/pexels-photo-3737094.jpeg&gt;&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;lesson_package&#x27;</span>: <span class="string">&#x27;L1åŸºç¡€æŒ‡ä»¤è¯¾&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;done&#x27;</span>: <span class="string">&#x27;@integer(10000, 99999)&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>ä¸å‰ç«¯ä»£ç åˆ†ç¦»</li>
<li>å¯ç”Ÿæˆéšæœºæ•°æ®</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>æ•°æ®éƒ½æ˜¯åŠ¨æ€ç”Ÿæˆçš„å‡æ•°æ®ï¼Œæ— æ³•çœŸå®æ¨¡æ‹Ÿå¢åˆ æ”¹æŸ¥çš„æƒ…å†µ</li>
<li>åªæ”¯æŒajaxï¼Œä¸æ”¯æŒfetchï¼ˆæœ¬è´¨ä¸Šæ˜¯é‡å†™äº†ajaxæ–¹æ³•ï¼Œä¸¤è€…çš„å·®åˆ«è§ï¼š<a href="https://zhuanlan.zhihu.com/p/24594294">AJAX ä¹‹ XHR, Fetch çš„å¯¹æ¯”</a>ï¼‰</li>
</ol>
<h5 id="3-æ¥å£ç®¡ç†å·¥å…·"><a href="#3-æ¥å£ç®¡ç†å·¥å…·" class="headerlink" title="3. æ¥å£ç®¡ç†å·¥å…·"></a>3. æ¥å£ç®¡ç†å·¥å…·</h5><p>ä»£è¡¨ï¼šrapï¼Œswaggerï¼Œmocoï¼Œyapi</p>
<p>ä¼˜ç‚¹ï¼š</p>
<p>â€‹	1.é…ç½®åŠŸèƒ½å¼ºå¤§ï¼Œæ¥å£ç®¡ç†ä¸Mockä¸€ä½“ï¼Œåç«¯ä¿®æ”¹æ¥å£Mockä¹Ÿè·Ÿç€æ›´æ”¹ï¼Œå¯é </p>
<p>ç¼ºç‚¹ï¼š</p>
<p>â€‹	1.é…ç½®å¤æ‚ï¼Œä¾èµ–åç«¯</p>
<p>â€‹	2.ä¸€èˆ¬ä¼šä½œä¸ºå¤§å›¢é˜Ÿçš„åŸºç¡€å»ºè®¾è€Œå­˜åœ¨</p>
<h5 id="4-æœ¬åœ°nodeæœåŠ¡å™¨"><a href="#4-æœ¬åœ°nodeæœåŠ¡å™¨" class="headerlink" title="4. æœ¬åœ°nodeæœåŠ¡å™¨"></a>4. æœ¬åœ°nodeæœåŠ¡å™¨</h5><p>ä»£è¡¨ï¼š<a href="https://github.com/typicode/json-server">json-server</a></p>
<p>ä¼˜ç‚¹ï¼š</p>
<p>â€‹	1.é…ç½®ç®€å•ï¼Œjson-serverç”šè‡³å¯ä»¥0ä»£ç 30så¯åŠ¨ä¸€ä¸ªREST API Server</p>
<p>â€‹	2.è‡ªå®šä¹‰ç¨‹åº¦é«˜</p>
<p>â€‹	3.å¢åˆ æ”¹æŸ¥çœŸæ˜¯æ¨¡æ‹Ÿ</p>
<h5 id="REST-API"><a href="#REST-API" class="headerlink" title="REST API"></a>REST API</h5><p>ä¸€å¥è¯æ€»ç»“ï¼šURI ä»£è¡¨ èµ„æº&#x2F;å¯¹è±¡ï¼ŒMETHOD ä»£è¡¨è¡Œä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GET /tickets // åˆ—è¡¨</span><br><span class="line">GET /tickets/12 // è¯¦æƒ…</span><br><span class="line">POST /tickets  // å¢åŠ </span><br><span class="line">PUT /tickets/12 // æ›¿æ¢</span><br><span class="line">PATCH /tickets/12 // ä¿®æ”¹</span><br><span class="line">DELETE /tickets/12 // åˆ é™¤</span><br></pre></td></tr></table></figure>



<h4 id="d-tsç±»å‹æ–‡ä»¶"><a href="#d-tsç±»å‹æ–‡ä»¶" class="headerlink" title="d.tsç±»å‹æ–‡ä»¶"></a>d.tsç±»å‹æ–‡ä»¶</h4><p>æ”¹é€ jsæ–‡ä»¶ä¸ºtsæ–‡ä»¶åï¼Œå¼•å…¥çš„qsåº“æŠ¥é”™</p>
<p><img src="/../assets/image-20211110193223804.png" alt="image-20211110193223804"></p>
<p><code>yarn add @types/qs --save-dev   </code> å®‰è£…å¯¹åº”çš„tsè¡¥ä¸æ–‡ä»¶</p>
<p><strong>d.tsæ–‡ä»¶çš„ä½œç”¨ï¼šè¯´æ˜ä¹¦æ–‡ä»¶</strong></p>
<p>JS æ–‡ä»¶ + .d.ts æ–‡ä»¶   &#x3D;&#x3D;&#x3D; ts æ–‡ä»¶</p>
<p>.d.ts æ–‡ä»¶å¯ä»¥è®© JS æ–‡ä»¶ç»§ç»­ç»´æŒè‡ªå·±JSæ–‡ä»¶çš„èº«ä»½ï¼Œè€Œæ‹¥æœ‰TSçš„ç±»å‹ä¿æŠ¤</p>
<p>ä¸€èˆ¬å†™ä¸šåŠ¡ä»£ç ä¸ä¼šç”¨åˆ°ï¼Œä½†æ˜¯ç‚¹å‡»ç±»å‹è·³è½¬ä¸€èˆ¬ä¼šè·³è½¬åˆ° .d.tsæ–‡ä»¶</p>
]]></content>
      <categories>
        <category>Chore</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Mini-React</title>
    <url>/2022/03/04/Mini-React/</url>
    <content><![CDATA[<h4 id="é¡¹ç›®æ‹†è§£ï¼š"><a href="#é¡¹ç›®æ‹†è§£ï¼š" class="headerlink" title="é¡¹ç›®æ‹†è§£ï¼š"></a>é¡¹ç›®æ‹†è§£ï¼š</h4><ol>
<li><p>Jsx å’Œè™šæ‹Ÿ DOM</p>
</li>
<li><p>ç»„ä»¶å’Œç”Ÿå‘½å‘¨æœŸ</p>
</li>
<li><p>Diff</p>
</li>
<li><p>å¼‚æ­¥çš„setState</p>
</li>
<li><p>hookæ”¯æŒ</p>
</li>
</ol>
<h4 id="å…·ä½“æ€è·¯"><a href="#å…·ä½“æ€è·¯" class="headerlink" title="å…·ä½“æ€è·¯"></a>å…·ä½“æ€è·¯</h4><h5 id="å°†jsxç»è¿‡babelè½¬æˆReact-createElementçš„å½¢å¼"><a href="#å°†jsxç»è¿‡babelè½¬æˆReact-createElementçš„å½¢å¼" class="headerlink" title="å°†jsxç»è¿‡babelè½¬æˆReact.createElementçš„å½¢å¼"></a>å°†jsxç»è¿‡babelè½¬æˆReact.createElementçš„å½¢å¼</h5><p>ä¾‹å¦‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Hem</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">A</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">B</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">C</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">div</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">span</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">C</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">D</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">B</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">E</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">F</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">A</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»è¿‡babelè½¬ä¹‰å</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">_createClass</span>(<span class="title class_">Hem</span>, [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">key</span>: <span class="string">&quot;render&quot;</span>,</span><br><span class="line">        <span class="attr">value</span>: <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">React</span>.<span class="title function_">createElement</span>(</span><br><span class="line">                A,</span><br><span class="line">                <span class="literal">null</span>,</span><br><span class="line">                <span class="comment">// Aç»„ä»¶çš„äº²å„¿å­ç»„ä»¶B</span></span><br><span class="line">                <span class="title class_">React</span>.<span class="title function_">createElement</span>(</span><br><span class="line">                    B,</span><br><span class="line">                    <span class="literal">null</span>,</span><br><span class="line">                    <span class="title class_">React</span>.<span class="title function_">createElement</span>(</span><br><span class="line">                        C,</span><br><span class="line">                        <span class="literal">null</span>,</span><br><span class="line">                        <span class="comment">// Cç»„ä»¶çš„äº²å„¿å­ div</span></span><br><span class="line">                        <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>),</span><br><span class="line">                        <span class="comment">// Cç»„ä»¶çš„äº²å„¿å­ span</span></span><br><span class="line">                        <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&quot;span&quot;</span>, <span class="literal">null</span>)</span><br><span class="line">                    ),</span><br><span class="line">                    <span class="title class_">React</span>.<span class="title function_">createElement</span>(D, <span class="literal">null</span>)</span><br><span class="line">                ),</span><br><span class="line">                <span class="comment">// Aç»„ä»¶çš„äº²å„¿å­ç»„ä»¶E</span></span><br><span class="line">                <span class="title class_">React</span>.<span class="title function_">createElement</span>(E, <span class="literal">null</span>),</span><br><span class="line">                <span class="comment">// Aç»„ä»¶çš„äº²å„¿å­ç»„ä»¶F</span></span><br><span class="line">                <span class="title class_">React</span>.<span class="title function_">createElement</span>(F, <span class="literal">null</span>)</span><br><span class="line">            );</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h5 id="createElementç”Ÿæˆè™šæ‹Ÿdom"><a href="#createElementç”Ÿæˆè™šæ‹Ÿdom" class="headerlink" title="createElementç”Ÿæˆè™šæ‹Ÿdom"></a>createElementç”Ÿæˆè™šæ‹Ÿdom</h5>]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>React Router</title>
    <url>/2021/09/11/React-Router/</url>
    <content><![CDATA[<h3 id="SPAçš„ç†è§£"><a href="#SPAçš„ç†è§£" class="headerlink" title="SPAçš„ç†è§£"></a>SPAçš„ç†è§£</h3><ol>
<li><p>å•é¡µWebåº”ç”¨ï¼ˆsingle page web applicationï¼ŒSPAï¼‰ã€‚</p>
</li>
<li><p>æ•´ä¸ªåº”ç”¨åªæœ‰<strong>ä¸€ä¸ªå®Œæ•´çš„é¡µé¢</strong>ã€‚</p>
</li>
<li><p>ç‚¹å‡»é¡µé¢ä¸­çš„é“¾æ¥<strong>ä¸ä¼šåˆ·æ–°</strong>é¡µé¢ï¼Œåªä¼šåšé¡µé¢çš„<strong>å±€éƒ¨æ›´æ–°ã€‚</strong></p>
</li>
<li><p>æ•°æ®éƒ½éœ€è¦é€šè¿‡ajaxè¯·æ±‚è·å–, å¹¶åœ¨å‰ç«¯å¼‚æ­¥å±•ç°ã€‚</p>
</li>
</ol>
<h3 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h3><ol>
<li>åç«¯è·¯ç”±ï¼š</li>
</ol>
<ul>
<li><p>æ³¨å†Œè·¯ç”±ï¼š router.get(path, function(req, res))</p>
</li>
<li><p>å·¥ä½œè¿‡ç¨‹ï¼šå½“nodeæ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶, æ ¹æ®è¯·æ±‚è·¯å¾„æ‰¾åˆ°åŒ¹é…çš„è·¯ç”±, è°ƒç”¨è·¯ç”±ä¸­çš„å‡½æ•°æ¥å¤„ç†è¯·æ±‚, è¿”å›å“åº”æ•°æ®</p>
</li>
</ul>
<ol start="2">
<li>å‰ç«¯è·¯ç”±ï¼š</li>
</ol>
<ul>
<li><p>æ³¨å†Œè·¯ç”±: <Route path="/test" component={Test}></p>
</li>
<li><p>å·¥ä½œè¿‡ç¨‹ï¼šå½“æµè§ˆå™¨çš„pathå˜ä¸º&#x2F;testæ—¶, å½“å‰è·¯ç”±ç»„ä»¶å°±ä¼šå˜ä¸ºTestç»„ä»¶</p>
</li>
</ul>
<span id="more"></span>

<h3 id="react-router-domç›¸å…³API"><a href="#react-router-domç›¸å…³API" class="headerlink" title="react-router-domç›¸å…³API"></a>react-router-domç›¸å…³API</h3><h4 id="1-å†…ç½®API"><a href="#1-å†…ç½®API" class="headerlink" title="1.å†…ç½®API"></a>1.å†…ç½®API</h4><ul>
<li><BrowserRouter>
</li>
<li><HashRouter></li>
<li><Route></li>
<li><Redirect></li>
<li><Link></li>
<li><NavLink></li>
<li><Switch></li>
</ul>
<h4 id="2-å…¶ä»–"><a href="#2-å…¶ä»–" class="headerlink" title="2. å…¶ä»–"></a>2. å…¶ä»–</h4><ul>
<li><p>historyå¯¹è±¡</p>
</li>
<li><p>matchå¯¹è±¡</p>
</li>
<li><p>withRouterå‡½æ•°</p>
</li>
</ul>
<h3 id="è·¯ç”±ç»„ä»¶ä¸ä¸€èˆ¬ç»„ä»¶"><a href="#è·¯ç”±ç»„ä»¶ä¸ä¸€èˆ¬ç»„ä»¶" class="headerlink" title="è·¯ç”±ç»„ä»¶ä¸ä¸€èˆ¬ç»„ä»¶"></a>è·¯ç”±ç»„ä»¶ä¸ä¸€èˆ¬ç»„ä»¶</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>å†™æ³•ä¸åŒï¼š</span><br><span class="line">			ä¸€èˆ¬ç»„ä»¶ï¼š&lt;<span class="title class_">Demo</span>/&gt;</span><br><span class="line">			è·¯ç”±ç»„ä»¶ï¼š&lt;<span class="title class_">Route</span> path=<span class="string">&quot;/demo&quot;</span> component=&#123;<span class="title class_">Demo</span>&#125;/&gt;</span><br><span class="line"><span class="number">2.</span>å­˜æ”¾ä½ç½®ä¸åŒï¼š</span><br><span class="line">			ä¸€èˆ¬ç»„ä»¶ï¼šcomponents</span><br><span class="line">			è·¯ç”±ç»„ä»¶ï¼špages</span><br><span class="line"><span class="number">3.</span>æ¥æ”¶åˆ°çš„propsä¸åŒï¼š</span><br><span class="line">			ä¸€èˆ¬ç»„ä»¶ï¼šå†™ç»„ä»¶æ ‡ç­¾æ—¶ä¼ é€’äº†ä»€ä¹ˆï¼Œå°±èƒ½æ”¶åˆ°ä»€ä¹ˆ</span><br><span class="line">			è·¯ç”±ç»„ä»¶ï¼šæ¥æ”¶åˆ°ä¸‰ä¸ªå›ºå®šçš„å±æ€§</span><br><span class="line">								<span class="attr">history</span>:</span><br><span class="line">											<span class="attr">go</span>: Æ’ <span class="title function_">go</span>(n)</span><br><span class="line">											<span class="attr">goBack</span>: Æ’ <span class="title function_">goBack</span>()</span><br><span class="line">											<span class="attr">goForward</span>: Æ’ <span class="title function_">goForward</span>()</span><br><span class="line">											<span class="attr">push</span>: Æ’ <span class="title function_">push</span>(path, state)</span><br><span class="line">											<span class="attr">replace</span>: Æ’ <span class="title function_">replace</span>(path, state)</span><br><span class="line">								<span class="attr">location</span>:</span><br><span class="line">											<span class="attr">pathname</span>: <span class="string">&quot;/about&quot;</span></span><br><span class="line">											<span class="attr">search</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">											<span class="attr">state</span>: <span class="literal">undefined</span></span><br><span class="line">								<span class="attr">match</span>:</span><br><span class="line">											<span class="attr">params</span>: &#123;&#125;</span><br><span class="line">											<span class="attr">path</span>: <span class="string">&quot;/about&quot;</span></span><br><span class="line">											<span class="attr">url</span>: <span class="string">&quot;/about&quot;</span></span><br></pre></td></tr></table></figure>



<h3 id="NavLinkä¸å°è£…NavLink"><a href="#NavLinkä¸å°è£…NavLink" class="headerlink" title="NavLinkä¸å°è£…NavLink"></a>NavLinkä¸å°è£…NavLink</h3><pre><code>            1.NavLinkå¯ä»¥å®ç°è·¯ç”±é“¾æ¥çš„é«˜äº®ï¼Œé€šè¿‡activeClassNameæŒ‡å®šæ ·å¼å
</code></pre>
<h3 id="Switchçš„ä½¿ç”¨"><a href="#Switchçš„ä½¿ç”¨" class="headerlink" title="Switchçš„ä½¿ç”¨"></a>Switchçš„ä½¿ç”¨</h3><pre><code>            1.é€šå¸¸æƒ…å†µä¸‹ï¼Œpathå’Œcomponentæ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚
            2.Switchå¯ä»¥æé«˜è·¯ç”±åŒ¹é…æ•ˆç‡(å•ä¸€åŒ¹é…)ã€‚
</code></pre>
<h3 id="è§£å†³å¤šçº§è·¯å¾„åˆ·æ–°é¡µé¢æ ·å¼ä¸¢å¤±çš„é—®é¢˜"><a href="#è§£å†³å¤šçº§è·¯å¾„åˆ·æ–°é¡µé¢æ ·å¼ä¸¢å¤±çš„é—®é¢˜" class="headerlink" title="è§£å†³å¤šçº§è·¯å¾„åˆ·æ–°é¡µé¢æ ·å¼ä¸¢å¤±çš„é—®é¢˜"></a>è§£å†³å¤šçº§è·¯å¾„åˆ·æ–°é¡µé¢æ ·å¼ä¸¢å¤±çš„é—®é¢˜</h3><pre><code>            1.public/index.html ä¸­ å¼•å…¥æ ·å¼æ—¶ä¸å†™ ./ å†™ / ï¼ˆå¸¸ç”¨ï¼‰
            2.public/index.html ä¸­ å¼•å…¥æ ·å¼æ—¶ä¸å†™ ./ å†™ %PUBLIC_URL% ï¼ˆå¸¸ç”¨ï¼‰
            3.ä½¿ç”¨HashRouter
</code></pre>
<h3 id="è·¯ç”±çš„ä¸¥æ ¼åŒ¹é…ä¸æ¨¡ç³ŠåŒ¹é…"><a href="#è·¯ç”±çš„ä¸¥æ ¼åŒ¹é…ä¸æ¨¡ç³ŠåŒ¹é…" class="headerlink" title="è·¯ç”±çš„ä¸¥æ ¼åŒ¹é…ä¸æ¨¡ç³ŠåŒ¹é…"></a>è·¯ç”±çš„ä¸¥æ ¼åŒ¹é…ä¸æ¨¡ç³ŠåŒ¹é…</h3><pre><code>            1.é»˜è®¤ä½¿ç”¨çš„æ˜¯æ¨¡ç³ŠåŒ¹é…ï¼ˆç®€å•è®°ï¼šã€è¾“å…¥çš„è·¯å¾„ã€‘å¿…é¡»åŒ…å«è¦ã€åŒ¹é…çš„è·¯å¾„ã€‘ï¼Œä¸”é¡ºåºè¦ä¸€è‡´ï¼‰
            2.å¼€å¯ä¸¥æ ¼åŒ¹é…ï¼š&lt;Route exact=&#123;true&#125; path=&quot;/about&quot; component=&#123;About&#125;/&gt;
            3.ä¸¥æ ¼åŒ¹é…ä¸è¦éšä¾¿å¼€å¯ï¼Œéœ€è¦å†å¼€ï¼Œæœ‰äº›æ—¶å€™å¼€å¯ä¼šå¯¼è‡´æ— æ³•ç»§ç»­åŒ¹é…äºŒçº§è·¯ç”±
</code></pre>
<h3 id="Redirectçš„ä½¿ç”¨"><a href="#Redirectçš„ä½¿ç”¨" class="headerlink" title="Redirectçš„ä½¿ç”¨"></a>Redirectçš„ä½¿ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.ä¸€èˆ¬å†™åœ¨æ‰€æœ‰è·¯ç”±æ³¨å†Œçš„æœ€ä¸‹æ–¹ï¼Œå½“æ‰€æœ‰è·¯ç”±éƒ½æ— æ³•åŒ¹é…æ—¶ï¼Œè·³è½¬åˆ°RedirectæŒ‡å®šçš„è·¯ç”±</span><br><span class="line">2.å…·ä½“ç¼–ç ï¼š</span><br><span class="line">		&lt;Switch&gt;</span><br><span class="line">			&lt;Route path=&quot;/about&quot; component=&#123;About&#125;/&gt;</span><br><span class="line">			&lt;Route path=&quot;/home&quot; component=&#123;Home&#125;/&gt;</span><br><span class="line">			&lt;Redirect to=&quot;/about&quot;/&gt;</span><br><span class="line">		&lt;/Switch&gt;</span><br></pre></td></tr></table></figure>



<h3 id="åµŒå¥—è·¯ç”±"><a href="#åµŒå¥—è·¯ç”±" class="headerlink" title="åµŒå¥—è·¯ç”±"></a>åµŒå¥—è·¯ç”±</h3><pre><code>            1.æ³¨å†Œå­è·¯ç”±æ—¶è¦å†™ä¸Šçˆ¶è·¯ç”±çš„pathå€¼
            2.è·¯ç”±çš„åŒ¹é…æ˜¯æŒ‰ç…§æ³¨å†Œè·¯ç”±çš„é¡ºåºè¿›è¡Œçš„
</code></pre>
<h3 id="å‘è·¯ç”±ç»„ä»¶ä¼ é€’å‚æ•°"><a href="#å‘è·¯ç”±ç»„ä»¶ä¼ é€’å‚æ•°" class="headerlink" title="å‘è·¯ç”±ç»„ä»¶ä¼ é€’å‚æ•°"></a>å‘è·¯ç”±ç»„ä»¶ä¼ é€’å‚æ•°</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.paramså‚æ•°</span><br><span class="line">			è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š&lt;Link to=&#x27;/demo/test/tom/18&#x27;&#125;&gt;è¯¦æƒ…&lt;/Link&gt;</span><br><span class="line">			æ³¨å†Œè·¯ç”±(å£°æ˜æ¥æ”¶)ï¼š&lt;Route path=&quot;/demo/test/:name/:age&quot; component=&#123;Test&#125;/&gt;</span><br><span class="line">			æ¥æ”¶å‚æ•°ï¼šthis.props.match.params</span><br><span class="line">2.searchå‚æ•°</span><br><span class="line">			è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š&lt;Link to=&#x27;/demo/test?name=tom&amp;age=18&#x27;&#125;&gt;è¯¦æƒ…&lt;/Link&gt;</span><br><span class="line">			æ³¨å†Œè·¯ç”±(æ— éœ€å£°æ˜ï¼Œæ­£å¸¸æ³¨å†Œå³å¯)ï¼š&lt;Route path=&quot;/demo/test&quot; component=&#123;Test&#125;/&gt;</span><br><span class="line">			æ¥æ”¶å‚æ•°ï¼šthis.props.location.search</span><br><span class="line">			å¤‡æ³¨ï¼šè·å–åˆ°çš„searchæ˜¯urlencodedç¼–ç å­—ç¬¦ä¸²ï¼Œéœ€è¦å€ŸåŠ©querystringè§£æ</span><br><span class="line">3.stateå‚æ•°</span><br><span class="line">			è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š&lt;Link to=&#123;&#123;pathname:&#x27;/demo/test&#x27;,state:&#123;name:&#x27;tom&#x27;,age:18&#125;&#125;&#125;&gt;è¯¦æƒ…&lt;/Link&gt;</span><br><span class="line">			æ³¨å†Œè·¯ç”±(æ— éœ€å£°æ˜ï¼Œæ­£å¸¸æ³¨å†Œå³å¯)ï¼š&lt;Route path=&quot;/demo/test&quot; component=&#123;Test&#125;/&gt;</span><br><span class="line">			æ¥æ”¶å‚æ•°ï¼šthis.props.location.state</span><br><span class="line">			å¤‡æ³¨ï¼šåˆ·æ–°ä¹Ÿå¯ä»¥ä¿ç•™ä½å‚æ•°</span><br></pre></td></tr></table></figure>



<h3 id="ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª"><a href="#ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª" class="headerlink" title="ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª"></a>ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">å€ŸåŠ©<span class="variable language_">this</span>.<span class="property">prosp</span>.<span class="property">history</span>å¯¹è±¡ä¸Šçš„<span class="variable constant_">API</span>å¯¹æ“ä½œè·¯ç”±è·³è½¬ã€å‰è¿›ã€åé€€</span><br><span class="line">		-<span class="variable language_">this</span>.<span class="property">prosp</span>.<span class="property">history</span>.<span class="title function_">push</span>()</span><br><span class="line">		-<span class="variable language_">this</span>.<span class="property">prosp</span>.<span class="property">history</span>.<span class="title function_">replace</span>()</span><br><span class="line">		-<span class="variable language_">this</span>.<span class="property">prosp</span>.<span class="property">history</span>.<span class="title function_">goBack</span>()</span><br><span class="line">		-<span class="variable language_">this</span>.<span class="property">prosp</span>.<span class="property">history</span>.<span class="title function_">goForward</span>()</span><br><span class="line">		-<span class="variable language_">this</span>.<span class="property">prosp</span>.<span class="property">history</span>.<span class="title function_">go</span>()</span><br></pre></td></tr></table></figure>



<h3 id="BrowserRouterä¸HashRouterçš„åŒºåˆ«"><a href="#BrowserRouterä¸HashRouterçš„åŒºåˆ«" class="headerlink" title="BrowserRouterä¸HashRouterçš„åŒºåˆ«"></a>BrowserRouterä¸HashRouterçš„åŒºåˆ«</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>åº•å±‚åŸç†ä¸ä¸€æ ·ï¼š</span><br><span class="line">			<span class="title class_">BrowserRouter</span>ä½¿ç”¨çš„æ˜¯<span class="variable constant_">H5</span>çš„history <span class="variable constant_">API</span>ï¼Œä¸å…¼å®¹<span class="title class_">IE9</span>åŠä»¥ä¸‹ç‰ˆæœ¬ã€‚</span><br><span class="line">			<span class="title class_">HashRouter</span>ä½¿ç”¨çš„æ˜¯<span class="variable constant_">URL</span>çš„å“ˆå¸Œå€¼ã€‚</span><br><span class="line"><span class="number">2.</span>pathè¡¨ç°å½¢å¼ä¸ä¸€æ ·</span><br><span class="line">			<span class="title class_">BrowserRouter</span>çš„è·¯å¾„ä¸­æ²¡æœ‰#,ä¾‹å¦‚ï¼š<span class="attr">localhost</span>:<span class="number">3000</span>/demo/test</span><br><span class="line">			<span class="title class_">HashRouter</span>çš„è·¯å¾„åŒ…å«#,ä¾‹å¦‚ï¼š<span class="attr">localhost</span>:<span class="number">3000</span>/#/demo/test</span><br><span class="line"><span class="number">3.</span>åˆ·æ–°åå¯¹è·¯ç”±stateå‚æ•°çš„å½±å“</span><br><span class="line">			(<span class="number">1</span>).<span class="property">BrowserRouter</span>æ²¡æœ‰ä»»ä½•å½±å“ï¼Œå› ä¸ºstateä¿å­˜åœ¨historyå¯¹è±¡ä¸­ã€‚</span><br><span class="line">			(<span class="number">2</span>).<span class="property">HashRouter</span>åˆ·æ–°åä¼šå¯¼è‡´è·¯ç”±stateå‚æ•°çš„ä¸¢å¤±ï¼ï¼ï¼</span><br><span class="line"><span class="number">4.</span>å¤‡æ³¨ï¼š<span class="title class_">HashRouter</span>å¯ä»¥ç”¨äºè§£å†³ä¸€äº›è·¯å¾„é”™è¯¯ç›¸å…³çš„é—®é¢˜ã€‚</span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2>]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>Promise</title>
    <url>/2021/09/11/Promise/</url>
    <content><![CDATA[<h3 id="å¼•è¨€ï¼š"><a href="#å¼•è¨€ï¼š" class="headerlink" title="å¼•è¨€ï¼š"></a>å¼•è¨€ï¼š</h3><p>æ„Ÿè§‰promiseçš„æ€æƒ³éå¸¸æœ‰æ„æ€ï¼Œä¸ºäº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æä¾›äº†ä¸€ç§æ–°çš„å¼‚æ­¥ç¼–ç¨‹æ–¹æ³•ï¼Œæ¥è§¦äº†ä¸€æ®µæ—¶é—´çš„å·¥ç¨‹ä»£ç ä¹Ÿè®©æˆ‘ä½“ä¼šåˆ°ä»£ç å¯ç»´æŠ¤ï¼Œå¯æ‹“å±•çš„å¿…è¦æ€§ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆè¦ç”¨Promiseï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨Promiseï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨Promiseï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨Promiseï¼Ÿ</h3><p>å¯¹äºå¼‚æ­¥æ“ä½œï¼Œä¾‹å¦‚æ–‡ä»¶è¯»å–</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<span id="more"></span>


<p>è¾“å‡ºç»“æœï¼š</p>
<p><img src="/../assets/image-20210324010746141.png" alt="image-20210324010746141"></p>
<p>ç”±äºè¯»å–æ–‡ä»¶ä¸ºå¼‚æ­¥æ“ä½œï¼Œè¾“å‡ºçš„ç»“æœä¸ç¡®å®šã€‚</p>
<p>ä¸ºäº†a -&gt; b -&gt; cä¾æ¬¡è¯»å–æ–‡ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./src/a.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./src/b.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="keyword">throw</span> err;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">        fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./src/c.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="keyword">throw</span> err;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å›è°ƒå‡½æ•°åµŒå¥—å›è°ƒå‡½æ•°ï¼Œå¯¼è‡´äº†å›è°ƒåœ°ç‹±ï¼Œå¸¦æ¥çš„é—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œä¸ä¾¿äºç»´æŠ¤ï¼Œé˜…è¯»ï¼Œå¼‚å¸¸å¤„ç†ã€‚</p>
<p>ä½¿ç”¨promiseï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myReadFile</span>(<span class="params">url</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.<span class="title function_">readFile</span>(url, <span class="string">&#x27;utf-8&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="title function_">reject</span>(err);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">resolve</span>(data);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">myReadFile</span>(<span class="string">&#x27;./a.txt&#x27;</span>)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">myReadFile</span>(<span class="string">&#x27;./b.txt&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">myReadFile</span>(<span class="string">&#x27;./c.txt&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">reason</span>=&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reason&#x27;</span>, reason);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ç”±äºå¼‚å¸¸ç©¿é€ï¼Œå¼‚å¸¸åªéœ€è¦åœ¨æœ€åæ•è·ï¼Œä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ä¹Ÿæ›´é«˜ï¼Œè§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚</p>
<h3 id="Promiseçš„å·¥ä½œæµç¨‹"><a href="#Promiseçš„å·¥ä½œæµç¨‹" class="headerlink" title="Promiseçš„å·¥ä½œæµç¨‹"></a>Promiseçš„å·¥ä½œæµç¨‹</h3><p><img src="/../assets/image-20210321164956018.png" alt="image-20210321164956018"></p>
<h3 id="å¦‚ä½•æ”¹å˜promiseå¯¹è±¡çš„çŠ¶æ€ï¼Ÿ"><a href="#å¦‚ä½•æ”¹å˜promiseå¯¹è±¡çš„çŠ¶æ€ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ”¹å˜promiseå¯¹è±¡çš„çŠ¶æ€ï¼Ÿ"></a>å¦‚ä½•æ”¹å˜promiseå¯¹è±¡çš„çŠ¶æ€ï¼Ÿ</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//1. resolve å‡½æ•°</span></span><br><span class="line">    <span class="comment">// resolve(&#x27;&#x27;); // pending   =&gt; fulfilled (resolved)</span></span><br><span class="line">    <span class="comment">//2. reject å‡½æ•°</span></span><br><span class="line">    <span class="comment">// reject(&quot;&quot;);// pending  =&gt;  rejected </span></span><br><span class="line">    <span class="comment">//3. æŠ›å‡ºé”™è¯¯</span></span><br><span class="line">    <span class="comment">//throw &#x27;å‡ºé—®é¢˜äº†&#x27;;// pending  =&gt;  rejected</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>Promiseå¯¹è±¡åˆå§‹çŠ¶æ€</li>
</ul>
<p><img src="/../assets/image-20210321172121084.png" alt="image-20210321172121084"></p>
<ul>
<li>Promiseå¯¹è±¡æˆåŠŸçŠ¶æ€</li>
</ul>
<p><img src="/../assets/image-20210322004628047.png" alt="image-20210322004628047"></p>
<ul>
<li>Promiseå¯¹è±¡å¤±è´¥çŠ¶æ€</li>
</ul>
<p><img src="/../assets/image-20210322004718603.png" alt="image-20210322004718603"></p>
<h3 id="Promise-Api"><a href="#Promise-Api" class="headerlink" title="Promise Api"></a>Promise Api</h3><h4 id="Promise-prototype-then"><a href="#Promise-prototype-then" class="headerlink" title="Promise.prototype.then"></a>Promise.prototype.then</h4><figure class="highlight plaintext"><figcaption><span>æ–¹æ³•è¿”å›ä¸€ä¸ª ```Promise```ã€‚å®ƒæœ€å¤šéœ€è¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼šPromise çš„æˆåŠŸå’Œå¤±è´¥æƒ…å†µçš„å›è°ƒå‡½æ•°ã€‚</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">##### Promise.prototype.then()è¿”å›çš„æ–° promise çš„ç»“æœçŠ¶æ€ç”±ä»€ä¹ˆå†³å®š?</span><br><span class="line"></span><br><span class="line">â€‹       **ç”± then()æŒ‡å®šçš„å›è°ƒå‡½æ•°æ‰§è¡Œçš„ç»“æœå†³å®š**</span><br><span class="line"></span><br><span class="line">1. å¦‚æœæŠ›å‡ºå¼‚å¸¸, æ–° promise å˜ä¸º rejected, *[[PromiseResult]]*ä¸ºæŠ›å‡ºçš„å¼‚å¸¸ </span><br><span class="line"></span><br><span class="line">2. å¦‚æœè¿”å›çš„æ˜¯é promise çš„ä»»æ„å€¼, æˆ–è€…æ²¡æœ‰è¿”å›å€¼ï¼ˆç›¸å½“äºè¿”å›undefinedï¼‰ï¼Œæ–° promise å˜ä¸º resolved, *[[PromiseResult]]*ä¸ºè¿”å›çš„å€¼ </span><br><span class="line"></span><br><span class="line">3. ***å¦‚æœè¿”å›çš„æ˜¯å¦ä¸€ä¸ªæ–° promise, æ­¤promiseçš„çŠ¶æ€æˆä¸ºæ–°promiseçš„çŠ¶æ€ï¼Œæ­¤ promise çš„[[PromiseResult]]å°±ä¼šæˆä¸ºæ–° promise çš„[[PromiseResult]]***</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">let result = p.then(value =&gt; &#123;</span><br><span class="line">    // console.log(value);</span><br><span class="line">    //1. æŠ›å‡ºé”™è¯¯</span><br><span class="line">    // throw &#x27;å‡ºäº†é—®é¢˜&#x27;;</span><br><span class="line">    //2. è¿”å›ç»“æœæ˜¯é Promise ç±»å‹çš„å¯¹è±¡</span><br><span class="line">    // return 521;</span><br><span class="line">    //3. è¿”å›ç»“æœæ˜¯ Promise å¯¹è±¡</span><br><span class="line">    // return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    //     // resolve(&#x27;success&#x27;);</span><br><span class="line">    //     reject(&#x27;error&#x27;);</span><br><span class="line">    // &#125;);</span><br><span class="line">&#125;, reason =&gt; &#123;</span><br><span class="line">    console.warn(reason);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="thençš„é“¾å¼è°ƒç”¨"><a href="#thençš„é“¾å¼è°ƒç”¨" class="headerlink" title="thençš„é“¾å¼è°ƒç”¨"></a>thençš„é“¾å¼è°ƒç”¨</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&#x27;OK&#x27;</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// é“¾å¼è°ƒç”¨</span></span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);<span class="comment">//è¾“å‡ºundefineï¼ŒåŸå› ï¼šä¸Šä¸€æ¬¡çš„thenæ–¹æ³•è¿”å›å€¼ä¸ºundefineï¼Œæ‰€ä»¥ä¸Šä¸€æ¬¡è¿”å›ä¸€ä¸ªå‚æ•°ä¸ºundefineï¼ŒçŠ¶æ€ä¸ºresolveçš„promiseå¯¹è±¡</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="Promise-resolve"><a href="#Promise-resolve" class="headerlink" title="Promise.resolve"></a>Promise.resolve</h4><ul>
<li>å¦‚æœä¼ å…¥çš„å‚æ•°ä¸º éPromiseç±»å‹çš„å¯¹è±¡, åˆ™è¿”å›çš„ç»“æœä¸ºæˆåŠŸpromiseå¯¹è±¡</li>
<li>å¦‚æœä¼ å…¥çš„å‚æ•°ä¸º Promise å¯¹è±¡, åˆ™å‚æ•°çš„ç»“æœå†³å®šäº† resolve çš„ç»“æœ</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">521</span>);</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// resolve(&#x27;OK&#x27;);</span></span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&#x27;Error&#x27;</span>);</span><br><span class="line">&#125;));</span><br><span class="line"><span class="comment">// console.log(p2);</span></span><br><span class="line">p2.<span class="title function_">catch</span>(<span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise.reject"></a>Promise.reject</h4><p>Promise.reject(reason)æ–¹æ³•è¿”å›ä¸€ä¸ªå¤±è´¥çš„promiseå¯¹è±¡ï¼ˆæ— è®ºreasonæ˜¯ä»€ä¹ˆï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p3 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&#x27;OK&#x27;</span>);</span><br><span class="line">&#125;));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p3);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<p><img src="/../assets/image-20210321171102762.png" alt="image-20210321171102762"></p>
<h4 id="Promise-prototype-catch"><a href="#Promise-prototype-catch" class="headerlink" title="Promise.prototype.catch"></a>Promise.prototype.catch</h4><p><strong>catch()</strong> æ–¹æ³•è¿”å›ä¸€ä¸ªPromiseï¼Œåªå¤„ç†æ‹’ç»çš„æƒ…å†µã€‚å®ƒçš„è¡Œä¸ºä¸è°ƒç”¨<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/then"><code>Promise.prototype.then(undefined, onRejected)</code></a>ç›¸åŒã€‚</p>
<h3 id="Promiseå…³é”®é—®é¢˜"><a href="#Promiseå…³é”®é—®é¢˜" class="headerlink" title="Promiseå…³é”®é—®é¢˜"></a>Promiseå…³é”®é—®é¢˜</h3><h4 id="Promiseå¯ä»¥æ‰§è¡Œå¤šä¸ªæˆåŠŸ-å¤±è´¥çš„å›è°ƒ"><a href="#Promiseå¯ä»¥æ‰§è¡Œå¤šä¸ªæˆåŠŸ-å¤±è´¥çš„å›è°ƒ" class="headerlink" title="Promiseå¯ä»¥æ‰§è¡Œå¤šä¸ªæˆåŠŸ&#x2F;å¤±è´¥çš„å›è°ƒ"></a>Promiseå¯ä»¥æ‰§è¡Œå¤šä¸ªæˆåŠŸ&#x2F;å¤±è´¥çš„å›è°ƒ</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&#x27;OK&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">///æŒ‡å®šå›è°ƒ - 1</span></span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//æŒ‡å®šå›è°ƒ - 2</span></span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">alert</span>(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="å¼‚å¸¸ç©¿é€"><a href="#å¼‚å¸¸ç©¿é€" class="headerlink" title="å¼‚å¸¸ç©¿é€"></a>å¼‚å¸¸ç©¿é€</h4><ol>
<li><p>å½“ä½¿ç”¨ promise çš„ then é“¾å¼è°ƒç”¨æ—¶, å¯ä»¥åœ¨æœ€åæŒ‡å®šå¤±è´¥çš„å›è°ƒã€‚</p>
</li>
<li><p>å‰é¢ä»»ä½•æ“ä½œå‡ºäº†å¼‚å¸¸, éƒ½ä¼šä¼ åˆ°æœ€åå¤±è´¥çš„å›è°ƒä¸­å¤„ç†</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//resolve(&#x27;OK&#x27;);</span></span><br><span class="line">        <span class="title function_">reject</span>(<span class="string">&#x27;Err&#x27;</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(111);</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&#x27;å¤±è´¥å•¦!&#x27;</span>;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">222</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">333</span>);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(reason); <span class="comment">// å¦‚æœå‰é¢thenæœ‰è®¾ç½®å¤±è´¥çš„å›è°ƒï¼Œåˆ™ä¼šåœ¨å‰é¢å°±è¢«æ•è·</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hyz&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// Err</span></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// hyz</span></span><br></pre></td></tr></table></figure>

<h4 id="å¦‚ä½•ä¸­æ–­Promiseé“¾ï¼Ÿ"><a href="#å¦‚ä½•ä¸­æ–­Promiseé“¾ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¸­æ–­Promiseé“¾ï¼Ÿ"></a>å¦‚ä½•ä¸­æ–­Promiseé“¾ï¼Ÿ</h4><p>æ·»åŠ ä¸€ä¸ªpenddingçŠ¶æ€çš„promise</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">111</span>);</span><br><span class="line">    <span class="comment">//æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ–¹å¼</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">() =&gt;</span> &#123;&#125;);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">222</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">333</span>);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(reason);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Asyncä¸Await"><a href="#Asyncä¸Await" class="headerlink" title="Asyncä¸Await"></a>Asyncä¸Await</h3><p>Async&#x2F;Await æ˜¯jså¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆ</p>
<h4 id="Asyncå‡½æ•°"><a href="#Asyncå‡½æ•°" class="headerlink" title="Asyncå‡½æ•°"></a>Asyncå‡½æ•°</h4><p>è¿”å›å€¼è§„åˆ™ä¸Promise.prototype.then()ç›¸åŒ</p>
<ul>
<li>å‡½æ•°çš„è¿”å›å€¼ä¸º promise å¯¹è±¡</li>
<li>promise å¯¹è±¡çš„ç»“æœç”± async å‡½æ•°æ‰§è¡Œçš„è¿”å›å€¼å†³å®š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//1. å¦‚æœè¿”å›å€¼æ˜¯ä¸€ä¸ªéPromiseç±»å‹çš„æ•°æ®</span></span><br><span class="line">    <span class="comment">// return 521;</span></span><br><span class="line">    <span class="comment">//2. å¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// return new Promise((resolve, reject) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//     // resolve(&#x27;OK&#x27;);</span></span><br><span class="line">    <span class="comment">//     reject(&#x27;Error&#x27;);</span></span><br><span class="line">    <span class="comment">// &#125;);</span></span><br><span class="line">    <span class="comment">//3. æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&quot;Oh NO&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Awaitè¡¨è¾¾å¼"><a href="#Awaitè¡¨è¾¾å¼" class="headerlink" title="Awaitè¡¨è¾¾å¼"></a>Awaitè¡¨è¾¾å¼</h4><ul>
<li>await å³ä¾§çš„è¡¨è¾¾å¼ä¸€èˆ¬ä¸º promise å¯¹è±¡, ä½†ä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒçš„å€¼</li>
<li>å¦‚æœè¡¨è¾¾å¼æ˜¯ promise å¯¹è±¡, await è¿”å›çš„æ˜¯ promise æˆåŠŸçš„å€¼([[PromiseResult]])</li>
<li>å¦‚æœè¡¨è¾¾å¼æ˜¯å…¶å®ƒå€¼, ç›´æ¥å°†æ­¤å€¼ä½œä¸º await çš„è¿”å›å€¼</li>
</ul>
<h4 id="mentoonï¼š"><a href="#mentoonï¼š" class="headerlink" title="mentoonï¼š"></a>mentoonï¼š</h4><ol>
<li>await å¿…é¡»å†™åœ¨ async å‡½æ•°ä¸­, ä½† async å‡½æ•°ä¸­å¯ä»¥æ²¡æœ‰ await</li>
<li>å¦‚æœ await çš„ promise å¤±è´¥äº†, å°±ä¼šæŠ›å‡ºå¼‚å¸¸, éœ€è¦é€šè¿‡ tryâ€¦catch æ•è·å¤„ç†</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// resolve(&#x27;OK&#x27;);</span></span><br><span class="line">        <span class="title function_">reject</span>(<span class="string">&#x27;Error&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//1. å³ä¾§ä¸ºpromiseçš„æƒ…å†µ</span></span><br><span class="line">    <span class="comment">// let res = await p;</span></span><br><span class="line">    <span class="comment">//2. å³ä¾§ä¸ºå…¶ä»–ç±»å‹çš„æ•°æ®</span></span><br><span class="line">    <span class="comment">// let res2 = await 20;</span></span><br><span class="line">    <span class="comment">//3. å¦‚æœpromiseæ˜¯å¤±è´¥çš„çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> res3 = <span class="keyword">await</span> p;</span><br><span class="line">    &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">main</span>();</span><br></pre></td></tr></table></figure>

<h3 id="å®è·µï¼š"><a href="#å®è·µï¼š" class="headerlink" title="å®è·µï¼š"></a>å®è·µï¼š</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./resource/1.html&#x27;</span>, <span class="function">(<span class="params">err, data1</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./resource/2.html&#x27;</span>, <span class="function">(<span class="params">err, data2</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">        fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./resource/3.html&#x27;</span>, <span class="function">(<span class="params">err, data3</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(data1 + data2 + data3);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//async ä¸ await</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="comment">//è¯»å–ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line">        <span class="keyword">let</span> data1 = <span class="keyword">await</span> <span class="title function_">mineReadFile</span>(<span class="string">&#x27;./resource/1x.html&#x27;</span>);</span><br><span class="line">        <span class="keyword">let</span> data2 = <span class="keyword">await</span> <span class="title function_">mineReadFile</span>(<span class="string">&#x27;./resource/2.html&#x27;</span>);</span><br><span class="line">        <span class="keyword">let</span> data3 = <span class="keyword">await</span> <span class="title function_">mineReadFile</span>(<span class="string">&#x27;./resource/3.html&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data1 + data2 + data3);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">code</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="async-await-å°è£…ajax"><a href="#async-await-å°è£…ajax" class="headerlink" title="async await å°è£…ajax"></a>async await å°è£…ajax</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>ç‚¹å‡»è·å–æ®µå­<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//axios</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">sendAJAX</span>(<span class="params">url</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="property">responseType</span> = <span class="string">&#x27;json&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, url);</span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//å¤„ç†ç»“æœ</span></span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(xhr.<span class="property">readyState</span> === <span class="number">4</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//åˆ¤æ–­æˆåŠŸ</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//æˆåŠŸçš„ç»“æœ</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">resolve</span>(xhr.<span class="property">response</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">reject</span>(xhr.<span class="property">status</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ®µå­æ¥å£åœ°å€ https://api.apiopen.top/getJoke</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#btn&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//è·å–æ®µå­ä¿¡æ¯</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> duanzi = <span class="keyword">await</span> <span class="title function_">sendAJAX</span>(<span class="string">&#x27;https://api.apiopen.top/getJoke&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(duanzi);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 start&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">async2</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 end&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async2&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script start&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;setTimeout&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">async1</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise1&#x27;</span>)</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise2&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script end&#x27;</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>React</title>
    <url>/2021/09/27/React/</url>
    <content><![CDATA[<p>Reactç”¨äºç¼–å†™SPAï¼ˆå•é¡µåº”ç”¨ï¼‰</p>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><h4 id="å›è°ƒå½¢å¼Refè°ƒç”¨æ¬¡æ•°"><a href="#å›è°ƒå½¢å¼Refè°ƒç”¨æ¬¡æ•°" class="headerlink" title="å›è°ƒå½¢å¼Refè°ƒç”¨æ¬¡æ•°"></a>å›è°ƒå½¢å¼Refè°ƒç”¨æ¬¡æ•°</h4><p>å¦‚æœ <code>ref</code> å›è°ƒå‡½æ•°æ˜¯ä»¥å†…è”å‡½æ•°çš„æ–¹å¼å®šä¹‰</p>
<p>ä¾‹å¦‚ï¼š</p>
<p><code>&lt;input ref=&#123;(c)=&gt;&#123;this.input1 = c;console.log(&#39;@&#39;,c);&#125;&#125; type=&quot;text&quot;/&gt;</code></p>
<p>åœ¨æ›´æ–°è¿‡ç¨‹ä¸­å®ƒä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡ä¼ å…¥å‚æ•° <code>null</code>ï¼Œç„¶åç¬¬äºŒæ¬¡ä¼šä¼ å…¥å‚æ•° DOM å…ƒç´ ã€‚è¿™æ˜¯å› ä¸ºåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°å®ä¾‹ï¼Œæ‰€ä»¥ React æ¸…ç©ºæ—§çš„ ref å¹¶ä¸”è®¾ç½®æ–°çš„ã€‚é€šè¿‡å°† ref çš„å›è°ƒå‡½æ•°å®šä¹‰æˆ class çš„ç»‘å®šå‡½æ•°çš„æ–¹å¼å¯ä»¥é¿å…ä¸Šè¿°é—®é¢˜ï¼Œä½†æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹å®ƒæ˜¯æ— å…³ç´§è¦çš„ã€‚</p>
<h4 id="createRefåˆ›å»ºrefå®¹å™¨"><a href="#createRefåˆ›å»ºrefå®¹å™¨" class="headerlink" title="createRefåˆ›å»ºrefå®¹å™¨"></a>createRefåˆ›å»ºrefå®¹å™¨</h4><p>React.createRefè°ƒç”¨åå¯ä»¥è¿”å›ä¸€ä¸ªå®¹å™¨ï¼Œè¯¥å®¹å™¨å¯ä»¥å­˜å‚¨è¢«refæ‰€æ ‡è¯†çš„èŠ‚ç‚¹,è¯¥å®¹å™¨æ˜¯â€œä¸“äººä¸“ç”¨â€çš„</p>
<p><code>myRef = React.createRef()</code></p>
<p><code>&lt;input ref = &#123;this.myRef&#125;/&gt;</code></p>
<span id="more"></span>

<h2 id="Reactäº‹ä»¶å¤„ç†"><a href="#Reactäº‹ä»¶å¤„ç†" class="headerlink" title="Reactäº‹ä»¶å¤„ç†"></a>Reactäº‹ä»¶å¤„ç†</h2><ol>
<li>é€šè¿‡onXxxå±æ€§æŒ‡å®šäº‹ä»¶å¤„ç†å‡½æ•°(æ³¨æ„å¤§å°å†™)</li>
</ol>
<p> a.Reactä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰(åˆæˆ)äº‹ä»¶, è€Œä¸æ˜¯ä½¿ç”¨çš„åŸç”ŸDOMäº‹ä»¶ â€”â€” ä¸ºäº†æ›´å¥½çš„å…¼å®¹æ€§</p>
<p> b.Reactä¸­çš„äº‹ä»¶æ˜¯é€šè¿‡äº‹ä»¶å§”æ‰˜æ–¹å¼å¤„ç†çš„(å§”æ‰˜ç»™ç»„ä»¶æœ€å¤–å±‚çš„å…ƒç´ )â€”â€”ä¸ºäº†çš„é«˜æ•ˆ</p>
<ol start="2">
<li>é€šè¿‡event.targetå¾—åˆ°å‘ç”Ÿäº‹ä»¶çš„DOMå…ƒç´ å¯¹è±¡â€”â€”ä¸è¦è¿‡åº¦ä½¿ç”¨ref</li>
</ol>
<h2 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h2><ol>
<li><p>è‹¥Aå‡½æ•°ï¼Œæ¥æ”¶çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆAå°±å¯ä»¥ç§°ä¹‹ä¸ºé«˜é˜¶å‡½æ•°ã€‚</p>
</li>
<li><p>è‹¥Aå‡½æ•°ï¼Œè°ƒç”¨çš„è¿”å›å€¼ä¾ç„¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆAå°±å¯ä»¥ç§°ä¹‹ä¸ºé«˜é˜¶å‡½æ•°ã€‚</p>
</li>
</ol>
<p>  å¸¸è§çš„é«˜é˜¶å‡½æ•°æœ‰ï¼šPromiseã€setTimeoutã€arr.map()ç­‰ç­‰</p>
<h4 id="å‡½æ•°çš„æŸ¯é‡ŒåŒ–ï¼š"><a href="#å‡½æ•°çš„æŸ¯é‡ŒåŒ–ï¼š" class="headerlink" title="å‡½æ•°çš„æŸ¯é‡ŒåŒ–ï¼š"></a>å‡½æ•°çš„æŸ¯é‡ŒåŒ–ï¼š</h4><p>é€šè¿‡å‡½æ•°è°ƒç”¨ç»§ç»­è¿”å›å‡½æ•°çš„æ–¹å¼ï¼Œå®ç°å¤šæ¬¡æ¥æ”¶å‚æ•°æœ€åç»Ÿä¸€å¤„ç†çš„å‡½æ•°ç¼–ç å½¢å¼ã€‚ </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function">(<span class="params">b</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="function">(<span class="params">c</span>) =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> a + b + c</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> res = <span class="title function_">sum</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<p>é«˜é˜¶å‡½æ•°ç”¨ä¾‹(ç»Ÿä¸€å‡½æ•°ç¼–ç å½¢å¼ï¼Œusername,passwordå‡½æ•°ç»Ÿä¸€å†™ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class Login extends React.Component&#123;</span><br><span class="line">	//åˆå§‹åŒ–çŠ¶æ€</span><br><span class="line">	state = &#123;</span><br><span class="line">		username:&#x27;&#x27;, //ç”¨æˆ·å</span><br><span class="line">		password:&#x27;&#x27; //å¯†ç </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//ä¿å­˜è¡¨å•æ•°æ®åˆ°çŠ¶æ€ä¸­</span><br><span class="line">	saveFormData = (dataType)=&gt;&#123;</span><br><span class="line">		return (event)=&gt;&#123;</span><br><span class="line">			this.setState(&#123;[dataType]:event.target.value&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//è¡¨å•æäº¤çš„å›è°ƒ</span><br><span class="line">	handleSubmit = (event)=&gt;&#123;</span><br><span class="line">		event.preventDefault() //é˜»æ­¢è¡¨å•æäº¤</span><br><span class="line">		const &#123;username,password&#125; = this.state</span><br><span class="line">		alert(`ä½ è¾“å…¥çš„ç”¨æˆ·åæ˜¯ï¼š$&#123;username&#125;,ä½ è¾“å…¥çš„å¯†ç æ˜¯ï¼š$&#123;password&#125;`)</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		return(</span><br><span class="line">			&lt;form onSubmit=&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">          ç”¨æˆ·åï¼š&lt;input onChange=&#123;this.saveFormData(&#x27;username&#x27;)&#125; type=&quot;text&quot; name=&quot;username&quot;/&gt;</span><br><span class="line">				å¯†ç ï¼š&lt;input onChange=&#123;this.saveFormData(&#x27;password&#x27;)&#125; type=&quot;password&quot; name=&quot;password&quot;/&gt;</span><br><span class="line">				&lt;button&gt;ç™»å½•&lt;/button&gt;</span><br><span class="line">			&lt;/form&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ç”¨æŸ¯é‡ŒåŒ–å®ç°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input onChange=&#123;event =&gt; this.saveFormData(&#x27;username&#x27;,event) &#125; type=&quot;text&quot; name=&quot;username&quot;/&gt;</span><br><span class="line">&lt;input onChange=&#123;event =&gt; this.saveFormData(&#x27;password&#x27;,event) &#125; type=&quot;password&quot; name=&quot;password&quot;/&gt;</span><br></pre></td></tr></table></figure>



<h2 id="Reactç”Ÿå‘½å‘¨æœŸ"><a href="#Reactç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Reactç”Ÿå‘½å‘¨æœŸ"></a>Reactç”Ÿå‘½å‘¨æœŸ</h2><p>æ—§ç‰ˆæœ¬ï¼š</p>
<p><img src="/../assets/image-20210504015401966.png" alt="image-20210504015401966"></p>
<p>â€‹    <strong>1.</strong> <strong>åˆå§‹åŒ–é˜¶æ®µ:</strong> ç”±ReactDOM.render()è§¦å‘â€”åˆæ¬¡æ¸²æŸ“</p>
<ul>
<li><p><code> constructor()</code></p>
</li>
<li><p><code>componentWillMount()</code></p>
</li>
<li><p><code>render()</code></p>
</li>
<li><p><code>componentDidMount()</code></p>
</li>
</ul>
<p>â€‹    <strong>2.</strong> <strong>æ›´æ–°é˜¶æ®µ:</strong> ç”±ç»„ä»¶å†…éƒ¨this.setSate()æˆ–çˆ¶ç»„ä»¶é‡æ–°renderè§¦å‘</p>
<ul>
<li><p><code>shouldComponentUpdate()</code></p>
</li>
<li><p><code>componentWillUpdate()</code></p>
</li>
<li><p><code>render()</code></p>
</li>
<li><p><code>componentDidUpdate()</code></p>
</li>
</ul>
<p>â€‹    <strong>3.</strong> <strong>å¸è½½ç»„ä»¶:</strong> ç”±<code>ReactDOM.unmountComponentAtNode()</code>è§¦å‘</p>
<ul>
<li><code>componentWillUnmount()</code></li>
</ul>
<p>ä¸æƒ³å¯¹çŠ¶æ€æ›´æ”¹ä¹Ÿæƒ³æ›´æ–° â€“ <code>forceUpdate()</code>(ä¸å—é˜€é—¨shouldComponentUpdateæ§åˆ¶)</p>
<p>componentWillReceivePropsï¼šç»„ä»¶å°†è¦æ¥æ”¶æ–°çš„propsï¼Œç¬¬ä¸€æ¬¡ä¼ å…¥propsä¸ä¼šè°ƒç”¨ï¼Œå®é™…ä¸Šé’©å­åå­—ä¸ºcomponentWillReceiveNewProps</p>
<p>æ–°ç‰ˆæœ¬ï¼š</p>
<p><img src="/../assets/image-20210504015321638.png" alt="image-20210504015321638"></p>
<h2 id="DOMçš„Diffingç®—æ³•"><a href="#DOMçš„Diffingç®—æ³•" class="headerlink" title="DOMçš„Diffingç®—æ³•"></a>DOMçš„Diffingç®—æ³•</h2><p><img src="/../assets/image-20210504231622840.png" alt="image-20210504231622840"></p>
<ol>
<li><p>react&#x2F;vueä¸­çš„keyæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿï¼ˆkeyçš„å†…éƒ¨åŸç†æ˜¯ä»€ä¹ˆï¼Ÿï¼‰</p>
<p>è™šæ‹ŸDOMä¸­keyçš„ä½œç”¨ï¼š</p>
</li>
</ol>
<ul>
<li><p>ç®€å•çš„è¯´: keyæ˜¯è™šæ‹ŸDOMå¯¹è±¡çš„æ ‡è¯†, åœ¨æ›´æ–°æ˜¾ç¤ºæ—¶keyèµ·ç€æå…¶é‡è¦çš„ä½œç”¨ã€‚</p>
</li>
<li><p>è¯¦ç»†çš„è¯´: å½“çŠ¶æ€ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œreactä¼šæ ¹æ®ã€æ–°æ•°æ®ã€‘ç”Ÿæˆã€æ–°çš„è™šæ‹ŸDOMã€‘,</p>
</li>
</ul>
<p>â€‹       éšåReactè¿›è¡Œã€æ–°è™šæ‹ŸDOMã€‘ä¸ã€æ—§è™šæ‹ŸDOMã€‘çš„diffæ¯”è¾ƒï¼Œæ¯”è¾ƒè§„åˆ™å¦‚ä¸‹ï¼š</p>
<p>â€‹      a. æ—§è™šæ‹ŸDOMä¸­æ‰¾åˆ°äº†ä¸æ–°è™šæ‹ŸDOMç›¸åŒçš„keyï¼š</p>
<p>â€‹          è‹¥è™šæ‹ŸDOMä¸­å†…å®¹æ²¡å˜, ç›´æ¥ä½¿ç”¨ä¹‹å‰çš„çœŸå®DOM </p>
<p>â€‹          è‹¥è™šæ‹ŸDOMä¸­å†…å®¹å˜äº†, åˆ™ç”Ÿæˆæ–°çš„çœŸå®DOMï¼Œéšåæ›¿æ¢æ‰é¡µé¢ä¸­ä¹‹å‰çš„çœŸå®DOM</p>
<p>â€‹      b. æ—§è™šæ‹ŸDOMä¸­æœªæ‰¾åˆ°ä¸æ–°è™šæ‹ŸDOMç›¸åŒçš„key</p>
<p>â€‹          æ ¹æ®æ•°æ®åˆ›å»ºæ–°çš„çœŸå®DOMï¼Œéšåæ¸²æŸ“åˆ°åˆ°é¡µé¢</p>
<ol start="2">
<li>ä¸ºä»€ä¹ˆéå†åˆ—è¡¨æ—¶ï¼Œkeyæœ€å¥½ä¸è¦ç”¨index?</li>
</ol>
<p>â€‹      ç”¨indexä½œä¸ºkeyå¯èƒ½ä¼šå¼•å‘çš„é—®é¢˜ï¼š</p>
<ul>
<li>è‹¥å¯¹æ•°æ®è¿›è¡Œï¼šé€†åºæ·»åŠ ã€é€†åºåˆ é™¤ç­‰ç ´åé¡ºåºæ“ä½œ:</li>
</ul>
<p>â€‹       ä¼šäº§ç”Ÿæ²¡æœ‰å¿…è¦çš„çœŸå®DOMæ›´æ–° &#x3D;&#x3D;&gt; ç•Œé¢æ•ˆæœæ²¡é—®é¢˜, ä½†æ•ˆç‡ä½ã€‚</p>
<ul>
<li>å¦‚æœç»“æ„ä¸­è¿˜åŒ…å«è¾“å…¥ç±»çš„DOMï¼š</li>
</ul>
<p>â€‹        ä¼šäº§ç”Ÿé”™è¯¯DOMæ›´æ–° &#x3D;&#x3D;&gt; ç•Œé¢æœ‰é—®é¢˜ã€‚</p>
<ul>
<li>å¦‚æœä¸å­˜åœ¨å¯¹æ•°æ®çš„é€†åºæ·»åŠ ã€é€†åºåˆ é™¤ç­‰ç ´åé¡ºåºæ“ä½œï¼Œ</li>
</ul>
<p>â€‹      ä»…ç”¨äºæ¸²æŸ“åˆ—è¡¨ç”¨äºå±•ç¤ºï¼Œä½¿ç”¨indexä½œä¸ºkeyæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p>
<p>â€‹                  </p>
<ol start="3">
<li>å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©key?:</li>
</ol>
<ul>
<li><p>æœ€å¥½ä½¿ç”¨æ¯æ¡æ•°æ®çš„å”¯ä¸€æ ‡è¯†ä½œä¸ºkey, æ¯”å¦‚idã€æ‰‹æœºå·ã€èº«ä»½è¯å·ã€å­¦å·ç­‰å”¯ä¸€å€¼ã€‚</p>
</li>
<li><p>å¦‚æœç¡®å®šåªæ˜¯ç®€å•çš„å±•ç¤ºæ•°æ®ï¼Œç”¨indexä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
</li>
</ul>
<h2 id="React-Staging"><a href="#React-Staging" class="headerlink" title="React-Staging"></a>React-Staging</h2><p>React-Stagingé¡¹ç›®ç»“æ„</p>
<p><img src="/../assets/image-20210505001602936.png" alt="image-20210505001602936"></p>
<h2 id="Reactæ‹“å±•"><a href="#Reactæ‹“å±•" class="headerlink" title="Reactæ‹“å±•"></a>Reactæ‹“å±•</h2><h2 id="1-setState"><a href="#1-setState" class="headerlink" title="1. setState"></a>1. setState</h2><h3 id="setStateæ›´æ–°çŠ¶æ€çš„2ç§å†™æ³•"><a href="#setStateæ›´æ–°çŠ¶æ€çš„2ç§å†™æ³•" class="headerlink" title="setStateæ›´æ–°çŠ¶æ€çš„2ç§å†™æ³•"></a>setStateæ›´æ–°çŠ¶æ€çš„2ç§å†™æ³•</h3><p>setStateè¿™ä¸ªåŠ¨ä½œå®é™…ä¸Šæ˜¯å¼‚æ­¥çš„ï¼ˆsetStateå‡½æ•°åœ¨jsä¸­åŒæ­¥æ‰§è¡Œï¼Œæ‰§è¡Œåreactå¼‚æ­¥æ›´æ–°ï¼‰ï¼Œæ‰€ä»¥æœ‰setStateç¬¬äºŒä¸ªå‚æ•°ï¼Œä¼ å…¥ä¸€ä¸ªå›è°ƒï¼Œå¼‚æ­¥æ›´æ–°åè°ƒç”¨ã€‚</p>
<ul>
<li><p>setState(stateChange, [callback])â€”â€”å¯¹è±¡å¼çš„setState</p>
<ol>
<li>stateChangeä¸ºçŠ¶æ€æ”¹å˜å¯¹è±¡(è¯¥å¯¹è±¡å¯ä»¥ä½“ç°å‡ºçŠ¶æ€çš„æ›´æ”¹)</li>
<li>callbackæ˜¯å¯é€‰çš„å›è°ƒå‡½æ•°, å®ƒåœ¨çŠ¶æ€æ›´æ–°å®Œæ¯•ã€ç•Œé¢ä¹Ÿæ›´æ–°å(renderè°ƒç”¨å)æ‰è¢«è°ƒç”¨</li>
</ol>
</li>
<li><p>setState(updater, [callback])â€”â€”å‡½æ•°å¼çš„setState</p>
<ol>
<li>updaterä¸ºè¿”å›stateChangeå¯¹è±¡çš„å‡½æ•°ã€‚</li>
<li>updaterå¯ä»¥æ¥æ”¶åˆ°stateå’Œpropsã€‚</li>
<li>callbackæ˜¯å¯é€‰çš„å›è°ƒå‡½æ•°, å®ƒåœ¨çŠ¶æ€æ›´æ–°ã€ç•Œé¢ä¹Ÿæ›´æ–°å(renderè°ƒç”¨å)æ‰è¢«è°ƒç”¨ã€‚</li>
</ol>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°å¼çš„setState</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>( <span class="function"><span class="params">state</span> =&gt;</span> ( &#123; <span class="attr">count</span>: state.<span class="property">count</span>+<span class="number">1</span> &#125; ) )</span><br></pre></td></tr></table></figure>



<hr/>



<h2 id="2-lazyLoad"><a href="#2-lazyLoad" class="headerlink" title="2. lazyLoad"></a>2. lazyLoad</h2><h3 id="è·¯ç”±ç»„ä»¶çš„lazyLoad"><a href="#è·¯ç”±ç»„ä»¶çš„lazyLoad" class="headerlink" title="è·¯ç”±ç»„ä»¶çš„lazyLoad"></a>è·¯ç”±ç»„ä»¶çš„lazyLoad</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1.é€šè¿‡Reactçš„lazyå‡½æ•°é…åˆimport()å‡½æ•°åŠ¨æ€åŠ è½½è·¯ç”±ç»„ä»¶ ===&gt; è·¯ç”±ç»„ä»¶ä»£ç ä¼šè¢«åˆ†å¼€æ‰“åŒ…</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Login</span> = <span class="title function_">lazy</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;@/pages/Login&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.é€šè¿‡&lt;Suspense&gt;æŒ‡å®šåœ¨åŠ è½½å¾—åˆ°è·¯ç”±æ‰“åŒ…æ–‡ä»¶å‰æ˜¾ç¤ºä¸€ä¸ªè‡ªå®šä¹‰loadingç•Œé¢</span></span><br><span class="line">&lt;<span class="title class_">Suspense</span> fallback=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>loading.....<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>&#125;&gt;</span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/xxx&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Xxxx&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">Redirect</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span></span><br><span class="line">   &lt;/<span class="title class_">Suspense</span>&gt;</span><br></pre></td></tr></table></figure>



<hr/>



<h2 id="3-Hooks"><a href="#3-Hooks" class="headerlink" title="3. Hooks"></a>3. Hooks</h2><h4 id="1-React-Hook-Hooksæ˜¯ä»€ä¹ˆ"><a href="#1-React-Hook-Hooksæ˜¯ä»€ä¹ˆ" class="headerlink" title="1. React Hook&#x2F;Hooksæ˜¯ä»€ä¹ˆ?"></a>1. React Hook&#x2F;Hooksæ˜¯ä»€ä¹ˆ?</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(1). Hookæ˜¯React 16.8.0ç‰ˆæœ¬å¢åŠ çš„æ–°ç‰¹æ€§/æ–°è¯­æ³•</span><br><span class="line">(2). å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§</span><br></pre></td></tr></table></figure>

<h4 id="2-ä¸‰ä¸ªå¸¸ç”¨çš„Hook"><a href="#2-ä¸‰ä¸ªå¸¸ç”¨çš„Hook" class="headerlink" title="2. ä¸‰ä¸ªå¸¸ç”¨çš„Hook"></a>2. ä¸‰ä¸ªå¸¸ç”¨çš„Hook</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(1). State Hook: React.useState()</span><br><span class="line">(2). Effect Hook: React.useEffect()</span><br><span class="line">(3). Ref Hook: React.useRef()</span><br></pre></td></tr></table></figure>

<h4 id="3-State-Hook"><a href="#3-State-Hook" class="headerlink" title="3. State Hook"></a>3. State Hook</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(1). State Hookè®©å‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥æœ‰stateçŠ¶æ€, å¹¶è¿›è¡ŒçŠ¶æ€æ•°æ®çš„è¯»å†™æ“ä½œ</span><br><span class="line">(2). è¯­æ³•: const [xxx, setXxx] = React.useState(initValue)  </span><br><span class="line">(3). useState()è¯´æ˜:</span><br><span class="line">        å‚æ•°: ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æŒ‡å®šçš„å€¼åœ¨å†…éƒ¨ä½œç¼“å­˜</span><br><span class="line">        è¿”å›å€¼: åŒ…å«2ä¸ªå…ƒç´ çš„æ•°ç»„, ç¬¬1ä¸ªä¸ºå†…éƒ¨å½“å‰çŠ¶æ€å€¼, ç¬¬2ä¸ªä¸ºæ›´æ–°çŠ¶æ€å€¼çš„å‡½æ•°</span><br><span class="line">(4). setXxx()2ç§å†™æ³•:</span><br><span class="line">        setXxx(newValue): å‚æ•°ä¸ºéå‡½æ•°å€¼, ç›´æ¥æŒ‡å®šæ–°çš„çŠ¶æ€å€¼, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼</span><br><span class="line">        setXxx(value =&gt; newValue): å‚æ•°ä¸ºå‡½æ•°, æ¥æ”¶åŸæœ¬çš„çŠ¶æ€å€¼, è¿”å›æ–°çš„çŠ¶æ€å€¼, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼</span><br></pre></td></tr></table></figure>

<h4 id="4-Effect-Hook"><a href="#4-Effect-Hook" class="headerlink" title="4. Effect Hook"></a>4. Effect Hook</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(1). Effect Hook å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ(ç”¨äºæ¨¡æ‹Ÿç±»ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­)</span><br><span class="line">(2). Reactä¸­çš„å‰¯ä½œç”¨æ“ä½œ:</span><br><span class="line">        å‘ajaxè¯·æ±‚æ•°æ®è·å–</span><br><span class="line">        è®¾ç½®è®¢é˜… / å¯åŠ¨å®šæ—¶å™¨</span><br><span class="line">        æ‰‹åŠ¨æ›´æ”¹çœŸå®DOM</span><br><span class="line">(3). è¯­æ³•å’Œè¯´æ˜: </span><br><span class="line">        useEffect(() =&gt; &#123; </span><br><span class="line">          // åœ¨æ­¤å¯ä»¥æ‰§è¡Œä»»ä½•å¸¦å‰¯ä½œç”¨æ“ä½œ</span><br><span class="line">          return () =&gt; &#123; // åœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œ</span><br><span class="line">            // åœ¨æ­¤åšä¸€äº›æ”¶å°¾å·¥ä½œ, æ¯”å¦‚æ¸…é™¤å®šæ—¶å™¨/å–æ¶ˆè®¢é˜…ç­‰</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, [stateValue]) // å¦‚æœæŒ‡å®šçš„æ˜¯[], å›è°ƒå‡½æ•°åªä¼šåœ¨ç¬¬ä¸€æ¬¡render()åæ‰§è¡Œ</span><br><span class="line">    </span><br><span class="line">(4). å¯ä»¥æŠŠ useEffect Hook çœ‹åšå¦‚ä¸‹ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆ</span><br><span class="line">        componentDidMount()</span><br><span class="line">        componentDidUpdate()</span><br><span class="line">    	componentWillUnmount() </span><br></pre></td></tr></table></figure>

<h4 id="5-Ref-Hook"><a href="#5-Ref-Hook" class="headerlink" title="5. Ref Hook"></a>5. Ref Hook</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(1). Ref Hookå¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å­˜å‚¨/æŸ¥æ‰¾ç»„ä»¶å†…çš„æ ‡ç­¾æˆ–ä»»æ„å…¶å®ƒæ•°æ®</span><br><span class="line">(2). è¯­æ³•: const refContainer = useRef()</span><br><span class="line">(3). ä½œç”¨:ä¿å­˜æ ‡ç­¾å¯¹è±¡,åŠŸèƒ½ä¸React.createRef()ä¸€æ ·</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="4-Fragment"><a href="#4-Fragment" class="headerlink" title="4. Fragment"></a>4. Fragment</h2><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><pre><code>&lt;Fragment&gt;&lt;Fragment&gt;
&lt;&gt;&lt;/&gt;
</code></pre>
<h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><blockquote>
<p>å¯ä»¥ä¸ç”¨å¿…é¡»æœ‰ä¸€ä¸ªçœŸå®çš„DOMæ ¹æ ‡ç­¾äº†</p>
</blockquote>
<hr/>

<h2 id="5-Context"><a href="#5-Context" class="headerlink" title="5. Context"></a>5. Context</h2><h3 id="ç†è§£"><a href="#ç†è§£" class="headerlink" title="ç†è§£"></a>ç†è§£</h3><blockquote>
<p>ä¸€ç§ç»„ä»¶é—´é€šä¿¡æ–¹å¼, å¸¸ç”¨äºã€ç¥–ç»„ä»¶ã€‘ä¸ã€åä»£ç»„ä»¶ã€‘é—´é€šä¿¡</p>
</blockquote>
<h3 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>) åˆ›å»º<span class="title class_">Context</span>å®¹å™¨å¯¹è±¡ï¼š</span><br><span class="line">	<span class="keyword">const</span> <span class="title class_">XxxContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>()  </span><br><span class="line">	</span><br><span class="line"><span class="number">2</span>) æ¸²æŸ“å­ç»„æ—¶ï¼Œå¤–é¢åŒ…è£¹xxxContext.<span class="property">Provider</span>, é€šè¿‡valueå±æ€§ç»™åä»£ç»„ä»¶ä¼ é€’æ•°æ®ï¼š</span><br><span class="line">	&lt;xxxContext.<span class="property">Provider</span> value=&#123;æ•°æ®&#125;&gt;</span><br><span class="line">		å­ç»„ä»¶</span><br><span class="line">    &lt;/xxxContext.<span class="property">Provider</span>&gt;</span><br><span class="line">    </span><br><span class="line"><span class="number">3</span>) åä»£ç»„ä»¶è¯»å–æ•°æ®ï¼š</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ç¬¬ä¸€ç§æ–¹å¼:ä»…é€‚ç”¨äºç±»ç»„ä»¶ </span></span><br><span class="line">	  <span class="keyword">static</span> contextType = xxxContext  <span class="comment">// å£°æ˜æ¥æ”¶context</span></span><br><span class="line">	  <span class="variable language_">this</span>.<span class="property">context</span> <span class="comment">// è¯»å–contextä¸­çš„valueæ•°æ®</span></span><br><span class="line">	  </span><br><span class="line">	<span class="comment">//ç¬¬äºŒç§æ–¹å¼: å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶éƒ½å¯ä»¥</span></span><br><span class="line">	  &lt;xxxContext.<span class="property">Consumer</span>&gt;</span><br><span class="line">	    &#123;</span><br><span class="line">	      <span class="function"><span class="params">value</span> =&gt;</span> ( <span class="comment">// valueå°±æ˜¯contextä¸­çš„valueæ•°æ®</span></span><br><span class="line">	        è¦æ˜¾ç¤ºçš„å†…å®¹</span><br><span class="line">	      )</span><br><span class="line">	    &#125;</span><br><span class="line">	  &lt;/xxxContext.<span class="property">Consumer</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><pre><code>åœ¨åº”ç”¨å¼€å‘ä¸­ä¸€èˆ¬ä¸ç”¨context, ä¸€èˆ¬éƒ½ç”¨å®ƒçš„å°è£…reactæ’ä»¶
</code></pre>
<hr/>


<h2 id="6-ç»„ä»¶ä¼˜åŒ–"><a href="#6-ç»„ä»¶ä¼˜åŒ–" class="headerlink" title="6. ç»„ä»¶ä¼˜åŒ–"></a>6. ç»„ä»¶ä¼˜åŒ–</h2><h3 id="Componentçš„2ä¸ªé—®é¢˜"><a href="#Componentçš„2ä¸ªé—®é¢˜" class="headerlink" title="Componentçš„2ä¸ªé—®é¢˜"></a>Componentçš„2ä¸ªé—®é¢˜</h3><blockquote>
<ol>
<li><p>åªè¦æ‰§è¡ŒsetState(),å³ä½¿ä¸æ”¹å˜çŠ¶æ€æ•°æ®, ç»„ä»¶ä¹Ÿä¼šé‡æ–°render() &#x3D;&#x3D;&gt; æ•ˆç‡ä½</p>
</li>
<li><p>åªå½“å‰ç»„ä»¶é‡æ–°render(), å°±ä¼šè‡ªåŠ¨é‡æ–°renderå­ç»„ä»¶ï¼Œçºµä½¿å­ç»„ä»¶æ²¡æœ‰ç”¨åˆ°çˆ¶ç»„ä»¶çš„ä»»ä½•æ•°æ® &#x3D;&#x3D;&gt; æ•ˆç‡ä½</p>
</li>
</ol>
</blockquote>
<h3 id="æ•ˆç‡é«˜çš„åšæ³•"><a href="#æ•ˆç‡é«˜çš„åšæ³•" class="headerlink" title="æ•ˆç‡é«˜çš„åšæ³•"></a>æ•ˆç‡é«˜çš„åšæ³•</h3><blockquote>
<p> åªæœ‰å½“ç»„ä»¶çš„stateæˆ–propsæ•°æ®å‘ç”Ÿæ”¹å˜æ—¶æ‰é‡æ–°render()</p>
</blockquote>
<h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><blockquote>
<p> Componentä¸­çš„shouldComponentUpdate()æ€»æ˜¯è¿”å›true</p>
</blockquote>
<h3 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h3><pre><code>åŠæ³•1: 
    é‡å†™shouldComponentUpdate()æ–¹æ³•
    æ¯”è¾ƒæ–°æ—§stateæˆ–propsæ•°æ®, å¦‚æœæœ‰å˜åŒ–æ‰è¿”å›true, å¦‚æœæ²¡æœ‰è¿”å›false
åŠæ³•2:  
    ä½¿ç”¨PureComponent
    PureComponenté‡å†™äº†shouldComponentUpdate(), åªæœ‰stateæˆ–propsæ•°æ®æœ‰å˜åŒ–æ‰è¿”å›true
    æ³¨æ„: 
        åªæ˜¯è¿›è¡Œstateå’Œpropsæ•°æ®çš„æµ…æ¯”è¾ƒ, å¦‚æœåªæ˜¯æ•°æ®å¯¹è±¡å†…éƒ¨æ•°æ®å˜äº†, è¿”å›false  
        ä¸è¦ç›´æ¥ä¿®æ”¹stateæ•°æ®, è€Œæ˜¯è¦äº§ç”Ÿæ–°æ•°æ®
é¡¹ç›®ä¸­ä¸€èˆ¬ä½¿ç”¨PureComponentæ¥ä¼˜åŒ–
</code></pre>
<hr/>



<h2 id="7-render-props"><a href="#7-render-props" class="headerlink" title="7. render props"></a>7. render props</h2><h3 id="å¦‚ä½•å‘ç»„ä»¶å†…éƒ¨åŠ¨æ€ä¼ å…¥å¸¦å†…å®¹çš„ç»“æ„-æ ‡ç­¾"><a href="#å¦‚ä½•å‘ç»„ä»¶å†…éƒ¨åŠ¨æ€ä¼ å…¥å¸¦å†…å®¹çš„ç»“æ„-æ ‡ç­¾" class="headerlink" title="å¦‚ä½•å‘ç»„ä»¶å†…éƒ¨åŠ¨æ€ä¼ å…¥å¸¦å†…å®¹çš„ç»“æ„(æ ‡ç­¾)?"></a>å¦‚ä½•å‘ç»„ä»¶å†…éƒ¨åŠ¨æ€ä¼ å…¥å¸¦å†…å®¹çš„ç»“æ„(æ ‡ç­¾)?</h3><pre><code>Reactä¸­:
    ä½¿ç”¨children props: é€šè¿‡ç»„ä»¶æ ‡ç­¾ä½“ä¼ å…¥ç»“æ„
    ä½¿ç”¨render props: é€šè¿‡ç»„ä»¶æ ‡ç­¾å±æ€§ä¼ å…¥ç»“æ„,è€Œä¸”å¯ä»¥æºå¸¦æ•°æ®ï¼Œä¸€èˆ¬ç”¨renderå‡½æ•°å±æ€§
</code></pre>
<h3 id="children-props"><a href="#children-props" class="headerlink" title="children props"></a>children props</h3><pre><code>&lt;A&gt;
  &lt;B&gt;xxxx&lt;/B&gt;
&lt;/A&gt;
&#123;this.props.children&#125;
é—®é¢˜: å¦‚æœBç»„ä»¶éœ€è¦Aç»„ä»¶å†…çš„æ•°æ®, ==&gt; åšä¸åˆ° 
</code></pre>
<h3 id="render-props"><a href="#render-props" class="headerlink" title="render props"></a>render props</h3><pre><code>&lt;A render=&#123;(data) =&gt; &lt;C data=&#123;data&#125;&gt;&lt;/C&gt;&#125;&gt;&lt;/A&gt;
Aç»„ä»¶: &#123;this.props.render(å†…éƒ¨stateæ•°æ®)&#125;
Cç»„ä»¶: è¯»å–Aç»„ä»¶ä¼ å…¥çš„æ•°æ®æ˜¾ç¤º &#123;this.props.data&#125; 
</code></pre>
<hr/>

<h2 id="8-é”™è¯¯è¾¹ç•Œ"><a href="#8-é”™è¯¯è¾¹ç•Œ" class="headerlink" title="8. é”™è¯¯è¾¹ç•Œ"></a>8. é”™è¯¯è¾¹ç•Œ</h2><h4 id="ç†è§£ï¼š"><a href="#ç†è§£ï¼š" class="headerlink" title="ç†è§£ï¼š"></a>ç†è§£ï¼š</h4><p>é”™è¯¯è¾¹ç•Œ(Error boundary)ï¼šç”¨æ¥æ•è·åä»£ç»„ä»¶é”™è¯¯ï¼Œæ¸²æŸ“å‡ºå¤‡ç”¨é¡µé¢</p>
<h4 id="ç‰¹ç‚¹ï¼š"><a href="#ç‰¹ç‚¹ï¼š" class="headerlink" title="ç‰¹ç‚¹ï¼š"></a>ç‰¹ç‚¹ï¼š</h4><p>åªèƒ½æ•è·åä»£ç»„ä»¶ç”Ÿå‘½å‘¨æœŸäº§ç”Ÿçš„é”™è¯¯ï¼Œä¸èƒ½æ•è·è‡ªå·±ç»„ä»¶äº§ç”Ÿçš„é”™è¯¯å’Œå…¶ä»–ç»„ä»¶åœ¨åˆæˆäº‹ä»¶ã€å®šæ—¶å™¨ä¸­äº§ç”Ÿçš„é”™è¯¯</p>
<h5 id="ä½¿ç”¨æ–¹å¼ï¼š"><a href="#ä½¿ç”¨æ–¹å¼ï¼š" class="headerlink" title="ä½¿ç”¨æ–¹å¼ï¼š"></a>ä½¿ç”¨æ–¹å¼ï¼š</h5><p>getDerivedStateFromErroré…åˆcomponentDidCatch</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œä¸€æ—¦åå°ç»„ä»¶æŠ¥é”™ï¼Œå°±ä¼šè§¦å‘</span></span><br><span class="line"><span class="keyword">static</span> <span class="title function_">getDerivedStateFromError</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    <span class="comment">// åœ¨renderä¹‹å‰è§¦å‘</span></span><br><span class="line">    <span class="comment">// è¿”å›æ–°çš„state</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">hasError</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">componentDidCatch</span>(<span class="params">error, info</span>) &#123;</span><br><span class="line">    <span class="comment">// ç»Ÿè®¡é¡µé¢çš„é”™è¯¯ã€‚å‘é€è¯·æ±‚å‘é€åˆ°åå°å»</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error, info);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr/>



<h2 id="9-ç»„ä»¶é€šä¿¡æ–¹å¼æ€»ç»“"><a href="#9-ç»„ä»¶é€šä¿¡æ–¹å¼æ€»ç»“" class="headerlink" title="9. ç»„ä»¶é€šä¿¡æ–¹å¼æ€»ç»“"></a>9. ç»„ä»¶é€šä¿¡æ–¹å¼æ€»ç»“</h2><h4 id="ç»„ä»¶é—´çš„å…³ç³»ï¼š"><a href="#ç»„ä»¶é—´çš„å…³ç³»ï¼š" class="headerlink" title="ç»„ä»¶é—´çš„å…³ç³»ï¼š"></a>ç»„ä»¶é—´çš„å…³ç³»ï¼š</h4><ul>
<li>çˆ¶å­ç»„ä»¶</li>
<li>å…„å¼Ÿç»„ä»¶ï¼ˆéåµŒå¥—ç»„ä»¶ï¼‰</li>
<li>ç¥–å­™ç»„ä»¶ï¼ˆè·¨çº§ç»„ä»¶ï¼‰</li>
</ul>
<h4 id="å‡ ç§é€šä¿¡æ–¹å¼ï¼š"><a href="#å‡ ç§é€šä¿¡æ–¹å¼ï¼š" class="headerlink" title="å‡ ç§é€šä¿¡æ–¹å¼ï¼š"></a>å‡ ç§é€šä¿¡æ–¹å¼ï¼š</h4><pre><code>    1.propsï¼š		(1).children props		(2).render props	2.æ¶ˆæ¯è®¢é˜…-å‘å¸ƒï¼š		pubs-subã€eventç­‰ç­‰	3.é›†ä¸­å¼ç®¡ç†ï¼š		reduxã€dvaç­‰ç­‰	4.conText:		ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼
</code></pre>
<h4 id="æ¯”è¾ƒå¥½çš„æ­é…æ–¹å¼ï¼š"><a href="#æ¯”è¾ƒå¥½çš„æ­é…æ–¹å¼ï¼š" class="headerlink" title="æ¯”è¾ƒå¥½çš„æ­é…æ–¹å¼ï¼š"></a>æ¯”è¾ƒå¥½çš„æ­é…æ–¹å¼ï¼š</h4><pre><code>    çˆ¶å­ç»„ä»¶ï¼šprops
    å…„å¼Ÿç»„ä»¶ï¼šæ¶ˆæ¯è®¢é˜…-å‘å¸ƒã€é›†ä¸­å¼ç®¡ç†
    ç¥–å­™ç»„ä»¶(è·¨çº§ç»„ä»¶)ï¼šæ¶ˆæ¯è®¢é˜…-å‘å¸ƒã€é›†ä¸­å¼ç®¡ç†ã€conText(å¼€å‘ç”¨çš„å°‘ï¼Œå°è£…æ’ä»¶ç”¨çš„å¤š)
</code></pre>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>Nodeä¸­çš„process.env</title>
    <url>/2022/03/11/Node%E4%B8%AD%E7%9A%84process.env/</url>
    <content><![CDATA[<h4 id="process-env"><a href="#process-env" class="headerlink" title="process.env"></a>process.env</h4><p><code>process</code> æ˜¯ <code>Node.js</code> ä¸­çš„ ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæä¾›æ¥æœ‰å…³å½“å‰ Node.js è¿›ç¨‹çš„ä¿¡æ¯å¹¶å¯¹å…¶è¿›è¡Œæ§åˆ¶ã€‚è€Œ<code>process</code> ä¸­çš„ <code>env</code> åˆ™æ˜¯è¿”å›åŒ…å«ç”¨æˆ·ç¯å¢ƒçš„å¯¹è±¡ã€‚å¯ä»¥é€šè¿‡ <code>process.env</code> æ‹¿åˆ°å½“å‰é¡¹ç›®è¿è¡Œç¯å¢ƒçš„ä¿¡æ¯ã€‚</p>
<h4 id="è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®ç¯å¢ƒå˜é‡"></a>è®¾ç½®ç¯å¢ƒå˜é‡</h4><h5 id="é€šè¿‡cliçš„æ–¹å¼è¿›è¡Œè®¾ç½®"><a href="#é€šè¿‡cliçš„æ–¹å¼è¿›è¡Œè®¾ç½®" class="headerlink" title="é€šè¿‡cliçš„æ–¹å¼è¿›è¡Œè®¾ç½®"></a>é€šè¿‡cliçš„æ–¹å¼è¿›è¡Œè®¾ç½®</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.jsä¸­</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="property">env</span>.<span class="property">PROT</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Windows (cmd.exe)</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> PROT=10086 &amp;&amp; node index.js</span><br></pre></td></tr></table></figure>

<p><strong>Linux, macOS (Bash)</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">PROT=10086 node index.js</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h5 id="envæ–‡ä»¶"><a href="#envæ–‡ä»¶" class="headerlink" title=".envæ–‡ä»¶"></a><a name="env">.envæ–‡ä»¶</a></h5><ul>
<li>åˆ›å»º</li>
</ul>
<p>ç›´æ¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»º <code>.env</code> æ–‡ä»¶ï¼Œç„¶åé”®å…¥ç¯å¢ƒå˜é‡åŠå…¶å€¼ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">NDOE_ENV=development</span><br><span class="line">PROT=10086</span><br><span class="line">APP_KEY=***********</span><br><span class="line">HOST_URL=**********</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p><strong>âš ï¸æ³¨æ„</strong>ï¼šä¸è¦æŠŠ<code>.env</code>æ–‡å…¥æ”¾å…¥ä»£ç ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œå› ä¸ºè¿™äº›ç¯å¢ƒå˜é‡éƒ½æ˜¯é¡¹ç›®ä¸­çš„éšç§æ•°æ®ã€‚</p>
<ul>
<li>è¯»å–</li>
</ul>
<p><strong>åœ¨craåˆ›å»ºçš„é¡¹ç›®ä¸­ï¼Œè‡ªå¸¦äº†dotenvè§£æ.envï¼Œæ‰€ä»¥åˆ›å»º.envæ–‡ä»¶åå³å¯</strong>ã€‚</p>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶åï¼Œå¯ä»¥è‡ªå·±ç¼–å†™ä»£ç æ¥æŸ¥æ‰¾è§£ææ–‡ä»¶å¹¶å°†å…¶å†™å…¥åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œæˆ–è€…åˆ©ç”¨ç¬¬ä¸‰æ–¹çš„<code>npm</code>åŒ…ï¼Œæ¯”å¦‚ <a href="https://link.juejin.cn/?target=https://github.com/motdotla/dotenv"><code>dotenv</code></a> ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">yarn add dotenv</span><br><span class="line"></span><br><span class="line"><span class="comment">// .env</span></span><br><span class="line"><span class="variable constant_">PROT</span>=<span class="number">10086</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> dotenv = <span class="built_in">require</span>(<span class="string">&#x27;dotenv&#x27;</span>);</span><br><span class="line">dotenv.<span class="title function_">config</span>(); </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="property">env</span>.<span class="property">PROT</span>); <span class="comment">// 10086</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å½“ä½ æ‰§è¡Œå‘½ä»¤è„šæœ¬çš„æ—¶å€™å°±ä¸ç”¨ä¼ å…¥ç¯å¢ƒå˜é‡åŠå…¶å€¼äº†ï¼Œåœ¨ <code>.env</code> æ–‡ä»¶é‡Œä¹Ÿèƒ½æ›´ç›´è§‚çš„çœ‹åˆ°å’Œç®¡ç†å„ç¯å¢ƒå˜é‡çš„é…ç½®ã€‚</p>
<h5 id="æ›´å¥½çš„ç»„ç»‡"><a href="#æ›´å¥½çš„ç»„ç»‡" class="headerlink" title="æ›´å¥½çš„ç»„ç»‡"></a>æ›´å¥½çš„ç»„ç»‡</h5><p>ä¸€æ—¦ç¯å¢ƒå˜é‡å˜å¤šï¼Œå°±éœ€è¦å¯¹æ‰€æœ‰ç¯å¢ƒå˜é‡è¿›è¡Œé›†ä¸­å¼çš„ç®¡ç†ï¼Œå› ä¸ºåœ¨æ‰€æœ‰éœ€è¦ä½¿ç”¨çš„åœ°ç›´æ¥å¼•ç”¨å˜é‡ä¸é›†ä¸­ç®¡ç†ç›¸æ¯”ï¼Œé‡æ„å’Œç»´æŠ¤ä¼šæ›´åŠ å›°éš¾ã€‚</p>
<p>æ‰€ä»¥<strong>åˆ›å»ºä¸€ä¸ªè´Ÿè´£æ”¶é›†ç¯å¢ƒå˜é‡çš„æ¨¡å—</strong>æ˜¯ä¸€ä¸ªæ›´å¥½çš„æ–¹å¼ï¼Œè¿™æ ·å¯ä»¥è½»æ¾åœ°ä¸€æ¬¡æŸ¥çœ‹ç¯å¢ƒå˜é‡å¹¶å°†å®ƒä»¬æ˜ å°„ä¸ºå¯è¯»çš„åç§°ã€‚</p>
<ul>
<li>æ‰‹åŠ¨æ•´ç†</li>
</ul>
<p>åˆ›å»ºä¸€ä¸ªåä¸º <code>config.js</code> çš„æ–‡ä»¶ï¼Œç„¶åå†™å…¥å˜é‡ï¼Œå°†å…¶å‘½åä¸ºå…·æœ‰è‰¯å¥½å¯è¯»æ€§çš„å±æ€§è¿›è¡Œå¹¶å¯¼å‡ºå®ƒä»¬ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> dotenv = <span class="built_in">require</span>ï¼ˆ<span class="string">&#x27;dotenv&#x27;</span>ï¼‰; </span><br><span class="line"></span><br><span class="line">dotenv.<span class="property">config</span>ï¼ˆï¼‰; </span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123; </span><br><span class="line">  hostUrlï¼šprocess.<span class="property">env</span>.<span class="property">HOST_URL</span>ï¼Œ</span><br><span class="line">  secretKeyï¼šprocess.<span class="property">env</span>.<span class="property">API_KEY</span>ï¼Œ</span><br><span class="line">  portï¼šprocess.<span class="property">env</span>.<span class="property">PORT</span> </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥è¿™æ ·è¿›è¡Œä½¿ç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;port&#125; = <span class="built_in">require</span>ï¼ˆ<span class="string">&#x27;./ config&#x27;</span>ï¼‰; </span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span>ï¼ˆ<span class="string">`ç«¯å£ä¸ºï¼š$ &#123;port&#125;`</span>ï¼‰; <span class="comment">// 10086</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</p>
<ol>
<li><p>é¡¹ç›®æ–‡ä»¶ç»„ç»‡æ›´ä¸ºç›´è§‚åˆç†</p>
</li>
<li><p>æ¸…æ¥šçš„çŸ¥é“ç¯å¢ƒå˜é‡çš„æ˜ å°„å…³ç³»</p>
</li>
<li><p>å˜é‡é‡å‘½åä¸ºæ›´å…·å¯è¯»æ€§çš„å±æ€§</p>
</li>
<li><p>å¯ä»¥æ·»åŠ å…¶ä»–éç¯å¢ƒå˜é‡çš„é…ç½®å±æ€§</p>
</li>
</ol>
<p>ä½†æ˜¯å¦‚æœè¦æ·»åŠ æ–°çš„ç¯å¢ƒå˜é‡æ—¶ï¼Œå°±å¿…é¡»å°†å…¶æ·»åŠ åˆ°<code>config</code>æ¨¡å—ä¸­ã€‚</p>
<ul>
<li>è‡ªåŠ¨æ•´ç†</li>
</ul>
<p>å‰é¢æåˆ°çš„ç¬¬ä¸‰æ–¹ <code>NPM</code> åŒ… <code>dotenv</code> å°±å¯ä»¥åšåˆ°ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// config.js </span></span><br><span class="line"><span class="keyword">const</span> dotenv = <span class="built_in">require</span>(<span class="string">&#x27;dotenv&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> result = dotenv.<span class="title function_">config</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (result.<span class="property">error</span>) &#123;</span><br><span class="line">  <span class="keyword">throw</span> result.<span class="property">error</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">parsed</span>: envs &#125; = result;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(envs);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = envs;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥å…¶ä»–æ¨¡å—ä¸­è¿™æ ·å¼•ç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="variable constant_">HOST_URL</span>, <span class="variable constant_">API_KEY</span>, <span class="variable constant_">PROT</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;./config&#x27;</span>);</span><br></pre></td></tr></table></figure>



<h4 id="CRAåˆ›å»ºçš„é¡¹ç›®ä½¿ç”¨ç¯å¢ƒå˜é‡"><a href="#CRAåˆ›å»ºçš„é¡¹ç›®ä½¿ç”¨ç¯å¢ƒå˜é‡" class="headerlink" title="CRAåˆ›å»ºçš„é¡¹ç›®ä½¿ç”¨ç¯å¢ƒå˜é‡"></a>CRAåˆ›å»ºçš„é¡¹ç›®ä½¿ç”¨ç¯å¢ƒå˜é‡</h4><p>å¿…é¡»ä»¥ <code>REACT_APP_</code> å¼€å¤´åˆ›å»ºè‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼Œç¯å¢ƒå˜é‡åœ¨æ„å»ºæœŸé—´åµŒå…¥ã€‚</p>
<h5 id="è®¾ç½®ä¸´æ—¶ç¯å¢ƒå˜é‡"><a href="#è®¾ç½®ä¸´æ—¶ç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®ä¸´æ—¶ç¯å¢ƒå˜é‡"></a>è®¾ç½®ä¸´æ—¶ç¯å¢ƒå˜é‡</h5><p><strong>Windows (cmd.exe)</strong></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> <span class="string">&quot;REACT_APP_SECRET_CODE=abcdef&quot;</span> &amp;&amp; npm <span class="built_in">start</span></span><br></pre></td></tr></table></figure>

<p>ï¼ˆæ³¨æ„ï¼šå˜é‡èµ‹å€¼éœ€è¦ç”¨å¼•å·åŒ…è£¹ï¼Œä»¥é¿å…å°¾éšç©ºæ ¼ã€‚ï¼‰</p>
<p><strong>Windows (Powershell)</strong></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">(<span class="variable">$env:REACT_APP_SECRET_CODE</span> = <span class="string">&quot;abcdef&quot;</span>) <span class="operator">-and</span> (npm <span class="built_in">start</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Linux, macOS (Bash)</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">REACT_APP_SECRET_CODE=abcdef npm start</span><br></pre></td></tr></table></figure>



<h5 id="env-ä¸­æ·»åŠ ç¯å¢ƒå˜é‡"><a href="#env-ä¸­æ·»åŠ ç¯å¢ƒå˜é‡" class="headerlink" title=".env ä¸­æ·»åŠ ç¯å¢ƒå˜é‡"></a><code>.env</code> ä¸­æ·»åŠ ç¯å¢ƒå˜é‡</h5><p>è§<a href="#env">ä¸Šæ–‡</a>è®¾ç½®ã€‚</p>
<h5 id="å…¶ä»–-env-æ–‡ä»¶"><a href="#å…¶ä»–-env-æ–‡ä»¶" class="headerlink" title="å…¶ä»– .env æ–‡ä»¶"></a>å…¶ä»– <code>.env</code> æ–‡ä»¶</h5><blockquote>
<p>æ³¨æ„ï¼šæ­¤åŠŸèƒ½ <strong>é€‚ç”¨äº <code>react-scripts@1.0.0</code> åŠæ›´é«˜ç‰ˆæœ¬</strong>ã€‚</p>
</blockquote>
<ul>
<li><code>.env</code>ï¼šé»˜è®¤ã€‚</li>
<li><code>.env.local</code>ï¼šæœ¬åœ°è¦†ç›–ã€‚<strong>é™¤ test ä¹‹å¤–çš„æ‰€æœ‰ç¯å¢ƒéƒ½åŠ è½½æ­¤æ–‡ä»¶</strong>ã€‚</li>
<li><code>.env.development</code>, <code>.env.test</code>, <code>.env.production</code>ï¼šè®¾ç½®ç‰¹å®šç¯å¢ƒã€‚</li>
<li><code>.env.development.local</code>, <code>.env.test.local</code>, <code>.env.production.local</code>ï¼šè®¾ç½®ç‰¹å®šç¯å¢ƒçš„æœ¬åœ°è¦†ç›–ã€‚</li>
</ul>
<p>å·¦ä¾§çš„æ–‡ä»¶æ¯”å³ä¾§çš„æ–‡ä»¶å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼š</p>
<ul>
<li><code>npm start</code>: <code>.env.development.local</code>, <code>.env.development</code>, <code>.env.local</code>, <code>.env</code></li>
<li><code>npm run build</code>: <code>.env.production.local</code>, <code>.env.production</code>, <code>.env.local</code>, <code>.env</code></li>
<li><code>npm test</code>: <code>.env.test.local</code>, <code>.env.test</code>, <code>.env</code> (æ³¨æ„æ²¡æœ‰ <code>.env.local</code> )</li>
</ul>
<h5 id="NODE-ENV-çš„ç‰¹æ®Šå†…ç½®ç¯å¢ƒå˜é‡"><a href="#NODE-ENV-çš„ç‰¹æ®Šå†…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="NODE_ENV çš„ç‰¹æ®Šå†…ç½®ç¯å¢ƒå˜é‡"></a><code>NODE_ENV</code> çš„ç‰¹æ®Šå†…ç½®ç¯å¢ƒå˜é‡</h5><p>æœ‰ä¸€ä¸ªåä¸º <code>NODE_ENV</code> çš„ç‰¹æ®Šå†…ç½®ç¯å¢ƒå˜é‡ã€‚å¯ä»¥ä» <code>process.env.NODE_ENV</code> ä¸­è¯»å–ã€‚è¿è¡Œ <code>npm start</code> æ—¶ï¼Œå®ƒæ€»æ˜¯ç­‰äº <code>&#39;development&#39;</code> ï¼Œè¿è¡Œ <code>npm test</code> å®ƒæ€»æ˜¯ç­‰äº <code>&#39;test&#39;</code> ï¼Œè¿è¡Œ <code>npm run build</code> æ¥ç”Ÿæˆä¸€ä¸ªç”Ÿäº§ bundle(åŒ…) æ—¶ï¼Œå®ƒæ€»æ˜¯ç­‰äº <code>&#39;production&#39;</code> ã€‚**<code>NODE_ENV</code>æ— æ³•æ‰‹åŠ¨è¦†ç›–ã€‚** </p>
]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Node</tag>
      </tags>
  </entry>
  <entry>
    <title>Reactç”Ÿæ€</title>
    <url>/2021/09/30/React%E7%94%9F%E6%80%81/</url>
    <content><![CDATA[<h3 id="React-DevTools"><a href="#React-DevTools" class="headerlink" title="React DevTools"></a>React DevTools</h3><h5 id="General-è®¾ç½®"><a href="#General-è®¾ç½®" class="headerlink" title="General è®¾ç½®"></a>General è®¾ç½®</h5><img src="../assets/image-20220222024702149.png" alt="image-20220222024702149" style="zoom:33%;" />

<p>General é¢æ¿ä¸­æœ€é‡è¦çš„åŠŸèƒ½å°±æ˜¯ **â€Highlight updates when components renderâ€**ã€‚å‹¾é€‰ä¸Šä¹‹åï¼Œå¯ä»¥æŸ¥çœ‹ React é‡ç»˜æ—¶ï¼Œé¡µé¢å“ªäº›éƒ¨åˆ†æœ‰æ›´æ–°ã€‚åœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¯ä»¥å¿«é€Ÿå¸®åŠ©å†³ç­–åœ¨å“ªéƒ¨åˆ†ä¸éœ€è¦é‡ç»˜çš„ç»„ä»¶éƒ¨åˆ†æ·»åŠ  React.memo é˜»æ­¢é‡ç»˜ã€‚</p>
<h5 id="Debugging-è®¾ç½®"><a href="#Debugging-è®¾ç½®" class="headerlink" title="Debugging è®¾ç½®"></a>Debugging è®¾ç½®</h5><img src="..\assets\image-20220222024832097.png" alt="image-20220222024832097" style="zoom:33%;" />

<p><strong>â€œAppend components stacks to console warnings and errors.â€</strong></p>
<p>å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®šä½ React æŠ¥é”™ä¿¡æ¯æ¥è‡ªå“ªä¸ªç»„ä»¶</p>
<span id="more"></span>


<h5 id="Components-è®¾ç½®"><a href="#Components-è®¾ç½®" class="headerlink" title="Components è®¾ç½®"></a>Components è®¾ç½®</h5><img src="..\assets\image-20220222024936104.png" alt="image-20220222024936104" style="zoom:33%;" />

<p><strong>â€œHide components whereâ€¦â€</strong></p>
<p>æ­¤é¡¹åœ¨è¿‡æ»¤ç»„ä»¶æ ‘æ—¶æœ‰ç”¨ã€‚æ¯”å¦‚ï¼Œå¤§å¤šæ•°åº”ç”¨å¯èƒ½ä¼šåœ¨é¡¶å±‚æœ‰å¾ˆå¤š Context.Providerï¼Œå°±å¯ä»¥è¿‡æ»¤ Context ç±»å‹ã€ä¸æ˜¾ç¤ºã€‚å½“æˆ‘ä»¬åªå…³å¿ƒä¸šåŠ¡é€»è¾‘å±‚çš„ç»„ä»¶æ—¶ï¼Œå¯ä»¥è¿‡æ»¤æ‰ DOM ç»„ä»¶ï¼Œå‡å°‘æ ‘çš„èŠ‚ç‚¹</p>
<h5 id="Profiler-è®¾ç½®"><a href="#Profiler-è®¾ç½®" class="headerlink" title="Profiler è®¾ç½®"></a>Profiler è®¾ç½®</h5><img src="..\assets\image-20220222025024293.png" alt="image-20220222025024293" style="zoom:33%;" />

<p><strong>â€œRecord why each component rendered while profilingâ€</strong></p>
<img src="..\assets\image-20220222025054509.png" alt="image-20220222025054509" style="zoom:33%;" />

<p>å‹¾é€‰ä¹‹åä¼šåœ¨æ¸²æŸ“ç«ç„°å›¾çš„ hover é¢æ¿ä¸­çœ‹åˆ° **â€Why did this renderâ€**ã€‚</p>
<h5 id="ç°åœ¨æœ‰å“ªäº›-render-åŸå› å‘¢ï¼Ÿ"><a href="#ç°åœ¨æœ‰å“ªäº›-render-åŸå› å‘¢ï¼Ÿ" class="headerlink" title="ç°åœ¨æœ‰å“ªäº› render åŸå› å‘¢ï¼Ÿ"></a>ç°åœ¨æœ‰å“ªäº› render åŸå› å‘¢ï¼Ÿ</h5><ul>
<li><p><strong>Props changed</strong></p>
<p>â€‹     é¡¾åæ€ä¹‰ï¼Œä¼ å…¥ç»„ä»¶çš„ props å˜æ›´</p>
</li>
<li><p><strong>The parent component rendered</strong></p>
<p>â€‹	çˆ¶ç»„ä»¶æ¸²æŸ“å¯¼è‡´çš„å­ç»„ä»¶æ¸²æŸ“ã€‚ä¸€èˆ¬è¦åšæ€§èƒ½ä¼˜åŒ–éƒ½æ˜¯æ‰¾è¿™ç±»é‡ç»˜åŸå› çš„ç»„ä»¶ã€‚ä½†æ˜¯è¦æ³¨æ„ï¼Œå¦‚æœç»„ä»¶ä¸­æœ‰ç”¨åˆ° useContextï¼ŒProvider çš„ value å˜æ›´å¯¼è‡´çš„é‡ç»˜ä¹Ÿæ˜¯è¢«æ ‡è®°ä¸º The parent component renderedï¼Œéœ€è¦æ³¨æ„</p>
</li>
<li><p><strong>Hooks changed</strong></p>
<p>â€‹	Hook çŠ¶æ€å˜æ›´å¯¼è‡´çš„é‡ç»˜ï¼Œä¸€èˆ¬å°±æ˜¯æŒ‡ useState è¿”å›çš„æ›´æ–°å‡½æ•°è¢«è°ƒç”¨äº†</p>
</li>
<li><p><strong>State changed</strong></p>
<p>â€‹	è¿™ä¸ªåªä¼šåœ¨ class component ä¸­æœ‰ï¼Œå¤§å®¶å¿½ç•¥</p>
</li>
<li><p><strong>â€œHide commits below xx (ms)â€</strong></p>
<p>â€‹	è®¾ç½®ä¸€ä¸ªæ›´æ–°è€—æ—¶çš„é˜ˆå€¼ï¼Œä½äºè¯¥é˜ˆå€¼çš„æ¸²æŸ“ä¸æ˜¾ç¤ºã€‚ç”¨æ¥å¿«é€Ÿè¿‡æ»¤å“ªäº›æ¸²æŸ“æœ‰æ€§èƒ½é—®é¢˜</p>
</li>
</ul>
<h5 id="React-ç»„ä»¶æ£€è§†å™¨"><a href="#React-ç»„ä»¶æ£€è§†å™¨" class="headerlink" title="React ç»„ä»¶æ£€è§†å™¨"></a>React ç»„ä»¶æ£€è§†å™¨</h5><p>ç”¨æ³•å’Œ DevTools çš„å…ƒç´ é¢æ¿ç±»ä¼¼ï¼Œå¯ä»¥ç›´æ¥åœ¨é¡µé¢ä¸Šå®šä½åˆ°å…ƒç´ å¯¹åº”çš„ React Componentã€‚å¹¶ä¸”å¯ä»¥å®æ—¶æŸ¥çœ‹å½“å‰ç»„ä»¶å†…éƒ¨çš„ hooks çŠ¶æ€ï¼Œè¿”å›çš„ç»„ä»¶æ ‘</p>
<img src="..\assets\image-20220222025129591.png" alt="image-20220222025129591" style="zoom:33%;" />

<p>å³ä¸Šè§’çš„å››ä¸ªå›¾æ ‡</p>
<img src="..\assets\image-20220222025154916.png" alt="image-20220222025154916" style="zoom:33%;" />

<p>åˆ†åˆ«ä½œç”¨å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ¨¡æ‹Ÿ ReactLazy æ‡’åŠ è½½ç»„ä»¶ Suspense çŠ¶æ€</li>
<li>å®šä½ç»„ä»¶æ‰€æ¸²æŸ“çš„ DOM èŠ‚ç‚¹</li>
<li>åœ¨ Console ä¸­æ‰“å° Component å†…éƒ¨çŠ¶æ€</li>
<li>è·³è½¬åˆ°ç»„ä»¶æ‰€åœ¨æºæ–‡ä»¶ï¼ˆé…åˆ sourcemapï¼‰</li>
</ul>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>Redux</title>
    <url>/2021/10/11/Redux/</url>
    <content><![CDATA[<ul>
<li>Reduxçš„è®¾è®¡æ€æƒ³</li>
</ul>
<p>ï¼ˆ1ï¼‰Web åº”ç”¨æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œè§†å›¾ä¸çŠ¶æ€æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p>
<p>ï¼ˆ2ï¼‰æ‰€æœ‰çš„çŠ¶æ€ï¼Œä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ã€‚</p>
<h2 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h2><ol>
<li><p>Action å°±æ˜¯ View å‘å‡ºçš„é€šçŸ¥ï¼Œè¡¨ç¤º State åº”è¯¥è¦å‘ç”Ÿå˜åŒ–äº†ã€‚</p>
</li>
<li><p>Action æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­çš„<code>type</code>å±æ€§æ˜¯å¿…é¡»çš„ï¼Œè¡¨ç¤º Action çš„åç§°ï¼ŒAction æè¿°å½“å‰å‘ç”Ÿçš„äº‹æƒ…ã€‚</p>
</li>
<li><p>æ”¹å˜ State çš„å”¯ä¸€åŠæ³•ï¼Œå°±æ˜¯ä½¿ç”¨ Actionã€‚</p>
</li>
</ol>
<p>å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥ç”Ÿæˆ Actionï¼Œè¿™ä¸ªå‡½æ•°å°±å« Action Creatorï¼Œç¤ºä¾‹å¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">sendAction</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;send_type&#x27;</span>,</span><br><span class="line">        <span class="attr">value</span>: <span class="string">&#x27;action hello&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<span id="more"></span>


<h2 id="Reducer"><a href="#Reducer" class="headerlink" title="Reducer"></a>Reducer</h2><ol>
<li><p>Store æ”¶åˆ° Action ä»¥åï¼Œå¿…é¡»ç»™å‡ºä¸€ä¸ªæ–°çš„ Stateï¼Œè¿™æ · View æ‰ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™ç§ State çš„è®¡ç®—è¿‡ç¨‹å°±å«åš Reducerã€‚</p>
</li>
<li><p>Reducer æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å— Action å’Œå½“å‰ State ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Stateã€‚</p>
</li>
</ol>
<p>Demo:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> initState = &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="string">&#x27;init&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">reducer</span> = (<span class="params">state = initState, action</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reducer:&#x27;</span>, state, action);</span><br><span class="line">    <span class="keyword">switch</span>(action.<span class="property">type</span>)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;send_type&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, state, action);</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Store"><a href="#Store" class="headerlink" title="Store"></a>Store</h2><h3 id="StoreApi"><a href="#StoreApi" class="headerlink" title="StoreApi:"></a>StoreApi:</h3><ul>
<li><p><code>store.subscribe()</code>: æ·»åŠ ä¸€ä¸ªå˜åŒ–ç›‘å¬å™¨ã€‚æ¯å½“ dispatch action çš„æ—¶å€™å°±ä¼šæ‰§è¡Œï¼Œstate æ ‘ä¸­çš„ä¸€éƒ¨åˆ†å¯èƒ½å·²ç»å˜åŒ–ã€‚ä½ å¯ä»¥åœ¨å›è°ƒå‡½æ•°é‡Œè°ƒç”¨<code>getState()</code>æ¥æ‹¿åˆ°å½“å‰ stateã€‚</p>
</li>
<li><p><code>store.dispatch()</code>æ˜¯ View å‘å‡º Action çš„å”¯ä¸€æ–¹æ³•ï¼Œå°†ä½¿ç”¨å½“å‰ <code>getState()</code>çš„ç»“æœå’Œä¼ å…¥çš„ <code>action</code> ä»¥åŒæ­¥æ–¹å¼çš„è°ƒç”¨ store çš„ reduce å‡½æ•°ã€‚å®ƒçš„è¿”å›å€¼ä¼šè¢«ä½œä¸ºä¸‹ä¸€ä¸ª stateã€‚ä»ç°åœ¨å¼€å§‹ï¼Œè¿™å°±æˆä¸ºäº† <code>getState()</code>çš„è¿”å›å€¼ï¼ŒåŒæ—¶å˜åŒ–ç›‘å¬å™¨(change listener)ä¼šè¢«è§¦å‘ã€‚</p>
<blockquote>
</blockquote>
</li>
<li><p>æµç¨‹ï¼š</p>
<p>ç»„ä»¶ â€“ <code>store.dispatch(action)</code> â€“ è§¦å‘reducerçš„æ‰§è¡Œ â€“ æ ¹æ®typeåŒºåˆ†è¿”å›çš„state â€“ è¿”å›å€¼ç»™store â€“ æ›´æ–°state â€“ <code>store.subscribe(listener)</code>ä¸­listenerå›è°ƒå‡½æ•°æ‰§è¡Œã€‚</p>
</li>
</ul>
<p><img src="/../assets/image-20210309183756689.png" alt="image-20210309183756689"></p>
<h2 id="React-redux"><a href="#React-redux" class="headerlink" title="React-redux"></a>React-redux</h2><p><img src="/../assets/image-20210309200347890.png" alt="image-20210309200347890"></p>
<h2 id="provider"><a href="#provider" class="headerlink" title="provider"></a>provider</h2><h2 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h2><p><code>connect</code>æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š<code>mapStateT.oProps</code>å’Œ<code>mapDispatchToProps</code>ã€‚å®ƒä»¬å®šä¹‰äº† UI ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘ã€‚å‰è€…è´Ÿè´£è¾“å…¥é€»è¾‘ï¼Œå³å°†<code>state</code>æ˜ å°„åˆ° UI ç»„ä»¶çš„å‚æ•°ï¼ˆ<code>props</code>ï¼‰ï¼Œåè€…è´Ÿè´£è¾“å‡ºé€»è¾‘ï¼Œå³å°†ç”¨æˆ·å¯¹ UI ç»„ä»¶çš„æ“ä½œæ˜ å°„æˆ Actionã€‚</p>
<ul>
<li><h3 id="mapStateToProps"><a href="#mapStateToProps" class="headerlink" title="mapStateToProps"></a><code>mapStateToProps</code></h3><p><code>mapStateToProps</code>æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å®ƒçš„ä½œç”¨å°±æ˜¯åƒå®ƒçš„åå­—é‚£æ ·ï¼Œå»ºç«‹ä¸€ä¸ªä»ï¼ˆå¤–éƒ¨çš„ï¼‰<code>state</code>å¯¹è±¡åˆ°ï¼ˆUI ç»„ä»¶çš„ï¼‰<code>props</code>å¯¹è±¡çš„æ˜ å°„å…³ç³»ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mapStateToProps</span> = (<span class="params">state</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">todos</span>: <span class="title function_">getVisibleTodos</span>(state.<span class="property">todos</span>, state.<span class="property">visibilityFilter</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>mapStateToProps</code>ä¼šè®¢é˜… Storeï¼Œæ¯å½“<code>state</code>æ›´æ–°çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œé‡æ–°è®¡ç®— UI ç»„ä»¶çš„å‚æ•°ï¼Œä»è€Œè§¦å‘ UI ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p>
<p><code>mapStateToProps</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯<code>state</code>å¯¹è±¡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»£è¡¨å®¹å™¨ç»„ä»¶çš„<code>props</code>å¯¹è±¡ã€‚</p>
<p><code>connect</code>æ–¹æ³•å¯ä»¥çœç•¥<code>mapStateToProps</code>å‚æ•°ï¼Œé‚£æ ·çš„è¯ï¼ŒUI ç»„ä»¶å°±ä¸ä¼šè®¢é˜…Storeï¼Œå°±æ˜¯è¯´ Store çš„æ›´æ–°ä¸ä¼šå¼•èµ· UI ç»„ä»¶çš„æ›´æ–°ã€‚</p>
</li>
<li><h3 id="mapDispatchToProps"><a href="#mapDispatchToProps" class="headerlink" title="mapDispatchToProps"></a><code>mapDispatchToProps</code></h3><p><code>mapDispatchToProps</code>æ˜¯<code>connect</code>å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥å»ºç«‹ UI ç»„ä»¶çš„å‚æ•°åˆ°<code>store.dispatch</code>æ–¹æ³•çš„æ˜ å°„</p>
<p>å¦‚æœ<code>mapDispatchToProps</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼šå¾—åˆ°<code>dispatch</code>å’Œ<code>ownProps</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mapDispatchToProps</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  dispatch,</span></span><br><span class="line"><span class="params">  ownProps</span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">onClick</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">dispatch</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;SET_VISIBILITY_FILTER&#x27;</span>,</span><br><span class="line">        <span class="attr">filter</span>: ownProps.<span class="property">filter</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ<code>mapDispatchToProps</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„æ¯ä¸ªé”®åä¹Ÿæ˜¯å¯¹åº” UI ç»„ä»¶çš„åŒåå‚æ•°ï¼Œé”®å€¼åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼šè¢«å½“ä½œ Action creator ï¼Œè¿”å›çš„ Action ä¼šç”± Redux è‡ªåŠ¨å‘å‡º(dispatch).</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mapDispatchToProps = &#123;</span><br><span class="line">  <span class="attr">onClick</span>: <span class="function">(<span class="params">filter</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;SET_VISIBILITY_FILTER&#x27;</span>,</span><br><span class="line">    <span class="attr">filter</span>: filter</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="è®¡æ•°å™¨Demoï¼š"><a href="#è®¡æ•°å™¨Demoï¼š" class="headerlink" title="è®¡æ•°å™¨Demoï¼š"></a>è®¡æ•°å™¨Demoï¼š</h2><p>ä¸¤ä¸ªç»„ä»¶ï¼ŒæŒ‰é’®ComAå’Œæ–‡æœ¬ComBï¼Œç‚¹å‡»æŒ‰é’®+1ï¼Œç”¨react-reduxå®ç°é€šä¿¡çš„è¿‡ç¨‹</p>
</li>
</ul>
<p><img src="/../assets/image-20210310173423401.png" alt="image-20210310173423401"></p>
]]></content>
      <categories>
        <category>çŠ¶æ€ç®¡ç†</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>React</tag>
        <tag>Redux</tag>
      </tags>
  </entry>
  <entry>
    <title>Reactçš„è®¾è®¡å’Œå®ç°</title>
    <url>/2021/09/29/React%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<h4 id="æœ¬ç¯‡ç¬”è®°çš„ç›®çš„ï¼šç«™åœ¨æ›´é«˜çš„è§’åº¦çœ‹å¾…React"><a href="#æœ¬ç¯‡ç¬”è®°çš„ç›®çš„ï¼šç«™åœ¨æ›´é«˜çš„è§’åº¦çœ‹å¾…React" class="headerlink" title="æœ¬ç¯‡ç¬”è®°çš„ç›®çš„ï¼šç«™åœ¨æ›´é«˜çš„è§’åº¦çœ‹å¾…React"></a>æœ¬ç¯‡ç¬”è®°çš„ç›®çš„ï¼šç«™åœ¨æ›´é«˜çš„è§’åº¦çœ‹å¾…React</h4><h4 id="Reactçš„è®¾è®¡æ€è·¯"><a href="#Reactçš„è®¾è®¡æ€è·¯" class="headerlink" title="Reactçš„è®¾è®¡æ€è·¯"></a>Reactçš„è®¾è®¡æ€è·¯</h4><ul>
<li><p>è§£å†³UIç¼–ç¨‹çš„ç—›ç‚¹</p>
<ol>
<li><p>çŠ¶æ€æ›´æ–°ï¼ŒUIä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒdom apiè¿›è¡Œæ›´æ–°</p>
<ol start="2">
<li>æ¬ ç¼ºåŸºæœ¬ä»£ç çš„å°è£…å’Œéš”ç¦»ï¼Œä»£ç å±‚é¢æ²¡æœ‰ç»„ä»¶åŒ–</li>
<li>UIä¹‹é—´æ•°æ®ä¾èµ–ï¼Œéœ€è¦æ‰‹åŠ¨ç»´æŠ¤ï¼Œå¦‚æœä¾èµ–é“¾è·¯è¿‡é•¿ï¼Œä¼šæœ‰ callback hellçš„é—®é¢˜</li>
</ol>
</li>
</ol>
</li>
<li><p>å“åº”å¼ç¼–ç¨‹</p>
</li>
</ul>
<p><img src="/../assets/image-20220210203412954.png" alt="image-20220210203412954"></p>
<ul>
<li><p>æœŸæœ›èƒ½</p>
<pre><code>1. çŠ¶æ€æ›´æ–°ï¼ŒUIè‡ªåŠ¨æ›´æ–°
2. å‰ç«¯ä»£ç ç»„ä»¶åŒ–ï¼Œå¯å¤ç”¨ï¼Œå¯å°è£…
3. çŠ¶æ€ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œåªéœ€è¦å£°æ˜å³å¯
</code></pre>
</li>
<li><p>ç»„ä»¶åŒ–</p>
<pre><code>1. ç»„ä»¶æ˜¯ç»„ä»¶çš„ç»„åˆ/åŸå­ç»„ä»¶
2. ç»„ä»¶å†…æ‹¥æœ‰çŠ¶æ€ï¼Œå¤–éƒ¨ä¸å¯è§
3. çˆ¶ç»„ä»¶å¯å°†çŠ¶æ€ä¼ å…¥ç»„ä»¶å†…éƒ¨
</code></pre>
</li>
<li><p>çŠ¶æ€å½’å±é—®é¢˜</p>
<pre><code>1. reactæ˜¯å•å‘æ•°æ®æµï¼Œåªèƒ½çˆ¶ç»„ä»¶å°†çŠ¶æ€ä¼ é€’ç»™å­ç»„ä»¶ï¼ˆä½†å¯ä»¥å°†æ”¹å˜çˆ¶ç»„ä»¶çŠ¶æ€çš„æ–¹æ³•ä¼ é€’ç»™å­ç»„ä»¶å®ç°çˆ¶å­ç»„ä»¶é€šä¿¡ï¼‰
2. å¦‚ä½•è§£å†³ä¸åˆç†çš„çŠ¶æ€ä¸Šå‡é—®é¢˜ï¼Ÿ
3. ç»„ä»¶çŠ¶æ€æ”¹å˜åï¼Œå¦‚ä½•æ›´æ–°dom
</code></pre>
</li>
</ul>
<span id="more"></span>


<h4 id="Reactçš„å®ç°"><a href="#Reactçš„å®ç°" class="headerlink" title="Reactçš„å®ç°"></a>Reactçš„å®ç°</h4><ul>
<li>DIffç®—æ³•</li>
</ul>
<img src="../assets/image-20220210212319207.png" alt="image-20220210212319207" style="zoom:40%;" />



<h3 id="Reactè§£å†³çŠ¶æ€ç®¡ç†é—®é¢˜"><a href="#Reactè§£å†³çŠ¶æ€ç®¡ç†é—®é¢˜" class="headerlink" title="Reactè§£å†³çŠ¶æ€ç®¡ç†é—®é¢˜"></a>Reactè§£å†³çŠ¶æ€ç®¡ç†é—®é¢˜</h3><p>å…ˆè¯´ç»“è®ºï¼šä½¿ç”¨çŠ¶æ€ç®¡ç†åº“</p>
<ul>
<li><p>çŠ¶æ€ç®¡ç†åº“æ ¸å¿ƒæ€æƒ³ï¼šå°†çŠ¶æ€æŠ½ç¦»åˆ°uiå¤–éƒ¨è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚</p>
</li>
<li><p>å°†çŠ¶æ€æŠ½ç¦»åˆ°uiå¤–éƒ¨çš„é—®é¢˜ï¼šé™ä½äº†ç»„ä»¶å¤ç”¨æ€§ï¼Œç»„ä»¶è·Ÿå¤–éƒ¨çŠ¶æ€å¼ºè€¦åˆ</p>
</li>
</ul>
<p><strong>ä½•æ—¶ä½¿ç”¨çŠ¶æ€ç®¡ç†åº“ï¼Ÿ</strong></p>
<p><strong>åˆ¤æ–­ä¸€ä¸ªçŠ¶æ€æ˜¯ä¸æ˜¯åªå±äºç»„ä»¶æœ¬èº«ï¼Œå¦‚è‹¥æ˜¯åˆ™ä¸éœ€è¦çŠ¶æ€ç®¡ç†åº“</strong></p>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>TypeScriptå…¥é—¨</title>
    <url>/2021/10/14/Typescript%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h3 id="TypeScriptç®€ä»‹"><a href="#TypeScriptç®€ä»‹" class="headerlink" title="TypeScriptç®€ä»‹"></a>TypeScriptç®€ä»‹</h3><ol>
<li>TypeScriptæ˜¯JavaScriptçš„è¶…é›†ã€‚</li>
<li>å®ƒå¯¹JSè¿›è¡Œäº†æ‰©å±•ï¼Œå‘JSä¸­å¼•å…¥äº†ç±»å‹çš„æ¦‚å¿µï¼Œå¹¶æ·»åŠ äº†è®¸å¤šæ–°çš„ç‰¹æ€§ã€‚</li>
<li>TSä»£ç éœ€è¦é€šè¿‡ç¼–è¯‘å™¨ç¼–è¯‘ä¸ºJSï¼Œç„¶åå†äº¤ç”±JSè§£æå™¨æ‰§è¡Œã€‚</li>
<li>TSå®Œå…¨å…¼å®¹JSï¼Œæ¢è¨€ä¹‹ï¼Œä»»ä½•çš„JSä»£ç éƒ½å¯ä»¥ç›´æ¥å½“æˆJSä½¿ç”¨ã€‚</li>
<li>ç›¸è¾ƒäºJSè€Œè¨€ï¼ŒTSæ‹¥æœ‰äº†é™æ€ç±»å‹ï¼Œæ›´åŠ ä¸¥æ ¼çš„è¯­æ³•ï¼Œæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼›TSå¯ä»¥åœ¨ä»£ç æ‰§è¡Œå‰å°±å®Œæˆä»£ç çš„æ£€æŸ¥ï¼Œå‡å°äº†è¿è¡Œæ—¶å¼‚å¸¸çš„å‡ºç°çš„å‡ ç‡ï¼›TSä»£ç å¯ä»¥ç¼–è¯‘ä¸ºä»»æ„ç‰ˆæœ¬çš„JSä»£ç ï¼Œå¯æœ‰æ•ˆè§£å†³ä¸åŒJSè¿è¡Œç¯å¢ƒçš„å…¼å®¹é—®é¢˜ï¼›åŒæ ·çš„åŠŸèƒ½ï¼ŒTSçš„ä»£ç é‡è¦å¤§äºJSï¼Œä½†ç”±äºTSçš„ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œå˜é‡ç±»å‹æ›´åŠ æ˜ç¡®ï¼Œåœ¨åæœŸä»£ç çš„ç»´æŠ¤ä¸­TSå´è¿œè¿œèƒœäºJSã€‚</li>
</ol>
<h3 id="TypeScript-å¼€å‘ç¯å¢ƒæ­å»º"><a href="#TypeScript-å¼€å‘ç¯å¢ƒæ­å»º" class="headerlink" title="TypeScript å¼€å‘ç¯å¢ƒæ­å»º"></a>TypeScript å¼€å‘ç¯å¢ƒæ­å»º</h3><ol>
<li><p>ä¸‹è½½Node.js</p>
<ul>
<li>64ä½ï¼š<a href="https://nodejs.org/dist/v14.15.1/node-v14.15.1-x64.msi">https://nodejs.org/dist/v14.15.1/node-v14.15.1-x64.msi</a></li>
<li>32ä½ï¼š<a href="https://nodejs.org/dist/v14.15.1/node-v14.15.1-x86.msi">https://nodejs.org/dist/v14.15.1/node-v14.15.1-x86.msi</a></li>
</ul>
</li>
<li><p>å®‰è£…Node.js</p>
</li>
<li><p>ä½¿ç”¨npmå…¨å±€å®‰è£…typescript</p>
<ul>
<li>è¿›å…¥å‘½ä»¤è¡Œ</li>
<li>è¾“å…¥ï¼šnpm i -g typescript</li>
</ul>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªtsæ–‡ä»¶</p>
</li>
<li><p>ä½¿ç”¨tscå¯¹tsæ–‡ä»¶è¿›è¡Œç¼–è¯‘</p>
<ul>
<li><p>è¿›å…¥å‘½ä»¤è¡Œ</p>
</li>
<li><p>è¿›å…¥tsæ–‡ä»¶æ‰€åœ¨ç›®å½•</p>
</li>
<li><p>æ‰§è¡Œå‘½ä»¤ï¼štsc xxx.ts</p>
</li>
</ul>
</li>
</ol>
 <span id="more"></span>    

<h3 id="åŸºæœ¬ç±»å‹"><a href="#åŸºæœ¬ç±»å‹" class="headerlink" title="åŸºæœ¬ç±»å‹"></a>åŸºæœ¬ç±»å‹</h3><h5 id="ç±»å‹å£°æ˜"><a href="#ç±»å‹å£°æ˜" class="headerlink" title="ç±»å‹å£°æ˜"></a>ç±»å‹å£°æ˜</h5><ul>
<li><p>ç±»å‹å£°æ˜æ˜¯TSéå¸¸é‡è¦çš„ä¸€ä¸ªç‰¹ç‚¹</p>
</li>
<li><p>é€šè¿‡ç±»å‹å£°æ˜å¯ä»¥æŒ‡å®šTSä¸­å˜é‡ï¼ˆå‚æ•°ã€å½¢å‚ï¼‰çš„ç±»å‹</p>
</li>
<li><p>æŒ‡å®šç±»å‹åï¼Œå½“ä¸ºå˜é‡èµ‹å€¼æ—¶ï¼ŒTSç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ£€æŸ¥å€¼æ˜¯å¦ç¬¦åˆç±»å‹å£°æ˜ï¼Œç¬¦åˆåˆ™èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™</p>
</li>
<li><p>ç®€è€Œè¨€ä¹‹ï¼Œç±»å‹å£°æ˜ç»™å˜é‡è®¾ç½®äº†ç±»å‹ï¼Œä½¿å¾—å˜é‡åªèƒ½å­˜å‚¨æŸç§ç±»å‹çš„å€¼</p>
</li>
<li><p>è¯­æ³•ï¼š</p>
<ul>
<li><pre><code class="typescript">let å˜é‡: ç±»å‹;

let å˜é‡: ç±»å‹ = å€¼;

function fn(å‚æ•°: ç±»å‹, å‚æ•°: ç±»å‹): ç±»å‹&#123;
    ...
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### è‡ªåŠ¨ç±»å‹åˆ¤æ–­</span><br><span class="line"></span><br><span class="line">- TSæ‹¥æœ‰è‡ªåŠ¨çš„ç±»å‹åˆ¤æ–­æœºåˆ¶</span><br><span class="line">- å½“å¯¹å˜é‡çš„å£°æ˜å’Œèµ‹å€¼æ˜¯åŒæ—¶è¿›è¡Œçš„ï¼ŒTSç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ¤æ–­å˜é‡çš„ç±»å‹</span><br><span class="line">- æ‰€ä»¥å¦‚æœä½ çš„å˜é‡çš„å£°æ˜å’Œèµ‹å€¼æ—¶åŒæ—¶è¿›è¡Œçš„ï¼Œå¯ä»¥çœç•¥æ‰ç±»å‹å£°æ˜</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### ç±»å‹</span><br><span class="line"></span><br><span class="line">|  ç±»å‹   |       ä¾‹å­        |              æè¿°              |</span><br><span class="line">| :-----: | :---------------: | :----------------------------: |</span><br><span class="line">| number  |    1, -33, 2.5    |            ä»»æ„æ•°å­—            |</span><br><span class="line">| string  | &#x27;hi&#x27;, &quot;hi&quot;, `hi`  |           ä»»æ„å­—ç¬¦ä¸²           |</span><br><span class="line">| boolean |    trueã€false    |       å¸ƒå°”å€¼trueæˆ–false        |</span><br><span class="line">| å­—é¢é‡  |      å…¶æœ¬èº«       |  é™åˆ¶å˜é‡çš„å€¼å°±æ˜¯è¯¥å­—é¢é‡çš„å€¼  |</span><br><span class="line">|   any   |         *         |            ä»»æ„ç±»å‹            |</span><br><span class="line">| unknown |         *         |         ç±»å‹å®‰å…¨çš„any          |</span><br><span class="line">|  void   | ç©ºå€¼ï¼ˆundefinedï¼‰ |     æ²¡æœ‰å€¼ï¼ˆæˆ–undefinedï¼‰      |</span><br><span class="line">|  never  |      æ²¡æœ‰å€¼       |          ä¸èƒ½æ˜¯ä»»ä½•å€¼          |</span><br><span class="line">| object  |  &#123;name:&#x27;å­™æ‚Ÿç©º&#x27;&#125;  |          ä»»æ„çš„JSå¯¹è±¡          |</span><br><span class="line">|  array  |      [1,2,3]      |           ä»»æ„JSæ•°ç»„           |</span><br><span class="line">|  tuple  |       [4,5]       | å…ƒç´ ï¼ŒTSæ–°å¢ç±»å‹ï¼Œå›ºå®šé•¿åº¦æ•°ç»„ |</span><br><span class="line">|  enum   |    enum&#123;A, B&#125;     |       æšä¸¾ï¼ŒTSä¸­æ–°å¢ç±»å‹       |</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### **enum æšä¸¾ç±»å‹**</span><br><span class="line"></span><br><span class="line">- ```typescript</span><br><span class="line">  enum Color &#123;</span><br><span class="line">    Red = 0,</span><br><span class="line">    Green,</span><br><span class="line">    Blue,</span><br><span class="line">  &#125;</span><br><span class="line">  // ä½¿ç”¨</span><br><span class="line">  const red = Color.Red;</span><br><span class="line">  const green = Color.Green;</span><br><span class="line">  </span><br><span class="line">  // ç¼–è¯‘æˆjsåï¼Œæšä¸¾ç±»å‹å®é™…ä¸Šæ˜¯ä¸€ä¸ªåŒå‘é”®å€¼å¯¹å¯¹è±¡ï¼ˆå¯ä»¥é€šè¿‡é”®è·å–å€¼ä¹Ÿå¯ä»¥é€šè¿‡å€¼è·å–é”®ï¼‰</span><br><span class="line">  &quot;use strict&quot;;</span><br><span class="line">  var Color;</span><br><span class="line">  (function (Color) &#123;</span><br><span class="line">      Color[Color[&quot;Red&quot;] = 0] = &quot;Red&quot;;</span><br><span class="line">      Color[Color[&quot;Green&quot;] = 1] = &quot;Green&quot;;</span><br><span class="line">      Color[Color[&quot;Blue&quot;] = 2] = &quot;Blue&quot;;</span><br><span class="line">  &#125;)(Color || (Color = &#123;&#125;));</span><br><span class="line">  // ä½¿ç”¨</span><br><span class="line">  const red = Color.Red;</span><br><span class="line">  const green = Color.Green;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>å®šä¹‰å¸¸é‡æšä¸¾ï¼ˆåªèƒ½é€šè¿‡é”®è·å–å€¼ï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">enum</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">  <span class="title class_">Red</span> = <span class="number">0</span>,</span><br><span class="line">  <span class="title class_">Green</span>,</span><br><span class="line">  <span class="title class_">Blue</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> red = <span class="title class_">Color</span>.<span class="property">Red</span>;</span><br><span class="line"><span class="keyword">const</span> green = <span class="title class_">Color</span>.<span class="property">Green</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¼–è¯‘æˆjs</span></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> red = <span class="number">0</span> <span class="comment">/* Red */</span>;</span><br><span class="line"><span class="keyword">const</span> green = <span class="number">1</span> <span class="comment">/* Green */</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="å®šä¹‰å‡½æ•°ç±»å‹"><a href="#å®šä¹‰å‡½æ•°ç±»å‹" class="headerlink" title="å®šä¹‰å‡½æ•°ç±»å‹"></a>å®šä¹‰å‡½æ•°ç±»å‹</h5><ul>
<li><pre><code class="typescript">// ç®­å¤´å‡½æ•°å¯ä»¥ä»¥è¿™ç§å½¢å¼å®šä¹‰
const add: (a: number, b: number) =&gt; number = (a, b) =&gt; &#123;
    return a + b;
&#125;;

// ä¹Ÿå¯ä»¥è¿™ç§å½¢å¼
interface Iadd &#123;
    (x: number, y: number): number;
&#125;
const add: Iadd = (a, b) =&gt; &#123;
    return a + b;
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### ç±»å‹åˆ«å</span><br><span class="line"></span><br><span class="line">&lt;img src=&quot;..\Picture\image-20220225230844666.png&quot; alt=&quot;image-20220225230844666&quot; style=&quot;zoom:23%;&quot; /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### ç±»å‹æ–­è¨€</span><br><span class="line"></span><br><span class="line">- æœ‰äº›æƒ…å†µä¸‹ï¼Œå˜é‡çš„ç±»å‹å¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯å¾ˆæ˜ç¡®ï¼Œä½†æ˜¯TSç¼–è¯‘å™¨å´å¹¶ä¸æ¸…æ¥šï¼Œæ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡ç±»å‹æ–­è¨€æ¥å‘Šè¯‰ç¼–è¯‘å™¨å˜é‡çš„ç±»å‹ï¼Œæ–­è¨€æœ‰ä¸¤ç§å½¢å¼ï¼š</span><br><span class="line"></span><br><span class="line">  - ç¬¬ä¸€ç§</span><br><span class="line"></span><br><span class="line">    - ```typescript</span><br><span class="line">      let someValue: unknown = &quot;this is a string&quot;;</span><br><span class="line">      let strLength: number = (someValue as string).length;</span><br></pre></td></tr></table></figure>

- ç¬¬äºŒç§

  - ```typescript
    let someValue: unknown = &quot;this is a string&quot;;
    let strLength: number = (&lt;string&gt;someValue).length;
    <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### ç±»å‹ä¿å«ä¸ç±»å‹å®ˆæŠ¤</span><br><span class="line"></span><br><span class="line">&lt;img src=&quot;..\assets\image-20220225231806225.png&quot; alt=&quot;image-20220225231806225&quot; style=&quot;zoom:25%;&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;img src=&quot;..\assets\image-20220225232035688.png&quot; alt=&quot;image-20220225232035688&quot; style=&quot;zoom:25%;&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;img src=&quot;..\assets\image-20220225232336109.png&quot; alt=&quot;image-20220225232336109&quot; style=&quot;zoom:25%;&quot; /&gt;</span><br><span class="line"></span><br><span class="line">##### d.tsæ–‡ä»¶/declare</span><br><span class="line"></span><br><span class="line">+ å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—ï¼ˆä¾‹å¦‚lodashï¼‰æ—¶</span><br><span class="line"></span><br><span class="line">![image-20220225193949940](..\assets\image-20220225193949940.png)</span><br><span class="line"></span><br><span class="line">åŸå› æ˜¯lodashæ˜¯ä½¿ç”¨jsç¼–å†™çš„ï¼Œæ²¡æœ‰ç±»å‹å£°æ˜ï¼Œå¦‚ä¸‹ï¼ŒcamelCaseå‡½æ•°æ²¡æœ‰ç±»å‹å£°æ˜</span><br><span class="line"></span><br><span class="line">```typescript</span><br><span class="line">import &#123; camelCase &#125; from &#x27;lodash&#x27;;</span><br><span class="line">const res = camelCase(&#x27;hello guy&#x27;)</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<p>è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨<strong>declare</strong>ï¼ˆå…¶å®å°±æ˜¯ä¸€ä¸ªæˆå‘˜åœ¨å®šä¹‰çš„æ—¶å€™æ²¡æœ‰å£°æ˜ï¼Œæ¯”å¦‚nodeè£…ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯jså†™çš„ï¼Œè¿™æ—¶å€™ä½¿ç”¨declareåšä¸€ä¸ªå•ç‹¬çš„å£°æ˜ï¼‰å¯¹å‡½æ•°å£°æ˜</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; camelCase &#125; <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">camelCase</span>(<span class="params"><span class="attr">input</span>: <span class="built_in">string</span></span>): <span class="built_in">string</span></span><br><span class="line"><span class="keyword">const</span> res = <span class="title function_">camelCase</span>(<span class="string">&#x27;hello guy&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>å…¶ä»–è§£å†³æ–¹æ¡ˆï¼š</strong>å®‰è£…d.tsæ–‡ä»¶ï¼ˆä¸“é—¨ç”¨æ¥åšç±»å‹å£°æ˜çš„æ–‡ä»¶ï¼Œåº”è¯¥ä¸ºå¼€å‘ä¾èµ–ï¼‰</p>
<h3 id="ç¼–è¯‘é€‰é¡¹"><a href="#ç¼–è¯‘é€‰é¡¹" class="headerlink" title="ç¼–è¯‘é€‰é¡¹"></a>ç¼–è¯‘é€‰é¡¹</h3><ul>
<li><p>è‡ªåŠ¨ç¼–è¯‘æ–‡ä»¶</p>
<ul>
<li><p>ç¼–è¯‘æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨ -w æŒ‡ä»¤åï¼ŒTSç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç›‘è§†æ–‡ä»¶çš„å˜åŒ–ï¼Œå¹¶åœ¨æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶å¯¹æ–‡ä»¶è¿›è¡Œé‡æ–°ç¼–è¯‘ã€‚</p>
</li>
<li><p>ç¤ºä¾‹ï¼š</p>
<ul>
<li>powershell<br>tsc xxx.ts -w</li>
</ul>
</li>
</ul>
</li>
<li><p>è‡ªåŠ¨ç¼–è¯‘æ•´ä¸ªé¡¹ç›®</p>
<ul>
<li><p>å¦‚æœç›´æ¥ä½¿ç”¨tscæŒ‡ä»¤ï¼Œåˆ™å¯ä»¥è‡ªåŠ¨å°†å½“å‰é¡¹ç›®ä¸‹çš„æ‰€æœ‰tsæ–‡ä»¶ç¼–è¯‘ä¸ºjsæ–‡ä»¶ã€‚</p>
</li>
<li><p>ä½†æ˜¯èƒ½ç›´æ¥ä½¿ç”¨tscå‘½ä»¤çš„å‰ææ—¶ï¼Œè¦å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªtsçš„é…ç½®æ–‡ä»¶ tsconfig.json</p>
</li>
<li><p>tsconfig.jsonæ˜¯ä¸€ä¸ªJSONæ–‡ä»¶ï¼Œæ·»åŠ é…ç½®æ–‡ä»¶åï¼Œåªéœ€åªéœ€ tsc å‘½ä»¤å³å¯å®Œæˆå¯¹æ•´ä¸ªé¡¹ç›®çš„ç¼–è¯‘</p>
</li>
<li><p>é…ç½®é€‰é¡¹ï¼š</p>
<ul>
<li><p>include</p>
<ul>
<li><p>å®šä¹‰å¸Œæœ›è¢«ç¼–è¯‘æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</p>
</li>
<li><p>é»˜è®¤å€¼ï¼š[â€œ**&#x2F;*â€œ]</p>
</li>
<li><p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><pre><code class="json">&quot;include&quot;:[&quot;src/**/*&quot;, &quot;tests/**/*&quot;]
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">    - ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæ‰€æœ‰srcç›®å½•å’Œtestsç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½ä¼šè¢«ç¼–è¯‘</span><br><span class="line"></span><br><span class="line">- exclude</span><br><span class="line"></span><br><span class="line">  - å®šä¹‰éœ€è¦æ’é™¤åœ¨å¤–çš„ç›®å½•</span><br><span class="line"></span><br><span class="line">  - é»˜è®¤å€¼ï¼š[&quot;node_modules&quot;, &quot;bower_components&quot;, &quot;jspm_packages&quot;]</span><br><span class="line"></span><br><span class="line">  - ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">    - ```json</span><br><span class="line">      &quot;exclude&quot;: [&quot;./src/hello/**/*&quot;]</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œsrcä¸‹helloç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½ä¸ä¼šè¢«ç¼–è¯‘</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>extends</p>
<ul>
<li><p>å®šä¹‰è¢«ç»§æ‰¿çš„é…ç½®æ–‡ä»¶</p>
</li>
<li><p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><pre><code class="json">&quot;extends&quot;: &quot;./configs/base&quot;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">    - ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå½“å‰é…ç½®æ–‡ä»¶ä¸­ä¼šè‡ªåŠ¨åŒ…å«configç›®å½•ä¸‹base.jsonä¸­çš„æ‰€æœ‰é…ç½®ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">- files</span><br><span class="line"></span><br><span class="line">  - æŒ‡å®šè¢«ç¼–è¯‘æ–‡ä»¶çš„åˆ—è¡¨ï¼Œåªæœ‰éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶å°‘æ—¶æ‰ä¼šç”¨åˆ°</span><br><span class="line"></span><br><span class="line">  - ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">    - ```json</span><br><span class="line">      &quot;files&quot;: [</span><br><span class="line">          &quot;core.ts&quot;,</span><br><span class="line">          &quot;sys.ts&quot;,</span><br><span class="line">          &quot;types.ts&quot;,</span><br><span class="line">          &quot;scanner.ts&quot;,</span><br><span class="line">          &quot;parser.ts&quot;,</span><br><span class="line">          &quot;utilities.ts&quot;,</span><br><span class="line">          &quot;binder.ts&quot;,</span><br><span class="line">          &quot;checker.ts&quot;,</span><br><span class="line">          &quot;tsc.ts&quot;</span><br><span class="line">        ]</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>åˆ—è¡¨ä¸­çš„æ–‡ä»¶éƒ½ä¼šè¢«TSç¼–è¯‘å™¨æ‰€ç¼–è¯‘</p>
</li>
</ul>
</li>
<li><p>compilerOptions</p>
<ul>
<li><p>ç¼–è¯‘é€‰é¡¹æ˜¯é…ç½®æ–‡ä»¶ä¸­éå¸¸é‡è¦ä¹Ÿæ¯”è¾ƒå¤æ‚çš„é…ç½®é€‰é¡¹</p>
</li>
<li><p>åœ¨compilerOptionsä¸­åŒ…å«å¤šä¸ªå­é€‰é¡¹ï¼Œç”¨æ¥å®Œæˆå¯¹ç¼–è¯‘çš„é…ç½®</p>
<ul>
<li><p>é¡¹ç›®é€‰é¡¹</p>
<ul>
<li><p>target</p>
<ul>
<li><p>è®¾ç½®tsä»£ç ç¼–è¯‘çš„ç›®æ ‡ç‰ˆæœ¬</p>
</li>
<li><p>å¯é€‰å€¼ï¼š</p>
<ul>
<li>ES3ï¼ˆé»˜è®¤ï¼‰ã€ES5ã€ES6&#x2F;ES2015ã€ES7&#x2F;ES2016ã€ES2017ã€ES2018ã€ES2019ã€ES2020ã€ESNext</li>
</ul>
</li>
<li><p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><pre><code class="json">&quot;compilerOptions&quot;: &#123;
    &quot;target&quot;: &quot;ES6&quot;
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">    - å¦‚ä¸Šè®¾ç½®ï¼Œæˆ‘ä»¬æ‰€ç¼–å†™çš„tsä»£ç å°†ä¼šè¢«ç¼–è¯‘ä¸ºES6ç‰ˆæœ¬çš„jsä»£ç </span><br><span class="line"></span><br><span class="line">- lib</span><br><span class="line"></span><br><span class="line">  - æŒ‡å®šä»£ç è¿è¡Œæ—¶æ‰€åŒ…å«çš„åº“ï¼ˆå®¿ä¸»ç¯å¢ƒï¼‰</span><br><span class="line"></span><br><span class="line">  - å¯é€‰å€¼ï¼š</span><br><span class="line"></span><br><span class="line">    - ES5ã€ES6/ES2015ã€ES7/ES2016ã€ES2017ã€ES2018ã€ES2019ã€ES2020ã€ESNextã€DOMã€WebWorkerã€ScriptHost ......</span><br><span class="line"></span><br><span class="line">  - ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">    - ```json</span><br><span class="line">      &quot;compilerOptions&quot;: &#123;</span><br><span class="line">          &quot;target&quot;: &quot;ES6&quot;,</span><br><span class="line">          &quot;lib&quot;: [&quot;ES6&quot;, &quot;DOM&quot;],</span><br><span class="line">          &quot;outDir&quot;: &quot;dist&quot;,</span><br><span class="line">          &quot;outFile&quot;: &quot;dist/aa.js&quot;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p>module</p>
<ul>
<li><p>è®¾ç½®ç¼–è¯‘åä»£ç ä½¿ç”¨çš„æ¨¡å—åŒ–ç³»ç»Ÿ</p>
</li>
<li><p>å¯é€‰å€¼ï¼š</p>
<ul>
<li>CommonJSã€UMDã€AMDã€Systemã€ES2020ã€ESNextã€None</li>
</ul>
</li>
<li><p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><pre><code class="typescript">&quot;compilerOptions&quot;: &#123;
    &quot;module&quot;: &quot;CommonJS&quot;
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- outDir</span><br><span class="line"></span><br><span class="line">  - ç¼–è¯‘åæ–‡ä»¶çš„æ‰€åœ¨ç›®å½•</span><br><span class="line"></span><br><span class="line">  - é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼–è¯‘åçš„jsæ–‡ä»¶ä¼šå’Œtsæ–‡ä»¶ä½äºç›¸åŒçš„ç›®å½•ï¼Œè®¾ç½®outDiråå¯ä»¥æ”¹å˜ç¼–è¯‘åæ–‡ä»¶çš„ä½ç½®</span><br><span class="line"></span><br><span class="line">  - ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">    - ```json</span><br><span class="line">      &quot;compilerOptions&quot;: &#123;</span><br><span class="line">          &quot;outDir&quot;: &quot;dist&quot;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>è®¾ç½®åç¼–è¯‘åçš„jsæ–‡ä»¶å°†ä¼šç”Ÿæˆåˆ°distç›®å½•</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>outFile</p>
<ul>
<li><p>å°†æ‰€æœ‰çš„æ–‡ä»¶ç¼–è¯‘ä¸ºä¸€ä¸ªjsæ–‡ä»¶</p>
</li>
<li><p>é»˜è®¤ä¼šå°†æ‰€æœ‰çš„ç¼–å†™åœ¨å…¨å±€ä½œç”¨åŸŸä¸­çš„ä»£ç åˆå¹¶ä¸ºä¸€ä¸ªjsæ–‡ä»¶ï¼Œå¦‚æœmoduleåˆ¶å®šäº†Noneã€Systemæˆ–AMDåˆ™ä¼šå°†æ¨¡å—ä¸€èµ·åˆå¹¶åˆ°æ–‡ä»¶ä¹‹ä¸­</p>
</li>
<li><p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><pre><code class="json">&quot;compilerOptions&quot;: &#123;
    &quot;outFile&quot;: &quot;dist/app.js&quot;
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- rootDir</span><br><span class="line"></span><br><span class="line">  - æŒ‡å®šä»£ç çš„æ ¹ç›®å½•ï¼Œé»˜è®¤æƒ…å†µä¸‹ç¼–è¯‘åæ–‡ä»¶çš„ç›®å½•ç»“æ„ä¼šä»¥æœ€é•¿çš„å…¬å…±ç›®å½•ä¸ºæ ¹ç›®å½•ï¼Œé€šè¿‡rootDirå¯ä»¥æ‰‹åŠ¨æŒ‡å®šæ ¹ç›®å½•</span><br><span class="line"></span><br><span class="line">  - ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">    - ```json</span><br><span class="line">      &quot;compilerOptions&quot;: &#123;</span><br><span class="line">          &quot;rootDir&quot;: &quot;./src&quot;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p>allowJs</p>
<ul>
<li>æ˜¯å¦å¯¹jsæ–‡ä»¶ç¼–è¯‘</li>
</ul>
</li>
<li><p>checkJs</p>
<ul>
<li><p>æ˜¯å¦å¯¹jsæ–‡ä»¶è¿›è¡Œæ£€æŸ¥</p>
</li>
<li><p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><pre><code class="json">&quot;compilerOptions&quot;: &#123;
    &quot;allowJs&quot;: true,
    &quot;checkJs&quot;: true
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">            - removeComments</span><br><span class="line"></span><br><span class="line">              - æ˜¯å¦åˆ é™¤æ³¨é‡Š</span><br><span class="line">              - é»˜è®¤å€¼ï¼šfalse</span><br><span class="line"></span><br><span class="line">            - noEmit</span><br><span class="line"></span><br><span class="line">              - ä¸å¯¹ä»£ç è¿›è¡Œç¼–è¯‘</span><br><span class="line">              - é»˜è®¤å€¼ï¼šfalse</span><br><span class="line"></span><br><span class="line">            - sourceMap</span><br><span class="line"></span><br><span class="line">              - æ˜¯å¦ç”ŸæˆsourceMap</span><br><span class="line">              - é»˜è®¤å€¼ï¼šfalse</span><br><span class="line"></span><br><span class="line">              </span><br><span class="line"></span><br><span class="line">          - ä¸¥æ ¼æ£€æŸ¥</span><br><span class="line"></span><br><span class="line">            - strict</span><br><span class="line">              - å¯ç”¨æ‰€æœ‰çš„ä¸¥æ ¼æ£€æŸ¥ï¼Œé»˜è®¤å€¼ä¸ºtrueï¼Œè®¾ç½®åç›¸å½“äºå¼€å¯äº†æ‰€æœ‰çš„ä¸¥æ ¼æ£€æŸ¥</span><br><span class="line">            - alwaysStrict</span><br><span class="line">              - æ€»æ˜¯ä»¥ä¸¥æ ¼æ¨¡å¼å¯¹ä»£ç è¿›è¡Œç¼–è¯‘</span><br><span class="line">            - noImplicitAny</span><br><span class="line">              - ç¦æ­¢éšå¼çš„anyç±»å‹</span><br><span class="line">            - noImplicitThis</span><br><span class="line">              - ç¦æ­¢ç±»å‹ä¸æ˜ç¡®çš„this</span><br><span class="line">            - strictBindCallApply</span><br><span class="line">              - ä¸¥æ ¼æ£€æŸ¥bindã€callå’Œapplyçš„å‚æ•°åˆ—è¡¨</span><br><span class="line">            - strictFunctionTypes</span><br><span class="line">              - ä¸¥æ ¼æ£€æŸ¥å‡½æ•°çš„ç±»å‹</span><br><span class="line">            - strictNullChecks</span><br><span class="line">              - ä¸¥æ ¼çš„ç©ºå€¼æ£€æŸ¥</span><br><span class="line">            - strictPropertyInitialization</span><br><span class="line">              - ä¸¥æ ¼æ£€æŸ¥å±æ€§æ˜¯å¦åˆå§‹åŒ–</span><br><span class="line"></span><br><span class="line">          - é¢å¤–æ£€æŸ¥</span><br><span class="line"></span><br><span class="line">            - noFallthroughCasesInSwitch</span><br><span class="line">              - æ£€æŸ¥switchè¯­å¥åŒ…å«æ­£ç¡®çš„break</span><br><span class="line">            - noImplicitReturns</span><br><span class="line">              - æ£€æŸ¥å‡½æ•°æ²¡æœ‰éšå¼çš„è¿”å›å€¼</span><br><span class="line">            - noUnusedLocals</span><br><span class="line">              - æ£€æŸ¥æœªä½¿ç”¨çš„å±€éƒ¨å˜é‡</span><br><span class="line">            - noUnusedParameters</span><br><span class="line">              - æ£€æŸ¥æœªä½¿ç”¨çš„å‚æ•°</span><br><span class="line"></span><br><span class="line">          - é«˜çº§</span><br><span class="line"></span><br><span class="line">            - allowUnreachableCode</span><br><span class="line">              - æ£€æŸ¥ä¸å¯è¾¾ä»£ç </span><br><span class="line">              - å¯é€‰å€¼ï¼š</span><br><span class="line">                - trueï¼Œå¿½ç•¥ä¸å¯è¾¾ä»£ç </span><br><span class="line">                - falseï¼Œä¸å¯è¾¾ä»£ç å°†å¼•èµ·é”™è¯¯</span><br><span class="line">            - noEmitOnError</span><br><span class="line">              - æœ‰é”™è¯¯çš„æƒ…å†µä¸‹ä¸è¿›è¡Œç¼–è¯‘</span><br><span class="line">              - é»˜è®¤å€¼ï¼šfalse</span><br><span class="line">              </span><br><span class="line">              </span><br><span class="line"></span><br><span class="line">### webpack</span><br><span class="line"></span><br><span class="line">- é€šå¸¸æƒ…å†µä¸‹ï¼Œå®é™…å¼€å‘ä¸­æˆ‘ä»¬éƒ½éœ€è¦ä½¿ç”¨æ„å»ºå·¥å…·å¯¹ä»£ç è¿›è¡Œæ‰“åŒ…ï¼ŒTSåŒæ ·ä¹Ÿå¯ä»¥ç»“åˆæ„å»ºå·¥å…·ä¸€èµ·ä½¿ç”¨ï¼Œä¸‹è¾¹ä»¥webpackä¸ºä¾‹ä»‹ç»ä¸€ä¸‹å¦‚ä½•ç»“åˆæ„å»ºå·¥å…·ä½¿ç”¨TSã€‚</span><br><span class="line"></span><br><span class="line">- æ­¥éª¤ï¼š</span><br><span class="line"></span><br><span class="line">  1. åˆå§‹åŒ–é¡¹ç›®</span><br><span class="line"></span><br><span class="line">     - è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ ``` npm init -y```</span><br><span class="line">       - ä¸»è¦ä½œç”¨ï¼šåˆ›å»ºpackage.jsonæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">  2. ä¸‹è½½æ„å»ºå·¥å…·</span><br><span class="line"></span><br><span class="line">     - npm i -D webpack webpack-cli webpack-dev-server typescript ts-loader clean-webpack-plugin</span><br><span class="line">       - å…±å®‰è£…äº†7ä¸ªåŒ…</span><br><span class="line">         - webpack</span><br><span class="line">           - æ„å»ºå·¥å…·webpack</span><br><span class="line">         - webpack-cli</span><br><span class="line">           - webpackçš„å‘½ä»¤è¡Œå·¥å…·</span><br><span class="line">         - webpack-dev-server</span><br><span class="line">           - webpackçš„å¼€å‘æœåŠ¡å™¨</span><br><span class="line">         - typescript</span><br><span class="line">           - tsç¼–è¯‘å™¨</span><br><span class="line">         - ts-loader</span><br><span class="line">           - tsåŠ è½½å™¨ï¼Œç”¨äºåœ¨webpackä¸­ç¼–è¯‘tsæ–‡ä»¶</span><br><span class="line">         - html-webpack-plugin</span><br><span class="line">           - webpackä¸­htmlæ’ä»¶ï¼Œç”¨æ¥è‡ªåŠ¨åˆ›å»ºhtmlæ–‡ä»¶</span><br><span class="line">         - clean-webpack-plugin</span><br><span class="line">           - webpackä¸­çš„æ¸…é™¤æ’ä»¶ï¼Œæ¯æ¬¡æ„å»ºéƒ½ä¼šå…ˆæ¸…é™¤ç›®å½•</span><br><span class="line"></span><br><span class="line">  3. æ ¹ç›®å½•ä¸‹åˆ›å»ºwebpackçš„é…ç½®æ–‡ä»¶webpack.config.js</span><br><span class="line"></span><br><span class="line">     - ```javascript</span><br><span class="line">       const path = require(&quot;path&quot;);</span><br><span class="line">       const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</span><br><span class="line">       const &#123; CleanWebpackPlugin &#125; = require(&quot;clean-webpack-plugin&quot;);</span><br><span class="line">       </span><br><span class="line">       module.exports = &#123;</span><br><span class="line">           optimization:&#123;</span><br><span class="line">               minimize: false // å…³é—­ä»£ç å‹ç¼©ï¼Œå¯é€‰</span><br><span class="line">           &#125;,</span><br><span class="line">       </span><br><span class="line">           entry: &quot;./src/index.ts&quot;,</span><br><span class="line">           </span><br><span class="line">           devtool: &quot;inline-source-map&quot;,</span><br><span class="line">           </span><br><span class="line">           devServer: &#123;</span><br><span class="line">               contentBase: &#x27;./dist&#x27;</span><br><span class="line">           &#125;,</span><br><span class="line">       </span><br><span class="line">           output: &#123;</span><br><span class="line">               path: path.resolve(__dirname, &quot;dist&quot;),</span><br><span class="line">               filename: &quot;bundle.js&quot;,</span><br><span class="line">               environment: &#123;</span><br><span class="line">                   arrowFunction: false // å…³é—­webpackçš„ç®­å¤´å‡½æ•°ï¼Œå¯é€‰</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;,</span><br><span class="line">       </span><br><span class="line">           resolve: &#123;</span><br><span class="line">               extensions: [&quot;.ts&quot;, &quot;.js&quot;]</span><br><span class="line">           &#125;,</span><br><span class="line">           </span><br><span class="line">           module: &#123;</span><br><span class="line">               rules: [</span><br><span class="line">                   &#123;</span><br><span class="line">                       test: /\.ts$/,</span><br><span class="line">                       use: &#123;</span><br><span class="line">                          loader: &quot;ts-loader&quot;     </span><br><span class="line">                       &#125;,</span><br><span class="line">                       exclude: /node_modules/</span><br><span class="line">                   &#125;</span><br><span class="line">               ]</span><br><span class="line">           &#125;,</span><br><span class="line">       </span><br><span class="line">           plugins: [</span><br><span class="line">               new CleanWebpackPlugin(),</span><br><span class="line">               new HtmlWebpackPlugin(&#123;</span><br><span class="line">                   title:&#x27;TSæµ‹è¯•&#x27;</span><br><span class="line">               &#125;),</span><br><span class="line">           ]</span><br><span class="line">       </span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="4">
<li><p>æ ¹ç›®å½•ä¸‹åˆ›å»ºtsconfig.jsonï¼Œé…ç½®å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦</p>
<ul>
<li><pre><code class="json">&#123;
    &quot;compilerOptions&quot;: &#123;
        &quot;target&quot;: &quot;ES2015&quot;,
        &quot;module&quot;: &quot;ES2015&quot;,
        &quot;strict&quot;: true
    &#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">5. ä¿®æ”¹package.jsonæ·»åŠ å¦‚ä¸‹é…ç½®</span><br><span class="line"></span><br><span class="line">   - ```json</span><br><span class="line">     &#123;</span><br><span class="line">       ...ç•¥...</span><br><span class="line">       &quot;scripts&quot;: &#123;</span><br><span class="line">         &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,</span><br><span class="line">         &quot;build&quot;: &quot;webpack&quot;,</span><br><span class="line">         &quot;start&quot;: &quot;webpack serve --open chrome.exe&quot;</span><br><span class="line">       &#125;,</span><br><span class="line">       ...ç•¥...</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>åœ¨srcä¸‹åˆ›å»ºtsæ–‡ä»¶ï¼Œå¹¶åœ¨å¹¶å‘½ä»¤è¡Œæ‰§è¡Œ<code>npm run build</code>å¯¹ä»£ç è¿›è¡Œç¼–è¯‘ï¼Œæˆ–è€…æ‰§è¡Œ<code>npm start</code>æ¥å¯åŠ¨å¼€å‘æœåŠ¡å™¨</p>
</li>
</ol>
</li>
</ul>
<h3 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h3><ul>
<li><p>ç»è¿‡ä¸€ç³»åˆ—çš„é…ç½®ï¼Œä½¿å¾—TSå’Œwebpackå·²ç»ç»“åˆåˆ°äº†ä¸€èµ·ï¼Œé™¤äº†webpackï¼Œå¼€å‘ä¸­è¿˜ç»å¸¸éœ€è¦ç»“åˆbabelæ¥å¯¹ä»£ç è¿›è¡Œè½¬æ¢ä»¥ä½¿å…¶å¯ä»¥å…¼å®¹åˆ°æ›´å¤šçš„æµè§ˆå™¨ï¼Œåœ¨ä¸Šè¿°æ­¥éª¤çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡ä»¥ä¸‹æ­¥éª¤å†å°†babelå¼•å…¥åˆ°é¡¹ç›®ä¸­ã€‚</p>
<ol>
<li><p>å®‰è£…ä¾èµ–åŒ…ï¼š</p>
<ul>
<li><code>npm i -D @babel/core @babel/preset-env babel-loader core-js</code></li>
<li>å…±å®‰è£…äº†4ä¸ªåŒ…ï¼Œåˆ†åˆ«æ˜¯ï¼š<ul>
<li>@babel&#x2F;core<ul>
<li>babelçš„æ ¸å¿ƒå·¥å…·</li>
</ul>
</li>
<li>@babel&#x2F;preset-env<ul>
<li>babelçš„é¢„å®šä¹‰ç¯å¢ƒ</li>
</ul>
</li>
<li>@babel-loader<ul>
<li>babelåœ¨webpackä¸­çš„åŠ è½½å™¨</li>
</ul>
</li>
<li>core-js<ul>
<li>core-jsç”¨æ¥ä½¿è€ç‰ˆæœ¬çš„æµè§ˆå™¨æ”¯æŒæ–°ç‰ˆESè¯­æ³•</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>ä¿®æ”¹webpack.config.jsé…ç½®æ–‡ä»¶</p>
<ul>
<li><pre><code class="javascript">...ç•¥...
module: &#123;
    rules: [
        &#123;
            test: /\.ts$/,
            use: [
                &#123;
                    loader: &quot;babel-loader&quot;,
                    options:&#123;
                        presets: [
                            [
                                &quot;@babel/preset-env&quot;,
                                &#123;
                                    &quot;targets&quot;:&#123;
                                        &quot;chrome&quot;: &quot;58&quot;,
                                        &quot;ie&quot;: &quot;11&quot;
                                    &#125;,
                                    &quot;corejs&quot;:&quot;3&quot;,
                                    &quot;useBuiltIns&quot;: &quot;usage&quot;
                                &#125;
                            ]
                        ]
                    &#125;
                &#125;,
                &#123;
                    loader: &quot;ts-loader&quot;,

                &#125;
            ],
            exclude: /node_modules/
        &#125;
    ]
&#125;
...ç•¥...
</code></pre>
</li>
<li><p>å¦‚æ­¤ä¸€æ¥ï¼Œä½¿ç”¨tsç¼–è¯‘åçš„æ–‡ä»¶å°†ä¼šå†æ¬¡è¢«babelå¤„ç†ï¼Œä½¿å¾—ä»£ç å¯ä»¥åœ¨å¤§éƒ¨åˆ†æµè§ˆå™¨ä¸­ç›´æ¥ä½¿ç”¨ï¼Œå¯ä»¥åœ¨é…ç½®é€‰é¡¹çš„targetsä¸­æŒ‡å®šè¦å…¼å®¹çš„æµè§ˆå™¨ç‰ˆæœ¬ã€‚</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
]]></content>
      <categories>
        <category>Typescript</category>
      </categories>
      <tags>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Webpack</title>
    <url>/2022/11/14/Webpack/</url>
    <content><![CDATA[<h3 id="Webpack-æ˜¯ä»€ä¹ˆ"><a href="#Webpack-æ˜¯ä»€ä¹ˆ" class="headerlink" title="Webpack æ˜¯ä»€ä¹ˆ"></a>Webpack æ˜¯ä»€ä¹ˆ</h3><p>webpack æ˜¯ä¸€ç§<strong>å‰ç«¯èµ„æºæ„å»ºå·¥å…·</strong>ï¼Œä¸€ä¸ªé™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚</p>
<p>åœ¨webpack çœ‹æ¥, å‰ç«¯çš„æ‰€æœ‰èµ„æºæ–‡ä»¶(js&#x2F;json&#x2F;css&#x2F;img&#x2F;less&#x2F;â€¦)éƒ½ä¼šä½œä¸ºæ¨¡å—å¤„ç†ã€‚<br>å®ƒå°†æ ¹æ®æ¨¡å—çš„ä¾èµ–å…³ç³»è¿›è¡Œé™æ€åˆ†æï¼Œæ‰“åŒ…ç”Ÿæˆå¯¹åº”çš„é™æ€èµ„æº(bundle)ã€‚</p>
<h3 id="Webpack-äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ"><a href="#Webpack-äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="Webpack äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ"></a>Webpack äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ</h3><h4 id="Entry"><a href="#Entry" class="headerlink" title="Entry"></a>Entry</h4><p>å…¥å£(Entry)ï¼šæŒ‡ç¤º webpack ä»¥å“ªä¸ªæ–‡ä»¶ä¸ºå…¥å£èµ·ç‚¹å¼€å§‹æ‰“åŒ…ï¼Œåˆ†ææ„å»ºå†…éƒ¨ä¾èµ–å›¾ã€‚</p>
<h4 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h4><p>è¾“å‡º(Output)ï¼šæŒ‡ç¤º webpack æ‰“åŒ…åçš„èµ„æº bundles è¾“å‡ºåˆ°å“ªé‡Œå»ï¼Œä»¥åŠå¦‚ä½•å‘½åã€‚</p>
<h4 id="Loader"><a href="#Loader" class="headerlink" title="Loader"></a>Loader</h4><p>Loaderï¼šè®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JS çš„æ–‡ä»¶ï¼Œæ¯”å¦‚æ ·å¼æ–‡ä»¶ã€å›¾ç‰‡æ–‡ä»¶(webpack è‡ªèº«åªç†è§£<br>JS)</p>
<h4 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h4><p>æ’ä»¶(Plugins)ï¼šå¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ï¼Œä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©ï¼Œ<br>ä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ç­‰ã€‚</p>
<span id="more"></span>

<h4 id="Mode"><a href="#Mode" class="headerlink" title="Mode"></a>Mode</h4><p>æ¨¡å¼(Mode)ï¼šæŒ‡ç¤º webpack ä½¿ç”¨ç›¸åº”æ¨¡å¼çš„é…ç½®ã€‚</p>
<ol>
<li><p>development:  </p>
<p> ä¼šå°† DefinePlugin ä¸­ <code>process.env.NODE_ENV</code> çš„å€¼è®¾ç½®ä¸º developmentã€‚</p>
<p>å¯ç”¨ </p>
<figure class="highlight plaintext"><figcaption><span>å’Œ ```NamedModulesPlugin```ã€‚</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   ç‰¹ç‚¹ï¼š èƒ½è®©ä»£ç æœ¬åœ°è°ƒè¯•è¿è¡Œçš„ç¯å¢ƒã€‚</span><br><span class="line"></span><br><span class="line">2. production</span><br><span class="line"></span><br><span class="line">   ä¼šå°† DefinePlugin ä¸­ ```process.env.NODE_ENV``` çš„å€¼è®¾ç½®ä¸º productionã€‚</span><br><span class="line"></span><br><span class="line">   å¯ç”¨ </span><br><span class="line"></span><br><span class="line">   ```FlagDependencyUsagePlugin,```</span><br><span class="line"></span><br><span class="line">   ``` FlagIncludedChunksPlugin,``` </span><br><span class="line"></span><br><span class="line">   ``` ModuleConcatenationPlugin, ``` </span><br><span class="line"></span><br><span class="line">   ```NoEmitOnErrorsPlugin, ```</span><br><span class="line"></span><br><span class="line">    ```OccurrenceOrderPlugin, ```</span><br><span class="line"></span><br><span class="line">   ```SideEffectsFlagPlugin å’Œ TerserPlugin```ã€‚</span><br><span class="line"></span><br><span class="line">   ç‰¹ç‚¹ï¼š èƒ½è®©ä»£ç ä¼˜åŒ–ä¸Šçº¿è¿è¡Œçš„ç¯å¢ƒã€‚</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">### ç¼–è¯‘æ‰“åŒ…åº”ç”¨</span><br><span class="line"></span><br><span class="line">åˆ›å»º src ä¸‹çš„ js ç­‰æ–‡ä»¶åï¼Œä¸éœ€è¦é…ç½® webpack.config.js æ–‡ä»¶ï¼Œåœ¨å‘½ä»¤è¡Œå°±å¯ä»¥ç¼–è¯‘æ‰“åŒ…ã€‚</span><br><span class="line"></span><br><span class="line">æŒ‡ä»¤ï¼š</span><br><span class="line"></span><br><span class="line">- å¼€å‘ç¯å¢ƒï¼š</span><br><span class="line">```shell</span><br><span class="line">webpack ./src/index.js -o ./build/built.js --mode=development</span><br></pre></td></tr></table></figure></li>
</ol>
<p>  webpackä¼šä»¥ .&#x2F;src&#x2F;index.js ä¸ºå…¥å£æ–‡ä»¶å¼€å§‹æ‰“åŒ…ï¼Œæ‰“åŒ…åè¾“å‡ºåˆ° .&#x2F;build&#x2F;built.js æ•´ä½“æ‰“åŒ…ç¯å¢ƒï¼Œæ˜¯å¼€å‘ç¯å¢ƒ</p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒï¼š<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">webpack ./src/index.js -o ./build/built.js --mode=production</span><br></pre></td></tr></table></figure>
webpackä¼šä»¥ .&#x2F;src&#x2F;index.js ä¸ºå…¥å£æ–‡ä»¶å¼€å§‹æ‰“åŒ…ï¼Œæ‰“åŒ…åè¾“å‡ºåˆ° .&#x2F;build&#x2F;built.js æ•´ä½“æ‰“åŒ…ç¯å¢ƒï¼Œæ˜¯ç”Ÿäº§ç¯å¢ƒ</li>
</ul>
<p>ç»“è®ºï¼š</p>
<ol>
<li>webpack æœ¬èº«èƒ½å¤„ç† js&#x2F;json èµ„æºï¼Œä¸èƒ½å¤„ç† css&#x2F;img ç­‰å…¶ä»–èµ„æº</li>
<li>ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒå°† ES6 æ¨¡å—åŒ–ç¼–è¯‘æˆæµè§ˆå™¨èƒ½è¯†åˆ«çš„æ¨¡å—åŒ–ï¼Œä½†æ˜¯ä¸èƒ½å¤„ç† ES6 çš„åŸºæœ¬è¯­æ³•è½¬åŒ–ä¸º ES5ï¼ˆéœ€è¦å€ŸåŠ© loaderï¼‰</li>
<li>ç”Ÿäº§ç¯å¢ƒæ¯”å¼€å‘ç¯å¢ƒå¤šä¸€ä¸ªå‹ç¼© js ä»£ç </li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// resolveç”¨æ¥æ‹¼æ¥ç»å¯¹è·¯å¾„çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// webpacké…ç½®</span></span><br><span class="line">  <span class="comment">// å…¥å£èµ·ç‚¹</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="comment">// è¾“å‡º</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="comment">// è¾“å‡ºæ–‡ä»¶å</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;built.js&#x27;</span>,</span><br><span class="line">    <span class="comment">// è¾“å‡ºè·¯å¾„</span></span><br><span class="line">    <span class="comment">// __dirname nodejsçš„å˜é‡ï¼Œä»£è¡¨å½“å‰æ–‡ä»¶çš„ç›®å½•ç»å¯¹è·¯å¾„</span></span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;build&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// loaderçš„é…ç½®</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">// è¯¦ç»†loaderé…ç½®</span></span><br><span class="line">      <span class="comment">// ä¸åŒæ–‡ä»¶å¿…é¡»é…ç½®ä¸åŒloaderå¤„ç†</span></span><br><span class="line">      &#123; </span><br><span class="line">        <span class="comment">// åŒ¹é…å“ªäº›æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// ä½¿ç”¨å“ªäº›loaderè¿›è¡Œå¤„ç†</span></span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// useæ•°ç»„ä¸­loaderæ‰§è¡Œé¡ºåºï¼šä»å³åˆ°å·¦ï¼Œä»ä¸‹åˆ°ä¸Š ä¾æ¬¡æ‰§è¡Œ</span></span><br><span class="line">          <span class="comment">// åˆ›å»ºstyleæ ‡ç­¾ï¼Œå°†jsä¸­çš„æ ·å¼èµ„æºæ’å…¥è¿›è¡Œï¼Œæ·»åŠ åˆ°headä¸­ç”Ÿæ•ˆ</span></span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// å°†cssæ–‡ä»¶å˜æˆcommonjsæ¨¡å—åŠ è½½jsä¸­ï¼Œé‡Œé¢å†…å®¹æ˜¯æ ·å¼å­—ç¬¦ä¸²</span></span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// å°†lessæ–‡ä»¶ç¼–è¯‘æˆcssæ–‡ä»¶</span></span><br><span class="line">          <span class="comment">// éœ€è¦ä¸‹è½½ less-loaderå’Œless</span></span><br><span class="line">           <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// pluginsçš„é…ç½®</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// è¯¦ç»†pluginsçš„é…ç½®</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// æ¨¡å¼</span></span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>, <span class="comment">// å¼€å‘æ¨¡å¼</span></span><br><span class="line">  <span class="comment">// mode: &#x27;production&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>æ‰“åŒ…å·¥å…·</category>
      </categories>
      <tags>
        <tag>Webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>require() æºç è§£è¯»</title>
    <url>/2021/08/21/require%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<span id="more"></span>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>å‡½æ•°å¼ç¼–ç¨‹</title>
    <url>/2021/10/08/%E4%BB%80%E4%B9%88%E6%98%AF%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<h4 id="ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ</h4><p>å‡½æ•°å¼ç¼–ç¨‹å…·æœ‰äº”ä¸ªé²œæ˜çš„ç‰¹ç‚¹ã€‚</p>
<p><strong>1. å‡½æ•°æ˜¯â€ç¬¬ä¸€ç­‰å…¬æ°‘â€</strong></p>
<p>æŒ‡çš„æ˜¯å‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ï¼Œå¯ä»¥èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä½œä¸ºåˆ«çš„å‡½æ•°çš„è¿”å›å€¼ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œä¸‹é¢ä»£ç ä¸­çš„printå˜é‡å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ã€€ã€€<span class="keyword">var</span> print = <span class="keyword">function</span>(<span class="params">i</span>)&#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(i);&#125;;</span><br><span class="line"></span><br><span class="line">ã€€ã€€[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">forEach</span>(print);</span><br></pre></td></tr></table></figure>

<p><strong>2. åªç”¨â€è¡¨è¾¾å¼â€ï¼Œä¸ç”¨â€è¯­å¥â€</strong></p>
<p>â€œè¡¨è¾¾å¼â€ï¼ˆexpressionï¼‰æ˜¯ä¸€ä¸ªå•çº¯çš„è¿ç®—è¿‡ç¨‹ï¼Œæ€»æ˜¯æœ‰è¿”å›å€¼ï¼›â€è¯­å¥â€ï¼ˆstatementï¼‰æ˜¯æ‰§è¡ŒæŸç§æ“ä½œï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚å‡½æ•°å¼ç¼–ç¨‹è¦æ±‚ï¼Œåªä½¿ç”¨è¡¨è¾¾å¼ï¼Œä¸ä½¿ç”¨è¯­å¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸€æ­¥éƒ½æ˜¯å•çº¯çš„è¿ç®—ï¼Œè€Œä¸”éƒ½æœ‰è¿”å›å€¼ã€‚</p>
<p>åŸå› æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„å¼€å‘åŠ¨æœºï¼Œä¸€å¼€å§‹å°±æ˜¯ä¸ºäº†å¤„ç†è¿ç®—ï¼ˆcomputationï¼‰ï¼Œä¸è€ƒè™‘ç³»ç»Ÿçš„è¯»å†™ï¼ˆI&#x2F;Oï¼‰ã€‚â€è¯­å¥â€å±äºå¯¹ç³»ç»Ÿçš„è¯»å†™æ“ä½œï¼Œæ‰€ä»¥å°±è¢«æ’æ–¥åœ¨å¤–ã€‚</p>
<p>å½“ç„¶ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œä¸åšI&#x2F;Oæ˜¯ä¸å¯èƒ½çš„ã€‚å› æ­¤ï¼Œç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°å¼ç¼–ç¨‹åªè¦æ±‚æŠŠI&#x2F;Oé™åˆ¶åˆ°æœ€å°ï¼Œä¸è¦æœ‰ä¸å¿…è¦çš„è¯»å†™è¡Œä¸ºï¼Œä¿æŒè®¡ç®—è¿‡ç¨‹çš„å•çº¯æ€§ã€‚</p>
<span id="more"></span>

<p><strong>3. æ²¡æœ‰â€å‰¯ä½œç”¨â€</strong></p>
<p>æ‰€è°“â€å‰¯ä½œç”¨â€ï¼ˆside effectï¼‰ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°å†…éƒ¨ä¸å¤–éƒ¨äº’åŠ¨ï¼ˆæœ€å…¸å‹çš„æƒ…å†µï¼Œå°±æ˜¯ä¿®æ”¹å…¨å±€å˜é‡çš„å€¼ï¼‰ï¼Œäº§ç”Ÿè¿ç®—ä»¥å¤–çš„å…¶ä»–ç»“æœã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹å¼ºè°ƒæ²¡æœ‰â€å‰¯ä½œç”¨â€ï¼Œæ„å‘³ç€å‡½æ•°è¦ä¿æŒç‹¬ç«‹ï¼Œæ‰€æœ‰åŠŸèƒ½å°±æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å€¼ï¼Œæ²¡æœ‰å…¶ä»–è¡Œä¸ºï¼Œå°¤å…¶æ˜¯ä¸å¾—ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ã€‚</p>
<p><strong>4. ä¸ä¿®æ”¹çŠ¶æ€</strong></p>
<p>ä¸Šä¸€ç‚¹å·²ç»æåˆ°ï¼Œå‡½æ•°å¼ç¼–ç¨‹åªæ˜¯è¿”å›æ–°çš„å€¼ï¼Œä¸ä¿®æ”¹ç³»ç»Ÿå˜é‡ã€‚å› æ­¤ï¼Œä¸ä¿®æ”¹å˜é‡ï¼Œä¹Ÿæ˜¯å®ƒçš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹ã€‚</p>
<p>åœ¨å…¶ä»–ç±»å‹çš„è¯­è¨€ä¸­ï¼Œå˜é‡å¾€å¾€ç”¨æ¥ä¿å­˜â€çŠ¶æ€â€ï¼ˆstateï¼‰ã€‚ä¸ä¿®æ”¹å˜é‡ï¼Œæ„å‘³ç€çŠ¶æ€ä¸èƒ½ä¿å­˜åœ¨å˜é‡ä¸­ã€‚å‡½æ•°å¼ç¼–ç¨‹ä½¿ç”¨å‚æ•°ä¿å­˜çŠ¶æ€ï¼Œæœ€å¥½çš„ä¾‹å­å°±æ˜¯é€’å½’ã€‚ä¸‹é¢çš„ä»£ç æ˜¯ä¸€ä¸ªå°†å­—ç¬¦ä¸²é€†åºæ’åˆ—çš„å‡½æ•°ï¼Œå®ƒæ¼”ç¤ºäº†ä¸åŒçš„å‚æ•°å¦‚ä½•å†³å®šäº†è¿ç®—æ‰€å¤„çš„â€çŠ¶æ€â€ã€‚</p>
<blockquote>
<p>ã€€ã€€function reverse(string) {</p>
<p>ã€€ã€€ã€€ã€€if(string.length &#x3D;&#x3D; 0) {</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€return string;</p>
<p>ã€€ã€€ã€€ã€€} else {</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€return reverse(string.substring(1, string.length)) + string.substring(0, 1);</p>
<p>ã€€ã€€ã€€ã€€}</p>
<p>ã€€ã€€}</p>
</blockquote>
<p>ç”±äºä½¿ç”¨äº†é€’å½’ï¼Œå‡½æ•°å¼è¯­è¨€çš„è¿è¡Œé€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œè¿™æ˜¯å®ƒé•¿æœŸä¸èƒ½åœ¨ä¸šç•Œæ¨å¹¿çš„ä¸»è¦åŸå› ã€‚</p>
<p><strong>5. å¼•ç”¨é€æ˜</strong></p>
<p>å¼•ç”¨é€æ˜ï¼ˆReferential transparencyï¼‰ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°çš„è¿è¡Œä¸ä¾èµ–äºå¤–éƒ¨å˜é‡æˆ–â€çŠ¶æ€â€ï¼Œåªä¾èµ–äºè¾“å…¥çš„å‚æ•°ï¼Œä»»ä½•æ—¶å€™åªè¦å‚æ•°ç›¸åŒï¼Œå¼•ç”¨å‡½æ•°æ‰€å¾—åˆ°çš„è¿”å›å€¼æ€»æ˜¯ç›¸åŒçš„ã€‚</p>
<p>æœ‰äº†å‰é¢çš„ç¬¬ä¸‰ç‚¹å’Œç¬¬å››ç‚¹ï¼Œè¿™ç‚¹æ˜¯å¾ˆæ˜¾ç„¶çš„ã€‚å…¶ä»–ç±»å‹çš„è¯­è¨€ï¼Œå‡½æ•°çš„è¿”å›å€¼å¾€å¾€ä¸ç³»ç»ŸçŠ¶æ€æœ‰å…³ï¼Œä¸åŒçš„çŠ¶æ€ä¹‹ä¸‹ï¼Œè¿”å›å€¼æ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™å°±å«â€å¼•ç”¨ä¸é€æ˜â€ï¼Œå¾ˆä¸åˆ©äºè§‚å¯Ÿå’Œç†è§£ç¨‹åºçš„è¡Œä¸ºã€‚</p>
<h4 id="å‡½æ•°å¼ç¼–ç¨‹çš„æ„ä¹‰"><a href="#å‡½æ•°å¼ç¼–ç¨‹çš„æ„ä¹‰" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹çš„æ„ä¹‰"></a>å‡½æ•°å¼ç¼–ç¨‹çš„æ„ä¹‰</h4><p><strong>1. ä»£ç ç®€æ´ï¼Œå¼€å‘å¿«é€Ÿ</strong></p>
<p>å‡½æ•°å¼ç¼–ç¨‹å¤§é‡ä½¿ç”¨å‡½æ•°ï¼Œå‡å°‘äº†ä»£ç çš„é‡å¤ï¼Œå› æ­¤ç¨‹åºæ¯”è¾ƒçŸ­ï¼Œå¼€å‘é€Ÿåº¦è¾ƒå¿«ã€‚</p>
<p><strong>2. æ›´æ–¹ä¾¿çš„ä»£ç ç®¡ç†</strong></p>
<p>å‡½æ•°å¼ç¼–ç¨‹ä¸ä¾èµ–ã€ä¹Ÿä¸ä¼šæ”¹å˜å¤–ç•Œçš„çŠ¶æ€ï¼Œåªè¦ç»™å®šè¾“å…¥å‚æ•°ï¼Œè¿”å›çš„ç»“æœå¿…å®šç›¸åŒã€‚å› æ­¤ï¼Œæ¯ä¸€ä¸ªå‡½æ•°éƒ½å¯ä»¥è¢«çœ‹åšç‹¬ç«‹å•å…ƒï¼Œå¾ˆæœ‰åˆ©äºè¿›è¡Œå•å…ƒæµ‹è¯•ï¼ˆunit testingï¼‰å’Œé™¤é”™ï¼ˆdebuggingï¼‰ï¼Œä»¥åŠæ¨¡å—åŒ–ç»„åˆã€‚</p>
]]></content>
      <categories>
        <category>Chore</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Functional Programming</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•åˆ©ç”¨css varåšä¸€ä¸ªdark modeæ–¹æ¡ˆ</title>
    <url>/2022/03/01/%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8css%20var%E5%81%9A%E4%B8%80%E4%B8%AAdark%20mode%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><ol>
<li>å¸Œæœ›åˆ©ç”¨ css å˜é‡å®ç° dark å’Œ light æ¨¡å¼çš„åˆ‡æ¢</li>
<li>åŸæœ‰çš„å·¥ç¨‹éƒ½æ˜¯ less å½¢å¼å®šä¹‰çš„ cssï¼Œå¹¶ä¸”è¿˜æœ‰ less çš„å‡½æ•°ï¼Œæ¯”å¦‚ fade ç­‰ï¼Œä¸æƒ³æ‰‹åŠ¨æ”¹ less çš„å‡½æ•°ï¼Œå¸Œæœ›è¯¥æ’ä»¶èƒ½æ”¯æŒè§£æ less å‡½æ•°</li>
<li>éœ€è¦æ”¯æŒå±€éƒ¨ä¸åˆ‡æ¢æ¨¡å¼ï¼Œæ¯”å¦‚æŸä¸ªåŒºåŸŸæ˜¯å›ºå®šçš„ light æ¨¡å¼</li>
</ol>
<h1 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h1><h2 id="ç¬¬ä¸€æ­¥ï¼šless-å˜é‡è½¬æ¢æˆ-css-å˜é‡"><a href="#ç¬¬ä¸€æ­¥ï¼šless-å˜é‡è½¬æ¢æˆ-css-å˜é‡" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šless å˜é‡è½¬æ¢æˆ css å˜é‡"></a>ç¬¬ä¸€æ­¥ï¼šless å˜é‡è½¬æ¢æˆ css å˜é‡</h2><p>è¿™ä¸€æ­¥æ¯”è¾ƒç®€å•ï¼Œless å·²ç»æä¾›äº†å­—æ®µç”¨äºè½¬æ¢ï¼Œåªéœ€è¦æ·»åŠ ä¸€ä¸ªé…ç½®é¡¹å°±å¯ä»¥ï¼Œå°±æ˜¯<code>globalVars</code>å±æ€§ã€‚</p>
<p>å¯ä»¥æŸ¥çœ‹<a href="https://link.juejin.cn/?target=https://codebase.byted.org/repo/lark/dark-mode-css-var/-/blob/example/config/webpack.dm-cssvar.config.js">example ä»£ç </a>å‚è€ƒ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&#x27;less-loader&#x27;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">      <span class="attr">globalVars</span>: <span class="title class_">LessGlobalCSSVars</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p><code>LessGlobalCSSVars</code>å¤§æ¦‚é•¿è¿™ä¸ªæ ·å­</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;bg-body&quot;</span>: <span class="string">&quot;var(--bg-body)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;static-white&quot;</span>: <span class="string">&quot;var(--static-white)&quot;</span>,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>
<span id="more"></span>

<p>less ä¼šå°†<code>LessGlobalCSSVars</code>çš„æ˜ å°„å…³ç³»è¿½åŠ åˆ° less æ–‡ä»¶å‰ï¼Œåœ¨è¿›è¡Œå˜é‡æŸ¥æ‰¾çš„æ—¶å€™å°±ä¼šæ›¿æ¢æˆç›¸åº”çš„ css å˜é‡</p>
<p>æ¯”å¦‚ï¼Œä¸‹é¢çš„ less æ–‡ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">    <span class="attr">color</span>: @bg-body;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>less å®é™…è§£æçš„æ–‡ä»¶å†…å®¹æ˜¯</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">bg-<span class="attr">body</span>: <span class="string">&quot;var(--bg-body)&quot;</span>;</span><br><span class="line"><span class="keyword">static</span>-<span class="attr">white</span>: <span class="string">&quot;var(--static-white)&quot;</span></span><br><span class="line">div &#123;</span><br><span class="line">    <span class="attr">color</span>: @bg-body;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æœ€åä¸Šé¢çš„æ–‡ä»¶å°±ä¼šè¢«ç¼–è¯‘æˆ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">div &#123; <span class="attr">color</span>: <span class="title function_">var</span>(--bg-body);&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬äºŒæ­¥ï¼šless-å‡½æ•°å¦‚ä½•è§£æï¼Ÿã€less-æ’ä»¶ã€‘"><a href="#ç¬¬äºŒæ­¥ï¼šless-å‡½æ•°å¦‚ä½•è§£æï¼Ÿã€less-æ’ä»¶ã€‘" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šless å‡½æ•°å¦‚ä½•è§£æï¼Ÿã€less æ’ä»¶ã€‘"></a>ç¬¬äºŒæ­¥ï¼šless å‡½æ•°å¦‚ä½•è§£æï¼Ÿã€less æ’ä»¶ã€‘</h2><p>ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ less å‡½æ•°åº”è¯¥å¦‚ä½•è§£æå‘¢ï¼Ÿæ¯”å¦‚<code>fade(``@bg-body, 20%``)</code>ï¼Œå¦‚æœä¸ç»è¿‡ä»»ä½•å¤„ç†ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸º<code>var(--bg-body)</code>å¹¶ä¸æ˜¯ less èƒ½å¤Ÿè§£æçš„èŠ‚ç‚¹ç±»å‹ï¼Œä¼šæç¤º<code>var(--bg-body)</code>ä¸èƒ½è¢«è½¬æ¢æˆ<code>Color</code>ç±»å‹ï¼ˆless çš„ä¸€ä¸ªèŠ‚ç‚¹ç±»å‹ï¼‰ï¼Œè¿™æ˜¯ less çš„è¯­æ³•æ ‘è§£æï¼Œéœ€è¦å°† fade å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°è§£ææˆ Color èŠ‚ç‚¹ç±»å‹ï¼Œå¦åˆ™å°±ä¼šæŠ›å¼‚å¸¸ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ less å‡½æ•°è¿›è¡Œæ”¹å†™ï¼Œå…·ä½“é€šè¿‡ less æ’ä»¶çš„æ–¹å¼å®ç°ã€‚ä¿®æ”¹ less-loader çš„é…ç½®å¦‚ä¸‹ï¼Œå¢åŠ ä¸€ä¸ªæ’ä»¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&#x27;less-loader&#x27;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">      <span class="attr">globalVars</span>: <span class="title class_">LessGlobalCSSVars</span>,</span><br><span class="line">      <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">LessSkipVarsPlugin</span> ()</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>less çš„æ‰€æœ‰å‡½æ•°ä¼šè¢«æ³¨å†Œåˆ°<code>[functions](https://github.com/less/less.js/blob/master/packages/less/src/less/functions/index.js &quot;functions&quot;)</code>ä¸­ï¼Œæ’ä»¶æš´éœ²äº†è¯¥<code>functions</code>ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä¿®æ”¹å“åº”çš„ less å‡½æ•°ï¼Œå®ç°å‡½æ•°çš„è¦†ç›–ã€‚è¯¥æ’ä»¶çš„å®ç°<a href="https://link.juejin.cn/?target=https://codebase.byted.org/repo/lark/dark-mode-css-var/-/blob/example/config/webpack.dm-cssvar.config.js">æºä»£ç </a>å¦‚ä¸‹ï¼Œfunctions å¯¹è±¡æ˜¯å‡½æ•°ååˆ°å‡½æ•°ä½“çš„æ˜ å°„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†éœ€è¦é‡å†™çš„å‡½æ•°é‡ç½®æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„å³å¯ã€‚è€Œå‡½æ•°çš„è®¡ç®—ç»“æœé€šè¿‡<code>calc</code>å’Œ<code>var</code>ä¸¤ä¸ªå‡½æ•°ä»¥åŠ css å˜é‡è¿›è¡Œè¡¨ç¤ºï¼Œåœ¨é¡µé¢ä¸­å³å¯æ ¹æ® css å˜é‡è¿›è¡Œå®æ—¶è®¡ç®—ï¼</p>
<p>ä¸‹é¢åªæ‘˜å‡ºæ¥äº†æˆ‘ä»¬æ”¯æŒçš„å…¶ä¸­ä¸¤ä¸ªå‡½æ•°â€”â€”fade å’Œ darkenï¼Œfade åˆ©ç”¨ rgba çš„å‡½æ•°è¡¨ç¤ºï¼Œè€Œ darken åˆ©ç”¨çš„æ˜¯ hsl çš„å‡½æ•°è¡¨ç¤ºï¼Œä¸»è¦æ˜¯ç”¨ rgba çš„è¡¨ç¤ºæ³•æ— æ³•ç”¨ css æ”¯æŒçš„å‡½æ•°è¡¨ç¤ºå‡ºæ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨äº† hsl å‡½æ•°ã€‚è¿™é‡Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬éœ€è¦ä¸€äº›ç‰¹æ®Šçš„ css å˜é‡ï¼Œæ¯”å¦‚<code>--bg-body-SA</code>ã€<code>--bg-body-raw</code>ã€<code>--bg-HS</code>ã€ <code>--bg-body-L</code>.æ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ©ç”¨åŸå§‹çš„è‰²å€¼ï¼ˆ<code>bg-body</code>ï¼‰è¿›è¡Œè½¬æ¢</p>
<p>(ä¸‹é¢ä»£ç åšäº†çœç•¥ï¼Œä¸»è¦æ˜¯ç¤ºæ„ï¼Œå…·ä½“ä»£ç å¯ä»¥çœ‹æºä»£ç )</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LessSkipVarsPlugin</span> &#123;</span><br><span class="line">    <span class="title function_">install</span>(<span class="params">less, pluginManager, functions</span>) &#123;</span><br><span class="line">        functions.<span class="title function_">add</span>(<span class="string">&#x27;fade&#x27;</span>, <span class="keyword">function</span> (<span class="params">color, percent</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (color.<span class="property">type</span> === <span class="string">&#x27;Call&#x27;</span>) &#123;</span><br><span class="line">              <span class="keyword">if</span> (color.<span class="property">name</span> === <span class="string">&#x27;var&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> key = color.<span class="property">args</span>[<span class="number">0</span>].<span class="property">value</span>.<span class="title function_">substring</span>(<span class="number">2</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="string">`rgba(var(--<span class="subst">$&#123;key&#125;</span>-raw), calc(var(--<span class="subst">$&#123;key&#125;</span>-SA) * <span class="subst">$&#123;parseLessNumber(percent)&#125;</span>))`</span>;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ......</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="string">`rgba(<span class="subst">$&#123;red&#125;</span>,<span class="subst">$&#123;green&#125;</span>,<span class="subst">$&#123;blue&#125;</span>,<span class="subst">$&#123;alpha * parseLessNumber(percent)&#125;</span>)`</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        functions.<span class="title function_">add</span>(<span class="string">&#x27;darken&#x27;</span>, <span class="keyword">function</span> (<span class="params">color, amount, method</span>) &#123;</span><br><span class="line">            .......</span><br><span class="line">            <span class="keyword">if</span> (color.<span class="property">type</span> !== <span class="string">&#x27;Color&#x27;</span>)</span><br><span class="line">              <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`fade function parameter type error: except Color, get <span class="subst">$&#123;color.type&#125;</span>`</span>);</span><br><span class="line">            <span class="keyword">const</span> hsl = (<span class="keyword">new</span> <span class="title class_">Color</span>(color.<span class="property">rgb</span>, color.<span class="property">alpha</span>)).<span class="title function_">toHSL</span>();</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> method !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; method.<span class="property">value</span> === <span class="string">&#x27;relative&#x27;</span>) &#123;</span><br><span class="line">                hsl.<span class="property">l</span> = hsl.<span class="property">l</span> * (<span class="number">1</span> - <span class="title function_">parseLessNumber</span>(amount));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                hsl.<span class="property">l</span> = hsl.<span class="property">l</span> - <span class="title function_">parseLessNumber</span>(amount);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">`hsl(<span class="subst">$&#123;hsl.h&#125;</span>,<span class="subst">$&#123;hsl.s&#125;</span>,<span class="subst">$&#123;hsl.l&#125;</span>)`</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬ä¸‰æ­¥ï¼šå±€éƒ¨-light-æ¨¡å¼å¦‚ä½•æ”¯æŒï¼Ÿã€postcss-æ’ä»¶ã€‘"><a href="#ç¬¬ä¸‰æ­¥ï¼šå±€éƒ¨-light-æ¨¡å¼å¦‚ä½•æ”¯æŒï¼Ÿã€postcss-æ’ä»¶ã€‘" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šå±€éƒ¨ light æ¨¡å¼å¦‚ä½•æ”¯æŒï¼Ÿã€postcss æ’ä»¶ã€‘"></a>ç¬¬ä¸‰æ­¥ï¼šå±€éƒ¨ light æ¨¡å¼å¦‚ä½•æ”¯æŒï¼Ÿã€postcss æ’ä»¶ã€‘</h2><p>ç‚¹å‡»<a href="https://link.juejin.cn/?target=https://codebase.byted.org/repo/lark/dark-mode-css-var/-/blob/src/css-loader/plugins/postcss-color.js%23L50">è¿™é‡Œ</a>å¯ä»¥å¿«é€Ÿå®šä½åˆ°æºä»£ç ã€‚å¯ä»¥åœ¨ dom èŠ‚ç‚¹ä¸Šæ·»åŠ  classname å‰ç¼€ï¼Œç”¨æ¥æ ‡æ³¨è¯¥ dom ä¸‹çš„æ ·å¼éƒ½ä½¿ç”¨é™æ€çš„äº®è‰²æ¨¡å¼ï¼Œä¸éšä¸»é¢˜åˆ‡æ¢ã€‚è¿™é‡Œéœ€è¦åšçš„ä¸»è¦åˆ†ä¸º 3 æ­¥ï¼š</p>
<ol>
<li><h3 id="ç¬¬-1-æ­¥ï¼šã€æ·»åŠ -dom-å‰ç¼€-classnameã€‘"><a href="#ç¬¬-1-æ­¥ï¼šã€æ·»åŠ -dom-å‰ç¼€-classnameã€‘" class="headerlink" title="ç¬¬ 1 æ­¥ï¼šã€æ·»åŠ  dom å‰ç¼€ classnameã€‘"></a>ç¬¬ 1 æ­¥ï¼šã€æ·»åŠ  dom å‰ç¼€ classnameã€‘</h3></li>
</ol>
<p>åœ¨ç›¸åº”çš„ dom èŠ‚ç‚¹æ·»åŠ  classname å‰ç¼€ï¼Œæ¯”å¦‚ static-lightï¼›</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸæ¥çš„domç»“æ„</span></span><br><span class="line">&lt;div className=<span class="string">&quot;test&quot;</span>&gt;aaa&lt;/div&gt;</span><br><span class="line"><span class="comment">// æ–°çš„domç»“æ„</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;static-light&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;test&quot;</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<ol>
<li><h3 id="ç¬¬-2-æ­¥ï¼šã€è¿½åŠ å‰ç¼€æ ·å¼ã€‘"><a href="#ç¬¬-2-æ­¥ï¼šã€è¿½åŠ å‰ç¼€æ ·å¼ã€‘" class="headerlink" title="ç¬¬ 2 æ­¥ï¼šã€è¿½åŠ å‰ç¼€æ ·å¼ã€‘"></a>ç¬¬ 2 æ­¥ï¼šã€è¿½åŠ å‰ç¼€æ ·å¼ã€‘</h3><ol>
<li>ç”Ÿæˆæ ·å¼æ—¶ï¼Œé€šè¿‡ postcss ä¸ºæ‰€æœ‰çš„æ ·å¼æ·»åŠ  static-light å‰ç¼€ï¼›</li>
</ol>
</li>
</ol>
<p>è¿™ä¸€æ­¥å®é™…ä¸Šæ˜¯åœ¨ css-loader çš„å¤„ç†è¿‡ç¨‹ä¸­åŠ å…¥äº†ä¸€ä¸ª postcss æ’ä»¶ï¼Œå¯¹æ¯æ¡è§„åˆ™<a href="https://link.juejin.cn/?target=https://www.postcss.com.cn/api/%23rule">rule</a>é¢å¤–ç”Ÿæˆä¸€æ¡é™æ€æ ·å¼ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­,æˆ‘å®šä¹‰äº†å¦‚ä¸‹çš„ less æ ·å¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">.<span class="property">test</span> &#123;</span><br><span class="line">    background-<span class="attr">color</span>: @<span class="keyword">static</span>-white;</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ç»è¿‡è¯¥ postcss æ’ä»¶ä¹‹åï¼Œç”Ÿæˆçš„äº§ç‰©ä¼šå˜æˆ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">.<span class="property">test</span> &#123;</span><br><span class="line">    background-<span class="attr">color</span>: <span class="title function_">var</span>(--<span class="keyword">static</span>-white);</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">static</span>-light .<span class="property">test</span> &#123;</span><br><span class="line">    background-<span class="attr">color</span>: <span class="title function_">var</span>(--<span class="keyword">static</span>-white);</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥è¦æ€æ ·æ‰èƒ½è¿½åŠ ç”Ÿæˆè¿™æ ·çš„ css å‘¢ï¼Ÿ</p>
<p>å¯ä»¥çœ‹åˆ° css-loader çš„<a href="https://link.juejin.cn/?target=https://github.com/webpack-contrib/css-loader/blob/master/src/index.js%23L163">æºç </a>ä¸­ï¼ŒèŠ‚ç‚¹éƒ½ç»è¿‡äº† postcss æ’ä»¶çš„å¤„ç†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ’ä»¶åˆ—è¡¨ä¸­ï¼ŒåŠ ä¸Šæˆ‘ä»¬çš„æ’ä»¶å³å¯</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">result = <span class="keyword">await</span> <span class="title function_">postcss</span>([...plugins, <span class="keyword">new</span> <span class="title function_">colorPlugin</span>(&#123;</span><br><span class="line">  <span class="attr">staticEx</span>: &#123;<span class="attr">prefix</span>:<span class="string">&#x27;.static-light&#x27;</span>&#125;,</span><br><span class="line">&#125;)]).<span class="title function_">process</span>(content, &#123;...&#125;);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥æ¥ä¸‹æ¥å¯ä»¥å®ç°æˆ‘ä»¬çš„ postcss æ’ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> postcss = <span class="built_in">require</span>(<span class="string">&#x27;postcss&#x27;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = postcss.<span class="title function_">plugin</span>(<span class="string">&#x27;postcss-color-and-function&#x27;</span>, <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; staticEx &#125; = options;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">processNode</span>(<span class="params">node, type</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> staticNode;</span><br><span class="line">        <span class="keyword">switch</span> (node.<span class="property">type</span>) &#123;</span><br><span class="line">            ......</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;rule&#x27;</span>:</span><br><span class="line">                staticNode =  node.<span class="title function_">clone</span>();</span><br><span class="line">                staticNode.<span class="property">selectors</span> = staticNode.<span class="property">selectors</span>.<span class="title function_">map</span>(<span class="function"><span class="params">i</span> =&gt;</span> &#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;options.staticEx.prefix&#125;</span> <span class="subst">$&#123;i&#125;</span>`</span></span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> staticNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">css</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> last = [];</span><br><span class="line">        css.<span class="title function_">each</span>(<span class="function">(<span class="params">node, type</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> staticNode = <span class="title function_">processNode</span>(node, type);</span><br><span class="line">            <span class="keyword">if</span> (staticNode) &#123;</span><br><span class="line">                last.<span class="title function_">push</span>(staticNode);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        css.<span class="property">nodes</span> = css.<span class="property">nodes</span>.<span class="title function_">concat</span>(last);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä¸»è¦çš„å®ç°æ€è·¯æ˜¯ï¼š</p>
<ul>
<li>é€šè¿‡å½“å‰èŠ‚ç‚¹å…‹éš†ä¸€ä¸ªä¸€æ ·çš„èŠ‚ç‚¹ï¼Œåœ¨æœ€åè¿”å›çš„æ—¶å€™æ‹¼æ¥è¯¥èŠ‚ç‚¹ï¼Œè¿™æ ·å¯ä»¥ç”Ÿæˆä¸¤ä»½æ ·å¼ï¼›</li>
<li>å¯¹äºå…‹éš†çš„é‚£ä»½èŠ‚ç‚¹ï¼Œè¿½åŠ é€‰æ‹©å™¨ï¼Œ</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">staticNode.<span class="property">selectors</span> = staticNode.<span class="property">selectors</span>.<span class="title function_">map</span>(<span class="function"><span class="params">i</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;options.staticEx.prefix&#125;</span> <span class="subst">$&#123;i&#125;</span>`</span></span><br><span class="line">&#125;);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±å¯ä»¥å®ç°è¿½åŠ èŠ‚ç‚¹å’Œå±€éƒ¨ css å˜é‡å®šä¹‰äº†ã€‚</p>
<blockquote>
<p>æ³¨:css-loader ä¼šæ ¡éªŒå‚æ•°ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦ä¿®æ”¹ä¼ å…¥çš„å‚æ•°æ ¼å¼ï¼Œè¿˜éœ€è¦ä¿®æ”¹<a href="https://link.juejin.cn/?target=https://github.com/webpack-contrib/css-loader/blob/master/src/options.json%23L197">options.json</a>å’Œ<a href="https://link.juejin.cn/?target=https://github.com/webpack-contrib/css-loader/blob/master/src/utils.js%23L628">normalizeOptions</a>ã€‚</p>
</blockquote>
<ol>
<li><h3 id="ç¬¬-3-æ­¥ï¼šæ’å…¥ä¸€å¥—åˆ¶å®š-classnameï¼ˆè¿™é‡Œæ˜¯-static-lightï¼‰çš„-css-var-å˜é‡ã€‚"><a href="#ç¬¬-3-æ­¥ï¼šæ’å…¥ä¸€å¥—åˆ¶å®š-classnameï¼ˆè¿™é‡Œæ˜¯-static-lightï¼‰çš„-css-var-å˜é‡ã€‚" class="headerlink" title="ç¬¬ 3 æ­¥ï¼šæ’å…¥ä¸€å¥—åˆ¶å®š classnameï¼ˆè¿™é‡Œæ˜¯ static-lightï¼‰çš„ css var å˜é‡ã€‚"></a>ç¬¬ 3 æ­¥ï¼šæ’å…¥ä¸€å¥—åˆ¶å®š classnameï¼ˆè¿™é‡Œæ˜¯ static-lightï¼‰çš„ css var å˜é‡ã€‚</h3></li>
</ol>
<p>è¿™é‡Œæˆ‘ä»¬å€ŸåŠ© webpack çš„æ’ä»¶æ¥å®ç°ï¼Œè¯¦ç»†å†…å®¹çœ‹ä¸‹ä¸€éƒ¨åˆ†</p>
<h2 id="ç¬¬å››æ­¥ï¼šè¿½åŠ å…¨å±€-css-å˜é‡å®šä¹‰ã€webpack-æ’ä»¶ã€‘"><a href="#ç¬¬å››æ­¥ï¼šè¿½åŠ å…¨å±€-css-å˜é‡å®šä¹‰ã€webpack-æ’ä»¶ã€‘" class="headerlink" title="ç¬¬å››æ­¥ï¼šè¿½åŠ å…¨å±€ css å˜é‡å®šä¹‰ã€webpack æ’ä»¶ã€‘"></a>ç¬¬å››æ­¥ï¼šè¿½åŠ å…¨å±€ css å˜é‡å®šä¹‰ã€webpack æ’ä»¶ã€‘</h2><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸‹ css å˜é‡ï¼Œå°±å¯ä»¥ç”Ÿæ•ˆäº†ï¼Œæ·»åŠ @media (prefers-color-scheme: dark)å¯ä»¥åœ¨ç³»ç»Ÿæ¨¡å¼å˜åŒ–çš„æ—¶å€™åˆ‡æ¢ css å˜é‡ï¼Œå°±å¯ä»¥å®ç°æ ·å¼çš„åˆ‡æ¢ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line"> <span class="attr">--bg-body</span>: <span class="string">&quot;#1f1f1f&quot;</span>;</span><br><span class="line"> <span class="attr">--static-white</span>: <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme</span>: dark) &#123;</span><br><span class="line">    <span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">     <span class="attr">--bg-body</span>: <span class="string">&quot;#2f2f2f&quot;</span>;</span><br><span class="line">     <span class="attr">--static-white</span>: <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¿½åŠ å±€éƒ¨ light æ ·å¼å¯¹åº”çš„ css å˜é‡ï¼Œéœ€è¦åœ¨ä¸Šè¿°å˜é‡çš„åŸºç¡€ä¸Šè¿½åŠ ä¸‹é¢çš„ä¸€æ®µä»£ç ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line"> <span class="attr">--bg-body</span>: <span class="string">&quot;#1f1f1f&quot;</span>;</span><br><span class="line"> <span class="attr">--static-white</span>: <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme</span>: dark) &#123;</span><br><span class="line">    <span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">     <span class="attr">--bg-body</span>: <span class="string">&quot;#2f2f2f&quot;</span>;</span><br><span class="line">     <span class="attr">--static-white</span>: <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.static-light</span> &#123;</span><br><span class="line"> <span class="attr">--bg-body</span>: <span class="string">&quot;#1f1f1f&quot;</span>;</span><br><span class="line"> <span class="attr">--static-white</span>: <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æˆ‘ä»¬æ‰‹åŠ¨è¿½åŠ å˜é‡å°±ä¼šå˜å¾—å¤æ‚ï¼Œå¹¶ä¸”å®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ webpack æ’ä»¶è¿›è¡Œè¿½åŠ ï¼Œwebpack æä¾›äº†å„ç§é’©å­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™äº›ç”Ÿå‘½å‘¨æœŸé’©å­åœ¨åˆé€‚çš„æ—¶æœºæ‰§è¡Œç›¸åº”çš„é€»è¾‘ã€‚</p>
<ol>
<li><h3 id="ç¬¬-1-æ­¥ï¼šã€ç”Ÿæˆ-css-æ–‡ä»¶ã€‘"><a href="#ç¬¬-1-æ­¥ï¼šã€ç”Ÿæˆ-css-æ–‡ä»¶ã€‘" class="headerlink" title="ç¬¬ 1 æ­¥ï¼šã€ç”Ÿæˆ css æ–‡ä»¶ã€‘"></a>ç¬¬ 1 æ­¥ï¼šã€ç”Ÿæˆ css æ–‡ä»¶ã€‘</h3><ol>
<li>æˆ‘ä»¬éœ€è¦ä¿è¯ç”Ÿæˆ css æ–‡ä»¶åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”ä¿è¯ç”Ÿæˆæ–‡ä»¶åœ¨æ’å…¥ link æ ‡ç­¾ä¹‹å‰ï¼ŒHtmlWebpackPlugin æ’ä»¶æä¾›çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°<a href="https://link.juejin.cn/?target=https://github.com/jantimon/html-webpack-plugin%23alterassettags-hook">alterAssetTags</a>ï¼Œè¿”å›å½“å‰æ‰€æœ‰çš„èµ„æºåˆ—è¡¨ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ­¤è¿½åŠ ä¸€äº›èµ„æºé“¾æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æ­¤ç”Ÿå‘½å‘¨æœŸé’©å­å¤„ï¼Œè§¦å‘ç”Ÿæˆæ–‡ä»¶ã€‚</li>
</ol>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">compiler.<span class="property">hooks</span>.<span class="property">compilation</span>.<span class="title function_">tap</span>(<span class="string">&#x27;LarkThemePlugin&#x27;</span>, <span class="function"><span class="params">compilation</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">HtmlWebpackPlugin</span>.<span class="title function_">getHooks</span>(compilation).<span class="property">alterAssetTags</span>.<span class="title function_">tapAsync</span>(<span class="string">&#x27;LarkThemePlugin&#x27;</span>, <span class="function">(<span class="params">data, cb</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> source = xxx;</span><br><span class="line">        compilation.<span class="property">assets</span>[<span class="string">&#x27;theme.css&#x27;</span>] = &#123; <span class="attr">source</span>: <span class="function">() =&gt;</span> source, <span class="attr">size</span>: <span class="function">() =&gt;</span> <span class="title class_">Buffer</span>.<span class="title function_">byteLength</span>(source, <span class="string">&#x27;utf-8&#x27;</span>)&#125;;</span><br><span class="line">      <span class="title function_">cb</span>(<span class="literal">null</span>,data);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<ol>
<li><h3 id="ç¬¬-2-æ­¥ï¼šç”Ÿæˆ-link-æ ‡ç­¾å¼•ç”¨ï¼š"><a href="#ç¬¬-2-æ­¥ï¼šç”Ÿæˆ-link-æ ‡ç­¾å¼•ç”¨ï¼š" class="headerlink" title="ç¬¬ 2 æ­¥ï¼šç”Ÿæˆ link æ ‡ç­¾å¼•ç”¨ï¼š"></a>ç¬¬ 2 æ­¥ï¼šç”Ÿæˆ link æ ‡ç­¾å¼•ç”¨ï¼š</h3><ol>
<li>ä¸Šä¸€æ­¥ç”Ÿæˆäº† css èµ„æºæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ html ä¸­è¿½åŠ ä¸€ä¸ª link æ ‡ç­¾ï¼Œå¼•ç”¨è¯¥ css èµ„æºï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šæœ‰å¾ˆå¤šèµ„æºæ ‡ç­¾æ’å…¥åˆ° html ä¸­ï¼Œè€Œæˆ‘ä»¬åˆå¸Œæœ›è¯¥æ ‡ç­¾å¯ä»¥æ’å…¥åˆ°æ‰€æœ‰èµ„æºæ–‡ä»¶ä¹‹å‰è¿›è¡ŒåŠ è½½</li>
</ol>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">compiler.<span class="property">hooks</span>.<span class="property">compilation</span>.<span class="title function_">tap</span>(<span class="string">&#x27;LarkThemePlugin&#x27;</span>, <span class="function"><span class="params">compilation</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">HtmlWebpackPlugin</span>.<span class="title function_">getHooks</span>(compilation).<span class="property">alterAssetTags</span>.<span class="title function_">tapAsync</span>(<span class="string">&#x27;LarkThemePlugin&#x27;</span>, <span class="function">(<span class="params">data, cb</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">assetTags</span>: &#123; styles &#125;&#125; = data;</span><br><span class="line">      styles.<span class="title function_">unshift</span>(&#123;</span><br><span class="line">        <span class="attr">tagName</span>: <span class="string">&#x27;link&#x27;</span>,</span><br><span class="line">        <span class="attr">voidTag</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">attributes</span>: &#123;</span><br><span class="line">          <span class="attr">href</span>: <span class="string">&#x27;theme.css&#x27;</span>,</span><br><span class="line">          <span class="attr">rel</span>: <span class="string">&#x27;stylesheet&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title function_">cb</span>(<span class="literal">null</span>,data);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å®Œæ•´çš„ webpack æ’ä»¶ä»£ç åœ¨ä¸‹æ–¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; getRootCSSVarMap &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../util&#x27;</span>);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">InjectThemeWebpackPlugin</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">&#123; lessVarsSet, darkTokens, lightTokens &#125;</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">darkTokens</span> = darkTokens;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">lightTokens</span> = lightTokens;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç”Ÿæˆcsså˜é‡çš„cssæ ·å¼</span></span><br><span class="line">    <span class="title function_">generateResult</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="title function_">generateCss</span> = (<span class="params">cssObj</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> css = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> cssObj) &#123;</span><br><span class="line">            <span class="keyword">const</span> value = cssObj[key];</span><br><span class="line">            css += <span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;value&#125;</span>;`</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`:root&#123;<span class="subst">$&#123;css&#125;</span>&#125;`</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> darkCSSObj = <span class="title function_">getRootCSSVarMap</span>(<span class="variable language_">this</span>.<span class="property">darkTokens</span>, <span class="string">&#x27;DARK&#x27;</span>);</span><br><span class="line">      <span class="keyword">const</span> lightCSSObj = <span class="title function_">getRootCSSVarMap</span>(<span class="variable language_">this</span>.<span class="property">lightTokens</span>, <span class="string">&#x27;LIGHT&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;generateCss(lightCSSObj)&#125;</span>\n@media (prefers-color-scheme: dark) &#123;<span class="subst">$&#123;generateCss(darkCSSObj)&#125;</span>&#125;`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">apply</span>(<span class="params">compiler</span>) &#123;</span><br><span class="line">      <span class="comment">// è¿½åŠ linkæ ‡ç­¾</span></span><br><span class="line">      compiler.<span class="property">hooks</span>.<span class="property">compilation</span>.<span class="title function_">tap</span>(<span class="string">&#x27;LarkThemePlugin&#x27;</span>, <span class="function"><span class="params">compilation</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">HtmlWebpackPlugin</span>.<span class="title function_">getHooks</span>(compilation).<span class="property">alterAssetTags</span>.<span class="title function_">tapAsync</span>(<span class="string">&#x27;LarkThemePlugin&#x27;</span>, <span class="function">(<span class="params">data, cb</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> source = <span class="variable language_">this</span>.<span class="title function_">generateResult</span>();</span><br><span class="line">          compilation.<span class="property">assets</span>[<span class="string">&#x27;theme.css&#x27;</span>] = &#123; <span class="attr">source</span>: <span class="function">() =&gt;</span> source, <span class="attr">size</span>: <span class="function">() =&gt;</span> <span class="title class_">Buffer</span>.<span class="title function_">byteLength</span>(source, <span class="string">&#x27;utf-8&#x27;</span>)&#125;;</span><br><span class="line">          <span class="keyword">const</span> &#123; <span class="attr">assetTags</span>: &#123; styles &#125;&#125; = data;</span><br><span class="line">          styles.<span class="title function_">unshift</span>(&#123;</span><br><span class="line">            <span class="attr">tagName</span>: <span class="string">&#x27;link&#x27;</span>,</span><br><span class="line">            <span class="attr">voidTag</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">attributes</span>: &#123;</span><br><span class="line">              <span class="attr">href</span>: <span class="string">&#x27;theme.css&#x27;</span>,</span><br><span class="line">              <span class="attr">rel</span>: <span class="string">&#x27;stylesheet&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="title function_">cb</span>(<span class="literal">null</span>,data);</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">InjectThemeWebpackPlugin</span>;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨ï¼šè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œéœ€è¦ä¿è¯<code>html-webpack-plugin</code>æ’ä»¶ä¸€ç›´æ˜¯ä¸€ä¸ªï¼Œä¸ç„¶ä¼šå‡ºç°æ— æ³•è¿½åŠ ä¸Š link æ ‡ç­¾çš„æƒ…å†µ</p>
</blockquote>
]]></content>
      <categories>
        <category>Chore</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>æµè§ˆå™¨æ¶æ„å’Œäº‹ä»¶å¾ªç¯</title>
    <url>/2021/10/09/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9E%B6%E6%9E%84%E5%92%8C%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/</url>
    <content><![CDATA[<h3 id="chromeæµè§ˆå™¨æ¶æ„"><a href="#chromeæµè§ˆå™¨æ¶æ„" class="headerlink" title="chromeæµè§ˆå™¨æ¶æ„"></a>chromeæµè§ˆå™¨æ¶æ„</h3><p>Chrome é‡‡ç”¨å¤šè¿›ç¨‹æ¶æ„ï¼Œå…¶é¡¶å±‚å­˜åœ¨ä¸€ä¸ª Browser process ç”¨ä»¥åè°ƒæµè§ˆå™¨çš„å…¶å®ƒè¿›ç¨‹ã€‚</p>
<ul>
<li>Browser Processï¼š</li>
</ul>
<ol>
<li><p>è´Ÿè´£åŒ…æ‹¬åœ°å€æ ï¼Œä¹¦ç­¾æ ï¼Œå‰è¿›åé€€æŒ‰é’®ç­‰éƒ¨åˆ†çš„å·¥ä½œï¼›</p>
</li>
<li><p>è´Ÿè´£å¤„ç†æµè§ˆå™¨çš„ä¸€äº›ä¸å¯è§çš„åº•å±‚æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚å’Œæ–‡ä»¶è®¿é—®ï¼›</p>
</li>
</ol>
<ul>
<li>Renderer Processï¼š</li>
</ul>
<ol>
<li>è´Ÿè´£ä¸€ä¸ª tab å†…å…³äºç½‘é¡µå‘ˆç°çš„æ‰€æœ‰äº‹æƒ…</li>
</ol>
<ul>
<li>Plugin Processï¼š</li>
</ul>
<ol>
<li>è´Ÿè´£æ§åˆ¶ä¸€ä¸ªç½‘é¡µç”¨åˆ°çš„æ‰€æœ‰æ’ä»¶ï¼Œå¦‚ flash</li>
</ol>
<ul>
<li>GPU Process</li>
</ul>
<ol>
<li>è´Ÿè´£å¤„ç† GPU ç›¸å…³çš„ä»»åŠ¡</li>
</ol>
<p><img src="/../assets/image-20210930012419754.png" alt="image-20210930012419754"></p>
<p>ç”±äºä¸€ä¸ªtabæ ‡ç­¾é¡µéƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“è¿›ç¨‹ï¼Œæ‰€ä»¥ä¸€ä¸ªtabå¼‚å¸¸å´©æºƒåï¼Œå…¶ä»–tabä¸ä¼šå—åˆ°å½±å“ã€‚</p>
<p>ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹åŒ…æ‹¬</p>
<ul>
<li>JSå¼•æ“çº¿ç¨‹</li>
<li>HTTPè¯·æ±‚çº¿ç¨‹</li>
<li>å®šæ—¶è§¦å‘çº¿ç¨‹</li>
<li>äº‹ä»¶è§¦å‘çº¿ç¨‹</li>
<li>GUIçº¿ç¨‹</li>
</ul>
<h3 id="æµè§ˆå™¨JSå¼‚æ­¥æ‰§è¡ŒåŸç†"><a href="#æµè§ˆå™¨JSå¼‚æ­¥æ‰§è¡ŒåŸç†" class="headerlink" title="æµè§ˆå™¨JSå¼‚æ­¥æ‰§è¡ŒåŸç†"></a>æµè§ˆå™¨JSå¼‚æ­¥æ‰§è¡ŒåŸç†</h3><p>æ‰§è¡ŒJSä»£ç çš„çº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œæ˜¯æµè§ˆå™¨æä¾›çš„JSå¼•æ“çº¿ç¨‹ï¼Œæµè§ˆå™¨ä¸­è¿˜æœ‰</p>
<p><img src="/../image/image-20210930012033902.png" alt="image-20210930012033902"></p>
<span id="more"></span>

<h3 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="headerlink" title="äº‹ä»¶å¾ªç¯"></a>äº‹ä»¶å¾ªç¯</h3><p><img src="/../image/image-20210930190158487.png" alt="image-20210930190158487"></p>
<p>jså¼•æ“è§£æä»£ç æ—¶ï¼Œé‡åˆ°åŒæ­¥ä»»åŠ¡-&gt;æ”¾å…¥æ‰§è¡Œæ ˆç›´æ¥æ‰§è¡Œï¼Œé‡åˆ°å¼‚æ­¥ä»»åŠ¡ï¼ˆæ¯”å¦‚ajaxï¼‰ï¼Œäº¤ç»™ç½‘ç»œçº¿ç¨‹å¤„ç†ï¼Œå®Œæˆåå°†å¯¹åº”å›è°ƒæ”¾å…¥å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œ<strong>å½“æ‰§è¡Œæ ˆæ¸…ç©ºæ—¶ï¼Œå¾ªç¯æ£€æµ‹å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†å¼‚æ­¥é˜Ÿåˆ—ä¸­çš„å›è°ƒæ”¾å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚</strong></p>
<h3 id="å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"><a href="#å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡" class="headerlink" title="å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"></a>å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡</h3><p><strong>Domæ¸²æŸ“ä¼šåœ¨å¾®ä»»åŠ¡ç»“æŸåï¼Œå®ä»»åŠ¡æ‰§è¡Œå‰</strong></p>
<h4 id="å®ä»»åŠ¡"><a href="#å®ä»»åŠ¡" class="headerlink" title="å®ä»»åŠ¡"></a>å®ä»»åŠ¡</h4><table>
<thead>
<tr>
<th>#</th>
<th>æµè§ˆå™¨</th>
<th>Node</th>
</tr>
</thead>
<tbody><tr>
<td><code>I/O</code></td>
<td>âœ…</td>
<td>âœ…</td>
</tr>
<tr>
<td><code>setTimeout</code></td>
<td>âœ…</td>
<td>âœ…</td>
</tr>
<tr>
<td><code>setInterval</code></td>
<td>âœ…</td>
<td>âœ…</td>
</tr>
<tr>
<td><code>setImmediate</code></td>
<td>âŒ</td>
<td>âœ…</td>
</tr>
<tr>
<td><code>requestAnimationFrame</code></td>
<td>âœ…</td>
<td>âŒ</td>
</tr>
</tbody></table>
<h4 id="å¾®ä»»åŠ¡"><a href="#å¾®ä»»åŠ¡" class="headerlink" title="å¾®ä»»åŠ¡"></a>å¾®ä»»åŠ¡</h4><table>
<thead>
<tr>
<th>#</th>
<th>æµè§ˆå™¨</th>
<th>Node</th>
</tr>
</thead>
<tbody><tr>
<td><code>process.nextTick</code></td>
<td>âŒ</td>
<td>âœ…</td>
</tr>
<tr>
<td><code>MutationObserver</code></td>
<td>âœ…</td>
<td>âŒ</td>
</tr>
<tr>
<td><code>Promise.then catch finally</code></td>
<td>âœ…</td>
<td>âœ…</td>
</tr>
</tbody></table>
<h3 id="äº‹ä»¶å¾ªç¯åŠ å…¥å®ä»»åŠ¡å¾®ä»»åŠ¡"><a href="#äº‹ä»¶å¾ªç¯åŠ å…¥å®ä»»åŠ¡å¾®ä»»åŠ¡" class="headerlink" title="äº‹ä»¶å¾ªç¯åŠ å…¥å®ä»»åŠ¡å¾®ä»»åŠ¡"></a>äº‹ä»¶å¾ªç¯åŠ å…¥å®ä»»åŠ¡å¾®ä»»åŠ¡</h3><ol>
<li>Call Stackè°ƒç”¨æ ˆæ¸…ç©º</li>
<li><strong>æ¸…ç©º</strong>å½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>å°è¯•DOMæ¸²æŸ“</li>
<li>æ‰§è¡Œevent loop </li>
<li>å–å‡ºä»»åŠ¡é˜Ÿåˆ—é‡Œçš„ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå…¥æ ˆæ‰§è¡Œ</li>
<li>è¿”å›1</li>
</ol>
<p>å¯¹äºä»¥ä¸‹demo</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">r</span>();</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>))</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>))</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">r</span>();</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>))</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>))</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// 1 4 2 5 3 6</span></span><br></pre></td></tr></table></figure>

<p><code>Promise.prototype.then()</code> ä¼šéšå¼è¿”å›ä¸€ä¸ªæ–° Promise</p>
<p>å¦‚æœ Promise çš„çŠ¶æ€æ˜¯ pendingï¼Œé‚£ä¹ˆ <code>then</code> ä¼šåœ¨è¯¥ Promise ä¸Šæ³¨å†Œä¸€ä¸ªå›è°ƒï¼Œå½“å…¶çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯¹åº”çš„å›è°ƒå°†ä½œä¸ºä¸€ä¸ªå¾®ä»»åŠ¡è¢«æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</p>
<p>å¦‚æœ Promise çš„çŠ¶æ€å·²ç»æ˜¯ fulfilled æˆ– rejectedï¼Œé‚£ä¹ˆ <code>then()</code> ä¼šç«‹å³åˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ï¼Œå°†ä¼ å…¥çš„å¯¹åº”çš„å›è°ƒæ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</p>
<p>å¯¹äºä»¥ä¸‹demoï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;start&#x27;</span>)</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise in timeout&#x27;</span>);</span><br><span class="line">            <span class="title function_">resolve</span>();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise after timeout&#x27;</span>);</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise4&#x27;</span>);</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;7777&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise5&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;99999&#x27;</span>);</span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line">    <span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise3&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;end&#x27;</span>);</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// start</span></span><br><span class="line"><span class="comment">// promise after timeout</span></span><br><span class="line"><span class="comment">// end</span></span><br><span class="line"><span class="comment">// promise3</span></span><br><span class="line"><span class="comment">// promise in timeout</span></span><br><span class="line"><span class="comment">// promise4</span></span><br><span class="line"><span class="comment">// 7777</span></span><br><span class="line"><span class="comment">// promise5</span></span><br><span class="line"><span class="comment">// 99999</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Browser</category>
      </categories>
      <tags>
        <tag>Chrome</tag>
      </tags>
  </entry>
</search>
